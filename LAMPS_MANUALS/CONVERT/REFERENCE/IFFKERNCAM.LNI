
















                                  [3mLaser-Scan Ltd.[0m


                                  [3mCONVERT PACKAGE[0m

                                [3mIFFKERNCAM Reference[0m


                              [3mIssue 1.0 - 17-June-1991[0m































  Copyright (C) 1991 Laser-Scan Ltd
  Science Park, Milton Road, Cambridge, England CB4 4FY  tel: (01223) 420414

  Document "IFFKERNCAM REFERENCE", Category "REFERENCE"
  Document Issue 1.0      S Townrow (modified 17-Jun-1991)


  IFFKERNCAM REFERENCE (1.0)
  Contents                                                  17 June 1991


                                     CONTENTS

                  IFFKERNCAM - Change Record . . . . . . . . . . . . . i

                  PREFACE  . . . . . . . . . . . . . . . . . . . . . . 1
                    Intended audience  . . . . . . . . . . . . . . . . 1
                    Structure of this document . . . . . . . . . . . . 1
                    Conventions used in this document  . . . . . . . . 2


  CHAPTER 1       KERNCAM FORMAT DESCRIPTION

                  FORMAT DESCRIPTION . . . . . . . . . . . . . . . . 1-1
                    Introduction . . . . . . . . . . . . . . . . . . 1-1
                    Disc file output . . . . . . . . . . . . . . . . 1-1
                    The KERN CAM Format  . . . . . . . . . . . . . . 1-1
                    The KERN CAM file structure  . . . . . . . . . . 1-3


  CHAPTER 2       KERNCAM DATA PREPARATION

                  DATA PREPARATION . . . . . . . . . . . . . . . . . 2-1
                    Comparison of KERN CAM and IFF . . . . . . . . . 2-1
                    Map Header Data  . . . . . . . . . . . . . . . . 2-2
                    Feature Code Translation . . . . . . . . . . . . 2-2
                    ACD Table  . . . . . . . . . . . . . . . . . . . 2-3
                    An FRT File for use with KERN CAM Data Held in 
                    IFF  . . . . . . . . . . . . . . . . . . . . . . 2-5


  CHAPTER 3       I2KERNCAM UTILITY

                  UTILITY I2KERNCAM  . . . . . . . . . . . . . . . . 3-1
                    FUNCTION . . . . . . . . . . . . . . . . . . . . 3-1
                    FORMAT . . . . . . . . . . . . . . . . . . . . . 3-1
                    PROMPT . . . . . . . . . . . . . . . . . . . . . 3-1
                    PARAMETERS . . . . . . . . . . . . . . . . . . . 3-1
                    COMMAND QUALIFIERS . . . . . . . . . . . . . . . 3-2
                    RESTRICTIONS . . . . . . . . . . . . . . . . . . 3-2
                    DESCRIPTION  . . . . . . . . . . . . . . . . . . 3-2
                      Command line . . . . . . . . . . . . . . . . . 3-2
                      Program action . . . . . . . . . . . . . . . . 3-2
                    EXAMPLES . . . . . . . . . . . . . . . . . . . . 3-4
                    MESSAGES (SUCCESS) . . . . . . . . . . . . . . . 3-5
                    MESSAGES (INFORMATIONAL) . . . . . . . . . . . . 3-6
                    MESSAGES (WARNING) . . . . . . . . . . . . . . . 3-7
                    MESSAGES (ERROR) . . . . . . . . . . . . . . . . 3-8
                    MESSAGES (OTHER) . . . . . . . . . . . . . . .  3-10


  CHAPTER 4       KERNCAM2I UTILITY

                  UTILITY KERNCAM2I  . . . . . . . . . . . . . . . . 4-1
                    FUNCTION . . . . . . . . . . . . . . . . . . . . 4-1
                    FORMAT . . . . . . . . . . . . . . . . . . . . . 4-1
                    PROMPT . . . . . . . . . . . . . . . . . . . . . 4-1


  IFFKERNCAM REFERENCE (1.0)
  Contents                                                  17 June 1991


                    PARAMETERS . . . . . . . . . . . . . . . . . . . 4-1
                    COMMAND QUALIFIERS . . . . . . . . . . . . . . . 4-2
                    DESCRIPTION  . . . . . . . . . . . . . . . . . . 4-2
                      Command line . . . . . . . . . . . . . . . . . 4-2
                      Input file . . . . . . . . . . . . . . . . . . 4-2
                      Output file  . . . . . . . . . . . . . . . . . 4-2
                      Program action . . . . . . . . . . . . . . . . 4-2
                  EXAMPLES . . . . . . . . . . . . . . . . . . . . . 4-4
                    MESSAGES (SUCCESS) . . . . . . . . . . . . . . . 4-7
                    MESSAGES (WARNING) . . . . . . . . . . . . . . . 4-8
                    MESSAGES (ERROR) . . . . . . . . . . . . . . .  4-10
                    MESSAGES (OTHER) . . . . . . . . . . . . . . .  4-13


  IFFKERNCAM REFERENCE (1.0)                                                Page i
  Change record                                                       17 June 1991


  [1m-------------------------------------------------------------------------------[0m
  [1mIFFKERNCAM -[0m [1mChange Record[0m


  [1m-------------------------------------------------------------------------------[0m

  [1mVersion[0m [1m1.0   S[0m [1mTownrow  17-June-1991[0m

            Module IFFKERNCAM - Reorganised package documentation.

  [1m-------------------------------------------------------------------------------[0m


  IFFKERNCAM REFERENCE (1.0)                                                Page 1
  PREFACE                                                             17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mPREFACE[0m



  [1m--------------------------------------------------------------------------------[0m
  [1mIntended[0m [1maudience[0m

            This manual is intended  for  users  of  a  specific  utility  of  the
            Laser-Scan CONVERT package running under the VAX/VMS operating system.
            Each manual  contains  the  documentation  for  a  particular  CONVERT
            utility  and a site will only receive new or updated documentation for
            those utilities which they have purchased.

  [1m--------------------------------------------------------------------------------[0m
  [1mStructure[0m [1mof[0m [1mthis[0m [1mdocument[0m

            This document is composed of 2 major sections.

            The Introduction is  an  overview  of  the  CONVERT  package  and  its
            purpose.

            There then follow the User Guides for  the  individual  modules  which
            comprise  CONVERT.   Each  individual  module  contains the same basic
            categories of information.  These are:

            MODULE              - the name of the CONVERT module.

            FORMAT DESCRIPTION  - a description of the data format written or
                                  read by the utility programs in this conversion
                                  module.

            DATA PREPARATION    - guidance on how to digitise or prepare the IFF
                                  and other data required by the utility programs
                                  in this module.

            For each utility program  in  the  module,  there  will  then  be  the
            following categories:

            UTILITY             - the name of the utility.

            FUNCTION            - a synopsis of what the utility does.

            FORMAT              - a summary of the utility command format
                                  and command qualifiers. Default qualifier
                                  settings are indicated.

            PROMPT              - how it prompts the user.

            PARAMETERS          - description of expected command parameters.

            COMMAND QUALIFIERS  - description of all command qualifiers.
                                  Qualifiers are ordered alphabetically and 
                                  default argument values are indicated.

            RESTRICTIONS        - a summary of restrictions on the use of 


  IFFKERNCAM REFERENCE (1.0)                                                Page 2
  PREFACE                                                             17 June 1991


                                  qualifiers

            DESCRIPTION         - the definitive description of the utility 
                                  action.

            COMMANDS            - for interactive utilities only, a description 
                                  of all commands. Commands are ordered 
                                  alphabetically and default argument values are 
                                  indicated. 

            EXAMPLES            - annotated examples of utility useage.

            MESSAGES            - all classes of message are listed and described
                                  and suggested user action given. The messages
                                  are divided into sections according to message
                                  severity within which the messages are ordered
                                  alphabetically by message mnemonic.

  [1m--------------------------------------------------------------------------------[0m
  [1mConventions[0m [1mused[0m [1min[0m [1mthis[0m [1mdocument[0m


            ----------------------------------------------------------------------
            Convention            Meaning
            ----------------------------------------------------------------------
            <CR>                  The user should press the carriage control key
                                  on the terminal

            <CTRL/x>              The phrase <CTRL/x> indicates that the user must
                                  press the key labelled CTRL while simultaneously
                                  pressing another key, for example, <CTRL/Z>.

            $ [1mIFF2SIF<CR>[0m         Command examples show all user entered commands
                                  in [1mbold[0m type.

            $ [1mIFF2SIF<CR>[0m         Vertical series of periods, or ellipsis, mean
                    .             either that not all the data that CONVERT would
                    .             display in response to the particular command is
                    .             shown or that not all the data that the user
                                  would enter is shown.

            file-spec...          Horizontal elipsis indicates that additional
                                  parameters, values or information can be
                                  entered.

            [logical-name]        Square brackets indicate that the enclosed item
                                  is optional. (Square brackets are not, however,
                                  optional in the syntax of a directory name in
                                  a file-specification, or in the syntax of a
                                  substring specification in a VMS assisnment
                                  statement).
            ----------------------------------------------------------------------


  IFFKERNCAM REFERENCE (1.0)                                                Page 3
  PREFACE                                                             17 June 1991


            ----------------------------------------------------------------------
            Convention            Meaning
            ----------------------------------------------------------------------
            'integer'             An integer number is expected in the specified
                                  input or output field. (See "Command line data
                                  types" below).

            'real'                A real number is expected in the specified input
                                  or output field. (See "Command line data types"
                                  below).

            'file-spec'           A VMS file specification is expected in the
                                  specified input or output field.

            'device-name'         A VMS device specification (for instance, MTA0:)
                                  is expected in the specified input or output
                                  field.
            ----------------------------------------------------------------------















                                     CHAPTER 1

                             KERNCAM FORMAT DESCRIPTION





  IFFKERNCAM REFERENCE (1.0): KERNCAM format description                  Page 1-1
  FORMAT DESCRIPTION                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mFORMAT[0m [1mDESCRIPTION[0m

            [1m----------------------------------------------------------------------[0m
            [1mIntroduction[0m

            The  program  I2KERNCAM  provides  a  translation  from   Laser-Scan's
            Internal  Feature  Format  (IFF)  to  the  KERN CAM format.  KERNCAM2I
            provides a translation from a KERN CAM  file  to  IFF.   For  a  brief
            comparison of the way IFF and KERN CAM regard data, see the section on
            'Data Preparation' below.

            The programs read and produce the KERN CAM ASCII format, as  described
            in the document KERN MAPS 200 - User's Guide, published June 1987, and
            other documentation supplied by Kern & Co.  Ltd.  Mechanical,  Optical
            and Electronic Precision Instruments, CH-5001 Aarau, Switzerland.

            [1m----------------------------------------------------------------------[0m
            [1mDisc[0m [1mfile[0m [1moutput[0m

            The programs read from and write to disc file in KERN  CAM  format  in
            ASCII code.  Each disc file contains the output from one IFF file.

            [1m----------------------------------------------------------------------[0m
            [1mThe[0m [1mKERN[0m [1mCAM[0m [1mFormat[0m

            The data is output to and read from a KERN CAM file with the  expected
            format as defined in this summary.

            The broad structure  of  the  file  comprises  an  optional  4  record
            'header',  followed  by  the  main  body  of 'data'.  The data section
            begins with a START record and  the  file  is  terminated  by  a  QUIT
            record.

            Records are of various lengths and mainly consist of either CHANGE  TO
            commands  or  3D  coordinate  strings.  Other records used are the MAP
            INDEX coordinates for the map origin, and the START and QUIT commands.
            All  other  records  are  considered  to be User Messages which are 40
            characters of free text.

            A 3D coordinate string  contains  the  easting,  northing  and  height
            values  for  a  point feature or points along a linear feature.  There
            can be a fourth optional field of up to 16 characters  describing  the
            point or specifying a contour label.

            The following CHANGE TO records (code words) are read and written:


            CHANGE TO MAP SCALE 
            CHANGE TO MAP INDEX
            CHANGE TO LINETYPE
            CHANGE TO SYMBOL
            CHANGE TO SCALE
            CHANGE TO SYMBOL ROTATION
            CHANGE TO TEXT ROTATION
            CHANGE TO HOUR


  IFFKERNCAM REFERENCE (1.0): KERNCAM format description                  Page 1-2
  FORMAT DESCRIPTION                                                  17 June 1991


            CHANGE TO PEN DOWN
            CHANGE TO PEN UP
            CHANGE TO STRAIGHT
            CHANGE TO CURVE
            CHANGE TO CONTOUR
            CHANGE TO ARC
            CHANGE TO OBJECT


            The following CHANGE TO code words are treated specially when read:

            CHANGE TO MAP ROTATION

                 The value for the rotation is ignored when read, as there  is  no
                 appropriate   entry   in   the  IFF  file  Map  Header  for  this
                 information.  The IFF file may be transformed by the IMP  utility
                 ITRANS  if required.  The map rotation is always given a value of
                 zero when a KERN CAM file is written.

            CHANGE TO SPOT HEIGHT

                 Ignored when read and only written when there is an  AC  'Height'
                 entry in the IFF file.  (See I2KERNCAM user guide below).

            CHANGE TO NETWORK

                 When read, in order  to  create  the  full  representation  of  a
                 network  line,  additional  symbol  features are generated at the
                 data points of the line feature.  They are not written to a  KERN
                 CAM file.

            CHANGE TO START HATCHING
            CHANGE TO END HATCHING

                 These code words and  all  the  records  between  them,  actually
                 defining  the  hatch  lines, are not transferred to the IFF file.
                 The hatching of buildings is achieved  instead  by  defining  the
                 feature  codes  for  buildings  as 'fill areas' in the FRT table.
                 The hatching will then be produced only when the file is plotted.
                 These code words are not written to a KERN CAM file.

            The following CHANGE TO code words are not written, and  ignored  when
            read,  as they are only relevant to the functioning of a KERN MAPS 200
            system.

            CHANGE TO CLIP POINT
            CHANGE TO CLIP LINE

                 See the 'extend' and  'edge  matching'  commands  in  LITES2  for
                 equivalent feature correlation functions.


  IFFKERNCAM REFERENCE (1.0): KERNCAM format description                  Page 1-3
  FORMAT DESCRIPTION                                                  17 June 1991


            CHANGE TO GROUP ON
            CHANGE TO GROUP OFF
            CHANGE TO SAME SEGMENT

                 See the 'region' and 'layer' commands in  LITES2  for  equivalent
                 feature grouping functions.

            CHANGE TO MARKER ROTATION
            CHANGE TO MARKER HEIGHT

                 See the symbol and text  'size'  and  'orientation'  commands  in
                 LITES2 for equivalent functions.

            CHANGE TO PEN n

                 The 'pen number' for the plotting of IFF features is  defined  in
                 an FRT table.

            CHANGE TO SQUARE

                 See the 'squaring' commands in LITES2 for equivalent functions.

            [1m----------------------------------------------------------------------[0m
            [1mThe[0m [1mKERN[0m [1mCAM[0m [1mfile[0m [1mstructure[0m

            A KERN CAM file will optionally begin with a 'header' of the form:


            CHANGE TO MAP SCALE 99999999.9999 99999999.9999
            CHANGE TO MAP ROTATION 999.999999 999.999999
            CHANGE TO MAP INDEX
             99999999.999 99999999.999

            START is then required, followed by line features and  point  features
            in any order.

            Line features take the form:


            (CHANGE TO NETWORK)
            (CHANGE TO SCALE          9.999999)
            CHANGE TO LINETYPE n                 (16 chars. description)
            CHANGE TO STRAIGHT/CURVE/CONTOUR/ARC
            (CHANGE TO HOUR           9.99)
            CHANGE TO PEN UP
             9999999.999 9999999.999 9999999.999 (description)
            CHANGE TO PEN DOWN
             9999999.999 9999999.999 9999999.999
                  |           |           |
             9999999.999 9999999.999 9999999.999



  IFFKERNCAM REFERENCE (1.0): KERNCAM format description                  Page 1-4
  FORMAT DESCRIPTION                                                  17 June 1991




            Point features take the form:


            (CHANGE TO SCALE          9.999999)
            CHANGE TO SYMBOL 999                 (16 chars. description)
            (CHANGE TO SYMBOL ROTATION 99.999999)
            (CHANGE TO TEXT   ROTATION 99.999999)
            CHANGE TO OBJECT/SPOT HEIGHT
            (CHANGE TO HOUR           9.99)
             9999999.999 9999999.999 9999999.999 (description)


            NOTES:
                 Commands in parentheses are not mandatory.
                 The field extents are only indicative -  see  KERN  documentation
                 for the precise formats.

            QUIT is required to mark the end of the data.














                                     CHAPTER 2

                              KERNCAM DATA PREPARATION





  IFFKERNCAM REFERENCE (1.0): KERNCAM data preparation                    Page 2-1
  DATA PREPARATION                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mDATA[0m [1mPREPARATION[0m

            [1m----------------------------------------------------------------------[0m
            [1mComparison[0m [1mof[0m [1mKERN[0m [1mCAM[0m [1mand[0m [1mIFF[0m

            IFF is a feature orientated data  format  -  data  is  separated  into
            features,  and  each  feature  represents  one 'thing' on the map.  An
            integer feature code is used to say what type of thing it is that  the
            feature represents.  A feature might thus be a contour, or a house, or
            a river, depending on the type of map being  digitised,  and  the  way
            that the data is to be used.

            KERN CAM format shares this concept of a  'feature',  and  the  simple
            form  of CAM produced is essentially an ASCII representation of an IFF
            file on a feature by feature basis.

            KERNCAM2I considers a feature in a KERN CAM file to be limited by  pen
            up  moves  and  feature  definition code words.  A linear feature in a
            KERN CAM file containing segments separated  by  pen  up  instructions
            will  be  broken  into separate features, of the same kind, in the IFF
            file.  Multiple coordinates contained  in  a  single  KERN  CAM  point
            feature  are  converted  into separate point features in IFF format by
            KERNCAM2I.

            The plotted shape of symbols and the line styles produced by MAPS  200
            software  from  the  KERN  CAM  file  can be reproduced by appropriate
            entries in an SRI file and in FRT table pattern definitions.

            The IFF format does not represent 'network' lines in the same  way  as
            KERN, they are converted by KERNCAM2I into a linear feature - possibly
            a patterned line - and point symbols at every coordinate with  the  FC
            equal to that of the line plus 5000.

            Spot heights in KERN  CAM  files  are  translated  into  single  point
            features  where  the  height  is  held  in  the  Z  value  of  the IFF
            coordinate.  This may be displayed by labelling  these  features  with
            their Z attribute in LITES2.

            The hatching of buildings is achieved by defining the building feature
            code  as  'fill  areas'  in  an  FRT  table  (GT  12).   The  hatching
            specifically drawn in the KERN CAM  file  is  therefore  discarded  in
            favour  of  software  hatching produced only at plot time from the IFF
            file.

            The IFF format does not support changes to  the  plotting  colour  for
            subsequent features as indicated by the CHANGE TO PEN code word in CAM
            format.  This code word is ignored by KERNCAM2I.  A  feature's  colour
            is determined by its specification in the FRT file.

            The IFF format does not support changes to the  scale  for  subsequent
            features  as indicated by the CHANGE TO SCALE code word in CAM format.
            This code word is  recorded  in  an  AC  entry  in  the  IFF  file  by
            KERNCAM2I,  and  reiterated on output by I2KERNCAM.  A point feature's
            size is determined by its size in the FRT file.


  IFFKERNCAM REFERENCE (1.0): KERNCAM data preparation                    Page 2-2
  DATA PREPARATION                                                    17 June 1991


            The IFF format has no equivalent to CHANGE TO CLIP LINE,  CLIP  POINT,
            GROUP ON, GROUP OFF, SQUARE, SAME SEGMENT, MARKER ROTATION, AND MARKER
            HEIGHT code words and these are ignored by KERNCAM2I and  not  written
            by  I2KERNCAM.   Some  of  these  functions can be emulated within the
            LITES2 editor, such as joining of lines, selecting subsets of features
            and squaring.

            'User Messages' in KERN CAM format are displayed  if  the  DIAGNOSTICS
            qualifier  is  specified,  as  are  all  KERN  CAM  file  records, but
            otherwise ignored.

            The subset of KERN CAM format produced by I2KERNCAM does  not  contain
            any  facility  for  the transmission of IFF map level entries, layers,
            text, line thickness, scaled symbols, symbol  strings,  clockwise  and
            anti-clockwise arcs or multiple attribute coding of IFF features.

            I2KERNCAM is thus best suited for use with an IFF containing  symbols,
            contour  strings or 3 dimensional strings (held in IFF ZS entries).  2
            dimensional IFF strings held in ST entries may  have  a  height  value
            taken  from  an AC entry.  By default this AC will be of type 3, which
            carries the height value as a floating point number.  If there  is  no
            type  3  AC  entry in the feature a default value of 0.0 is used.  Any
            AC's of type 3 in IFF features which consist of  3D  strings  (IFF  ZS
            entries) will be ignored.

            [1m----------------------------------------------------------------------[0m
            [1mMap[0m [1mHeader[0m [1mData[0m

            KERNCAM2I will by default construct an IFF Type 2 Map  Descriptor  and
            include in the Map Descriptor the arguments for CHANGE TO MAP SCALE in
            the Scale, and for CHANGE TO MAP INDEX into the  Origin  Offset.   The
            arguments  to  CHANGE  TO  MAP  ROTATION  are  ignored  as there is no
            appropriate IFF record in which to hold them.  Other  entries  in  the
            Map Descriptor are unset.  If there are no CHANGE TO code words before
            START in the KERN CAM file then the scale is set to 1.0 and the origin
            offset to 0.0, 0.0 The IFF Map Header entry is unset.

            I2KERNCAM will extract the scale and origin offset from an IFF Type  2
            Map  Descriptor  and  write  the  header  records to the KERN CAM file
            including a Map Rotation of 0.  If the IFF  file  has  a  Type  1  Map
            Descriptor  then  no  header  details are output and the KERN CAM file
            begins with the START code word.  The IFF Map Header entry is ignored.

            [1m----------------------------------------------------------------------[0m
            [1mFeature[0m [1mCode[0m [1mTranslation[0m

            The transmission of the feature code for  any  particular  feature  is
            obviously  between  the KERN CAM format CHANGE TO LINETYPE argument or
            CHANGE TO SYMBOL argument and  the  IFF  Feature  Status  (FS)  entry.
            However, the IFF FRT file mechanism allows only a single occurrence of
            a feature code with a unique graphical  type,  whereas  the  KERN  CAM
            feature  may  have  one  of several graphical types for a single value
            (between 1  and  999)  of  LINETYPE  or  SYMBOL  argument.   A  direct
            correlation is therefore not possible between the 2 formats.


  IFFKERNCAM REFERENCE (1.0): KERNCAM data preparation                    Page 2-3
  DATA PREPARATION                                                    17 June 1991


            The transmission of the feature code is achieved by expanding the KERN
            CAM  value  by multiples of 1000 by graphical type in KERNCAM2I and an
            equivalent reduction by I2KERNCAM.  Basically  all  LINETYPE  features
            that are not STRAIGHT (GT = 1) are treated as interpolated curves with
            GT = 6 (CHANGE TO CURVE or CONTOUR), or as full circumcircles  (GT  5)
            or  part  arcs  (GT  4)  for CHANGE TO ARC, the difference between the
            latter two depending on whether the  feature  coordinates  are  closed
            (first  point  =  last  point)  or not, respectively.  There are a few
            special linear features that are best suited by a GT = 12  (fill-area)
            if closed, which replaces the HATCHING facility in KERN CAM.

            Most SYMBOLS are treated as oriented symbols with GT  =  8,  including
            the  symbol features added to reproduce a NETWORK at the vertices of a
            linear feature.  There are some special SYMBOL features with GT 10  in
            the  FRT  file  used  for text string transmission.  The text is taken
            from the ZS name field in the KERN CAM coordinate lines, or  from  the
            FC  name  field in the CHANGE TO SYMBOL line if not.  The transmission
            of the feature codes are defined in the following table.


                   KERN CAM format                          IFF format
                   ===============                          ==========

            Library Number     Form               Feature Status l Graphical Type

            LINETYPE 1-999  {  STRAIGHT                 1 -  999          1
                            {  CURVE                 1001 - 1999          6
                            {  CONTOUR               2001 - 2999          6
                            {  ARC (part arc)        3001 - 3999          4
                            {  ARC (circle)          4001 - 4999          5
                            {  NETWORK               5001 - 5999          8


            Some linear feature codes require a Graphical Type 12 if they  are  to
            be treated as fill areas.

            SYMBOL   1-999  {  OBJECT                6001 - 6999          8
                            {  SPOT HEIGHT           6001 - 6999          8


            Some symbol feature codes require a Graphical Type 10 if they are to 
            display a text string.


            [1m----------------------------------------------------------------------[0m
            [1mACD[0m [1mTable[0m

            Several fields in the KERN  CAM  format  contain  relevant  data  that
            should  be conserved in any translation by I2KERNCAM and KERNCAM2I but
            for which no specific entries exist in  IFF  format  to  hold.   These
            fields are held as AC entries on a per feature basis.

            The KERN CAM fields held as AC entries are the arguments to  the  code
            words  CHANGE  TO  SCALE  and  CHANGE  TO  HOUR, and the additional 16
            characters of text appended to the code words CHANGE  TO  LINETYPE  or
            CHANGE  TO  SYMBOL, and to the first coordinate line.  The latter AC's


  IFFKERNCAM REFERENCE (1.0): KERNCAM data preparation                    Page 2-4
  DATA PREPARATION                                                    17 June 1991


            are output only if the text information  is  not  used  for  any  text
            feature  TX entry to prevent duplication of information within the IFF
            file.

            The programs I2KERNCAM and KERNCAM2I always refer to the  ACs  by  the
            same  names,  so  allowing the user to determine which code is used in
            the AC entries in the  IFF  file,  by  supplying  a  suitable  Feature
            Representation  Table  (FRT)  file.   The FRT file will be read by the
            programs, which then use it to determine the AC codes corresponding to
            each  AC  name.   Full details of the preparation and use of FRT files
            can be found in the Laser-Scan 'FRT User Guide'.

            The fields of the KERN CAM format are listed below, with the names and
            types  of  the  AC entries in which they are held in an equivalent IFF
            file:


            [1mCHANGE[0m [1mTO[0m [1mHOUR[0m [1margument[0m
            AC Name :  Kern_Hour
            AC Type :  Real, between 0.0 and 999999.99.


            [1mCHANGE[0m [1mTO[0m [1mSCALE[0m [1margument[0m
            AC Name :  Kern_Scale
            AC Type :  Real, between 0.0 and 999999.999999.


            [1mLinetype/Symbol[0m [1mDescription[0m
            AC Name :  Kern_FC_Name
            AC Type :  Integer, between 1 and 16,
                       -  indicates  length  of  Additional   Text   holding   the
            description.


            [1mCoordinate[0m [1mDescription[0m
            AC Name :  Kern_ZS_Name
            AC Type :  Integer, between 1 and 16,
                       -  indicates  length  of  Additional   Text   holding   the
            description.


  IFFKERNCAM REFERENCE (1.0): KERNCAM data preparation                    Page 2-5
  DATA PREPARATION                                                    17 June 1991


            [1m----------------------------------------------------------------------[0m
            [1mAn[0m [1mFRT[0m [1mFile[0m [1mfor[0m [1muse[0m [1mwith[0m [1mKERN[0m [1mCAM[0m [1mData[0m [1mHeld[0m [1min[0m [1mIFF[0m

            The following is a listing of a typical FRT file which might  be  used
            with  KERNCAM2I,  I2KERNCAM and other utilities to prepare and process
            an IFF file from an KERN CAM format  disc  file.   This  FRT  file  is
            normally  supplied with KERNCAM2I and I2KERNCAM for acceptance testing
            as the file:
            LSL$PUBLIC_ROOT:[CONVERT.ACCEPT]KERN_CAM.FRT
  !
  ! Feature Representation Table for use in the development and acceptance
  ! testing of CONVERT programs KERNCAM2I and I2KERNCAM.
  !
  ! Author: F J Brown
  ! Date: 6 October 1988
  ! Copyright:    Laser-Scan Ltd, Cambridge Science Park,
  !               Milton Road, Cambridge CB4 4FY, England.
  !
  ! Use SRI OS, TRI OS in LITES2 as this is based on Ordnance Survey FRT
  !
  !
  !       FC      GT      COL     WIDTH   SIZE    SC         DESCRIPTION
  !
  ! STRAIGHT:
  !
  FRT     0       1       1       0       0.0     0       ! Corner Marks
  !
  FRT     1       1       2       0       0.0     0       ! Paved ROAD
  FRT     2       1       2       0       0.0     0       ! Kerb ROAD
  FRT     3       1       2       0       0.0     1       ! Footpath ROAD
  FRT     4       1       2       0       0.0     0       ! Main ROAD
  FRT     10      12      2       0       2.0     104     ! House BLDG
  FRT     15      1       2       0       0.0     2       ! Railway ROAD
  FRT     40      12      2       0       2.0     104     ! House BLDG
  FRT     61      1       2       0       0.0     4       ! Fence BDY
  FRT     80      1       1       0       0.0     0       ! Tree Outline CLT
  FRT     111     1       1       0       0.0     3       ! Pond DRAIN
  FRT     120     1       2       0       0.0     0       ! Contour ELEV
  !
  ! CURVE
  !
  FRT     1001    6       2       0       0.0     0       ! Paved ROAD
  FRT     1002    6       2       0       0.0     0       ! Kerb ROAD
  FRT     1003    6       2       0       0.0     1       ! Footpath ROAD
  FRT     1004    6       2       0       0.0     0       ! Main ROAD
  FRT     1010    6       2       0       0.0     0       ! House BLDG
  FRT     1015    6       2       0       0.0     2       ! Railway ROAD
  FRT     1040    6       2       0       0.0     0       ! House BLDG
  FRT     1061    6       2       0       0.0     4       ! Fence BDY
  FRT     1080    6       1       0       0.0     0       ! Tree Outline CLT
  FRT     1111    6       1       0       0.0     3       ! Pond DRAIN
  FRT     1120    6       2       0       0.0     0       ! Contour ELEV
  !
  ! CONTOUR
  !
  FRT     2001    6       2       0       0.0     0       ! Paved ROAD


  IFFKERNCAM REFERENCE (1.0): KERNCAM data preparation                    Page 2-6
  DATA PREPARATION                                                    17 June 1991


  FRT     2002    6       2       0       0.0     0       ! Kerb ROAD
  FRT     2003    6       2       0       0.0     1       ! Footpath ROAD
  FRT     2004    6       2       0       0.0     0       ! Main ROAD
  FRT     2010    6       2       0       0.0     0       ! House BLDG
  FRT     2015    6       2       0       0.0     2       ! Railway ROAD
  FRT     2040    6       2       0       0.0     0       ! House BLDG
  FRT     2061    6       2       0       0.0     4       ! Fence BDY
  FRT     2080    6       1       0       0.0     0       ! Tree Outline CLT
  FRT     2111    6       1       0       0.0     3       ! Pond DRAIN
  FRT     2120    6       2       0       0.0     0       ! Contour ELEV
  !
  ! ARC (arc)
  !
  FRT     3001    4       2       0       0.0     0       ! Paved ROAD
  FRT     3002    4       2       0       0.0     0       ! Kerb ROAD
  FRT     3003    4       2       0       0.0     1       ! Footpath ROAD
  FRT     3004    4       2       0       0.0     0       ! Main ROAD
  FRT     3010    4       2       0       0.0     0       ! House BLDG
  FRT     3015    4       2       0       0.0     2       ! Railway ROAD
  FRT     3040    4       2       0       0.0     0       ! House BLDG
  FRT     3061    4       2       0       0.0     4       ! Fence BDY
  FRT     3080    4       1       0       0.0     0       ! Tree Outline CLT
  FRT     3111    4       1       0       0.0     3       ! Pond DRAIN
  FRT     3120    4       2       0       0.0     0       ! Contour ELEV
  !
  ! ARC (circle)
  !
  FRT     4001    5       2       0       0.0     0       ! Paved ROAD
  FRT     4002    5       2       0       0.0     0       ! Kerb ROAD
  FRT     4003    5       2       0       0.0     1       ! Footpath ROAD
  FRT     4004    5       2       0       0.0     0       ! Main ROAD
  FRT     4010    5       2       0       0.0     0       ! House BLDG
  FRT     4015    5       2       0       0.0     2       ! Railway ROAD
  FRT     4040    5       2       0       0.0     0       ! House BLDG
  FRT     4061    5       2       0       0.0     4       ! Fence BDY
  FRT     4080    5       1       0       0.0     0       ! Tree Outline CLT
  FRT     4111    5       1       0       0.0     3       ! Pond DRAIN
  FRT     4120    5       2       0       0.0     0       ! Contour ELEV
  !
  ! ORIENTED SYMBOL for NETWORKing of linear features
  !
  FRT     5001    8       2       0       2.0     1       ! 
  FRT     5002    8       2       0       2.0     1       ! 
  FRT     5003    8       2       0       2.0     1       ! 
  FRT     5004    8       2       0       2.0     1       ! 
  FRT     5010    8       2       0       2.0     1       ! 
  FRT     5015    8       2       0       2.0     1       ! 
  FRT     5040    8       2       0       2.0     1       ! 
  FRT     5061    8       2       0       2.0     1       ! 
  FRT     5080    8       1       0       2.0     1       ! 
  FRT     5111    8       1       0       2.0     1       ! 
  FRT     5120    8       2       0       2.0     1       ! 
  !
  ! ORIENTED SYMBOL
  !
  FRT     6001    10      2       0       2.0     1       ! Free Annot. ROAD


  IFFKERNCAM REFERENCE (1.0): KERNCAM data preparation                    Page 2-7
  DATA PREPARATION                                                    17 June 1991


  FRT     6081    8       1       0       0.0     6       ! Tree CLT
  FRT     6092    8       1       0       0.0     6       ! Banana CLT
  FRT     6094    8       1       0       0.0     6       ! Rubber CLT
  FRT     6111    8       1       0       2.0     1       ! Water DRAIN
  FRT     6120    10      2       0       2.0     1       ! Free Annot. ELEV
  FRT     6121    8       2       0       2.0     1       ! Spot Height ELEV
  !
  ! Pattern Definition Table
  !
  PATTERN 1       0       0       0       0       5.0     4.0  0.0  0.0  0.0
  PATTERN 2       0       1       0       0       9.0     6.0  0.0  0.0  1.0
  PATTERN 3       0       0       0       0       6.0     4.0  0.0  0.0  0.0
  PATTERN 4       0       0       0       0       6.0     4.5  0.0  0.0  0.0
  !
  !
  ! KERN CAM AC's
  !
  ACD     TABLE   1   
  !
  ACD     R       1       Kern_hour
  ACD     R       2       Kern_scale
  ACD     I       3       Kern_FC_name    0       16      ! no. of characters
  ACD     I       4       Kern_ZS_name    0       16      ! no. of characters
  !
  !
  !       FC      GT      Colour  Width   Size    SC      Description
  SCT     0       1       0       0       0       0       ! LINEAR
  SCT     1       1       0       0       0       0       line
  SCT     2       2       0       0       0       0       clockwise arc
  SCT     3       3       0       0       0       0       anticlockwise arc
  SCT     4       4       0       0       0       0       circumcircle arc
  SCT     5       5       0       0       0       0       full circumcircle
  SCT     6       6       0       0       0       0       interpolated curve
  !
  !SCT    5       6       0       0       0       0       ! INTERPOLATED CURVE
  SCT     65      2       0       0       0       0       ! CLOCKWISE ARC
  SCT     66      3       0       0       0       0       ! ANTICLOCKWISE ARC
  SCT     67      4       0       0       0       0       ! CIRCUMCIRCLE ARC
  SCT     68      5       0       0       0       0       ! FULL CIRCUMCIRCLE
















                                     CHAPTER 3

                                 I2KERNCAM UTILITY





  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-1
  UTILITY I2KERNCAM                                                   17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mUTILITY[0m [1mI2KERNCAM[0m

  [1m--------------------------------------------------------------------------------[0m
  [1mFUNCTION[0m

            I2KERNCAM reads an Internal Feature Format (IFF) file, and produces  a
            file on disc in KERN CAM format.

  [1m--------------------------------------------------------------------------------[0m
  [1mFORMAT[0m

            $ I2KERNCAM input-IFF-file-spec output-KERNCAM-file-spec

            [1mCommand[0m [1mqualifiers[0m               [1mDefaults[0m

            /[NO]DIAGNOSTICS                 /NODIAGNOSTICS
            /FRT=file-spec                   /FRT=LSL$FRT:KERN_CAM.FRT


  [1m--------------------------------------------------------------------------------[0m
  [1mPROMPT[0m

            _Input-IFF-file:           input-IFF-file-spec

            _Output-KERNCAM-file:      output-KERNCAM-file-spec

  [1m--------------------------------------------------------------------------------[0m
  [1mPARAMETERS[0m

  input-IFF-file-spec

          - This parameter specifies the name of an IFF file, and  is  compulsory.
            The data written to the output file are read from this file.  Only one
            filename may be specified for each run of the program.
            The default device and extension LSL$IF:filename.IFF  are  applied  to
            the input file specification when it is parsed.

  output-KERNCAM-file-spec

          - This parameter specifies the name of a KERN  CAM  data  file,  and  is
            compulsory.   The  data  read  from the input file are written to this
            file.  Only one filename may be specified for each run of the program.
            The default device and extension SYS$DISK:[]KERN_CAM.DAT  are  applied
            to the output file specification when it is parsed.


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-2
  UTILITY I2KERNCAM                                                   17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mCOMMAND[0m [1mQUALIFIERS[0m


  /DIAGNOSTICS
  /NODIAGNOSTICS (default)

          - When /DIAGNOSTICS  is  present,  the  I2KERNCAM  utility  will  output
            diagnostic messages as it processes the input file.


  /FRT=file-spec

          - The /FRT command qualifier specifies a  Feature  Representation  Table
            (FRT)  file  which  the program will read to determine the AC codes to
            give to the AC entries in  the  IFF  file,  created  to  hold  feature
            attribute  information.   The program I2KERNCAM always refers to these
            ACs using the same names, but the user may alter the codes, onto which
            these names map, by changing the FRT file.
            The default file specification is  LSL$FRT:KERN_CAM.FRT.   If  a  file
            specification is given with /FRT, it is parsed against this default.

  [1m--------------------------------------------------------------------------------[0m
  [1mRESTRICTIONS[0m

            I2KERNCAM does not translate features that are held in IFF  format  as
            clockwise  arcs,  anti-clockwise arcs, scaled symbols or text.  Symbol
            strings are translated into linear features  without  the  symbols  to
            indicate the feature's presence.

  [1m--------------------------------------------------------------------------------[0m
  [1mDESCRIPTION[0m


            [1mCommand[0m [1mline[0m

            The symbol I2KERNCAM is normally set up as:

                      I2KERNCAM == "$lsl$exe:i2kerncam"

            and the program may then be used as if it were a normal VMS utility.

            [1mProgram[0m [1maction[0m

            I2KERNCAM is a utility to transfer an Internal  Feature  Format  (IFF)
            disk file to a KERN CAM format disc file written in ASCII code.

            Note that only a single dataset may be transferred during a single run
            of the program.

            If the /DIAGNOSTICS qualifier is used on the command line, the program
            produces messages giving information on the IFF layers found.

            If the IFF file has a Type 2 Map Descriptor then the scale and  origin
            offset  are  extracted  and  used  to  write  the  KERN CAM Map Header
            records.  If the IFF file has a Type 1 Map Descriptor then no KERN CAM


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-3
  UTILITY I2KERNCAM                                                   17 June 1991


            Header  details  are written.  See the section on 'Format Description'
            for details of the KERN CAM Map Header.

            I2KERNCAM always outputs a START record before any data records.

            I2KERNCAM then translates each IFF feature record in  the  input  file
            into  the  relevant  KERN  CAM data records.  The data features can be
            contained in any layers from layer 1 onwards of the IFF file  and  are
            ordered as in the IFF file.  The X, Y and Z co-ordinates of a ZS entry
            are transfered to the easting, northing and height, respectively, of a
            data  record.   All  the  AC  entries  contained  in  the  feature are
            transfered to the relevant CHANGE TO records or  attribute  fields  in
            the  data  record.   The codes of these AC entries are determined from
            the FRT file read by the program.

            The I2KERNCAM program always refers to the types  of  the  AC  entries
            which  it  constructs using the same AC names.  The user may alter the
            codes of the AC entries written to the output IFF file by changing the
            FRT file read by the program.  The use of the FRT file is described in
            the 'Data Preparation' section of the documentation for this module.

            I2KERNCAM always outputs a QUIT record after  the  data  records,  and
            closes all files.

            The feature codes of the IFF file are converted,  according  to  their
            graphical type, into the correct KERN CAM library number and geometric
            form record.  The section on 'Data Preparation' gives details of  this
            conversion.

            Some quantities may be subject to rounding errors in their final digit
            when  the  program  transfers them from the input IFF file to the KERN
            CAM format tape file.  This will generally only occur  for  quantities
            when  all  8  of their potential significant figures (digits) are used
            (ie.  greater than 99.99999 degrees).  This rounding error is inherent
            to VAX/VMS data storage methods.

            Details of the structure, content and characteristics of an  KERN  CAM
            format  tape  are  to  be  found  in the 'Data Format' section of this
            modules's documentation.


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-4
  UTILITY I2KERNCAM                                                   17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mEXAMPLES[0m

  $ [1mI2KERNCAM/DIAGNOSTICS/FRT=KERN_CAM[0m [1mFTEST11.IFF[0m [1mKERNTEST11<CR>[0m
  %LSLLIB-I-IFFOPENED, LSL$DATA_ROOT:[LSL.IFF]FTEST11.IFF;2 opened for read
  %I2KERNCAM-I-CAMOPEN, KERN CAM file SYS$DISK:[]KERNTEST11.DAT;0 opened for
  output
  %I2KERNCAM-I-LAYER, layer 1 found
   ELAPSED:    0 00:00:08.15  CPU: 0:00:01.82  BUFIO: 18  DIRIO: 61  FAULTS: 210 



  This example shows a normal run of I2KERNCAM using both available qualifiers and
  successfully converting the IFF file FTEST11 into the KERN CAM file KERN_TEST11.


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-5
  MESSAGES (SUCCESS)                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(SUCCESS)[0m

  These messages are used to indicate that the program has succeeded in performing
  some action, and do not require any user action.

  NORMAL, Normal, successful completion

      [1mExplanation:[0m  I2KERNCAM has finished its operations successfully and without
      problems.

      [1mUser[0m [1maction:[0m  None.


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-6
  MESSAGES (INFORMATIONAL)                                            17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(INFORMATIONAL)[0m

  These messages give information only, and require no  immediate  action  by  the
  user.  They are used to provide information on the current state of the program,
  or to supply explanatory information in support of a warning or error message.

  CAMOPEN, KERN CAM file 'file-spec' opened for output

      [1mExplanation:[0m  The specified KERN CAM file has been opened for writing

      [1mUser[0m [1maction:[0m  None.

  LAYER, layer 'integer' found

      [1mExplanation:[0m  The specified layer has been found in the input IFF file

      [1mUser[0m [1maction:[0m  None.


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-7
  MESSAGES (WARNING)                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(WARNING)[0m

  These messages are output when an error  has  occurred  that  can  be  corrected
  immediately by the user or that the program will attempt to overcome.

  UNKFCOD, Unknown FC code 'integer' - feature ignored

      [1mExplanation:[0m  The specified FC code was not found in the FRT table  supplied
      to the program.  The IFF feature has been ignored.

      [1mUser[0m [1maction:[0m  Check that the correct FRT table with the  complete  range  of
      FRT entries was supplied.

  UNKGT, Invalid GT code 'integer' - feature ignored

      [1mExplanation:[0m  The Graphical Type cannot be transferred to KERN  CAM  format.
      The IFF feature has been ignored.

      [1mUser[0m [1maction:[0m  Check that the correct FRT table with the  complete  range  of
      FRT  entries  with  their  correct  GT  entries was supplied.  If the FRT is
      correct then the feature must be altered in LITES2 to one of a valid  GT  if
      it is required to be output

  UNSETMD, IFF type 2 map descriptor is unset

      [1mExplanation:[0m  The IFF file must have a type  2  map  descriptor  entry  with
      valid origin offset

      [1mUser[0m [1maction:[0m  Amend the IFF file using ITRANS and rerun  I2KERNCAM  on  this
      data.


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-8
  MESSAGES (ERROR)                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(ERROR)[0m

  These messages indicate an error in processing which will cause the  program  to
  terminate.   The  most  likely  causes  are a corrupt or otherwise invalid input
  file, or an error related to command line processing and file manipulation.

  BADFEAT, error processing feature 'fsn' ('isn')

      [1mExplanation:[0m  An error - usually with the AC entries - has been  encountered
      while  processing  the  feature.   The  associated  error messages will give
      further information.

      [1mUser[0m [1maction:[0m  Investigate the cause of the error using IPATCH or LITES2  and
      rerun I2KERNCAM on the data.

  BADFRT, error initialising FRT file 'file-spec'

      [1mExplanation:[0m  I2KERNCAM has not been able to open the  specified  FRT  file.
      The associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check the spelling of the FRT file-spec and that the  required
      FRT is available in the directory LSL$FRT:

  CAMARC, error processing arc feature 'fsn' ('isn')

      [1mExplanation:[0m   An  error  has  been   encountered   while   processing   the
      circumcircle  arc  feature.  The associated error messages will give further
      information.

      [1mUser[0m [1maction:[0m  Investigate the cause of the error using IPATCH or LITES2  and
      rerun I2KERNCAM on the data.

  CAMCURVE, error processing curve feature 'fsn' ('isn')

      [1mExplanation:[0m  An error has  been  encountered  while  processing  the  curve
      interpolated  feature.   The  associated  error  messages  will give further
      information.

      [1mUser[0m [1maction:[0m  Investigate the cause of the error using IPATCH or LITES2  and
      rerun I2KERNCAM on the data.

  CAMLINE, error processing line feature 'fsn' ('isn')

      [1mExplanation:[0m  An error  has  been  encountered  while  processing  the  line
      feature.  The associated error messages will give further information.

      [1mUser[0m [1maction:[0m  Investigate the cause of the error using IPATCH or LITES2  and
      rerun I2KERNCAM on the data.


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                           Page 3-9
  MESSAGES (ERROR)                                                    17 June 1991


  CAMSYMBOL, error processing symbol feature 'fsn' ('isn')

      [1mExplanation:[0m  An error has been  encountered  while  processing  the  symbol
      feature.  The associated error messages will give further information.

      [1mUser[0m [1maction:[0m  Investigate the cause of the error using IPATCH or LITES2  and
      rerun I2KERNCAM on the data.

  ERROROUT, writing to the KERN CAM file at the start of layer 'integer'

      [1mExplanation:[0m  The program is unable  to  write  to  the  output  file.   The
      associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check that a valid output file name has been given.

  ERROROUTMD, unable to write MD data to the KERN CAM file.

      [1mExplanation:[0m  The program is unable  to  write  to  the  output  file.   The
      associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check that a valid output file name has been given.

  NOCOORDS, no coordinate entry found for feature 'fsn' ('isn')

      [1mExplanation:[0m  An error has been encountered while  processing  the  feature.
      No  coordinates,  in  either  an  ST or ZS entry, have been found in the IFF
      feature.  The feature has not been output to the KERN CAM file.

      [1mUser[0m [1maction:[0m  Investigate the cause of the error using IPATCH or LITES2  and
      rerun I2KERNCAM on the data.

  UNEXPEOF, unexpected end of IFF file

      [1mExplanation:[0m  The IFF file has an incorrect structure or missing entries.

      [1mUser[0m [1maction:[0m  Amend the IFF file using IPATCH and rerun I2KERNCAM.


  IFFKERNCAM REFERENCE (1.0): I2KERNCAM utility                          Page 3-10
  MESSAGES (OTHER)                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(OTHER)[0m

  In addition to the above messages which are generated  by  the  program  itself,
  other  messages  may  be  produced  by the command line interpreter (CLI) and by
  Laser-Scan libraries.  In particular, messages  may  be  generated  by  the  IFF
  library  and  by  the  Laser-Scan I/O library, LSLLIB.  IFF library messages are
  introduced by '%IFF' and are documented in the IFF  library  users'  guide.   In
  most  cases  IFF  errors will be due to a corrupt input file, and this should be
  the first area of investigation.  If the cause of the error cannot be traced  by
  the user, and Laser-Scan are consulted, then the output file should be preserved
  to facilitate diagnosis.  LSLLIB messages are introduced by  '%LSLLIB'  and  are
  generally  self-explanatory.   They  are  used to explain the details of program
  generated errors.














                                     CHAPTER 4

                                 KERNCAM2I UTILITY





  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-1
  UTILITY KERNCAM2I                                                   17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mUTILITY[0m [1mKERNCAM2I[0m

  [1m--------------------------------------------------------------------------------[0m
  [1mFUNCTION[0m

            KERNCAM2I is a utility to transfer a dataset from a  KERN  CAM  format
            file on disc to an Internal Feature Format (IFF) disc file.

  [1m--------------------------------------------------------------------------------[0m
  [1mFORMAT[0m

            $ KERNCAM2I Input-KERNCAM-file-spec Output-IFF-file-spec

            [1mCommand[0m [1mqualifiers[0m                     [1mDefaults[0m

            /[NO]DIAGNOSTICS                      /NODIAGNOSTICS
            /FRT = file-spec                      /LSL$FRT:KERN_CAM.FRT


  [1m--------------------------------------------------------------------------------[0m
  [1mPROMPT[0m

            _Input-KERNCAM-file:      Input-KERNCAM-file-spec



            _Output-IFF-file:         Output-IFF-file-spec

  [1m--------------------------------------------------------------------------------[0m
  [1mPARAMETERS[0m

  Input-KERNCAM-file-spec

          - specifies the input KERN CAM disc file and is compulsory.  Any part of
            the  file  specification  which is not supplied will be taken from the
            default   specification:    'SYS$DISK:[]KERN_CAM.DAT;0'.    Only   one
            filename may be specified for each run of the program.


  Output-IFF-file-spec

          - specifies the output IFF file and is compulsory.  Any part of the file
            specification  which  is  not  supplied will be taken from the default
            specification:   'LSL$IF:KERN_CAM.IFF'.   Only  one  filename  may  be
            specified for each run of the program.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-2
  UTILITY KERNCAM2I                                                   17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mCOMMAND[0m [1mQUALIFIERS[0m

  /DIAGNOSTICS
  /NODIAGNOSTICS (default)

          - selects the output of selected  diagnostic  messages,  describing  the
            progress of the KERN CAM to IFF file conversion.

  /FRT = file-spec

          - specifies the FRT file specification containing the normal FRT entries
            and  the  attribute  code  definitions (ACD) entries.  Any part of the
            file spec which is not supplied is taken from the default  definition:
            'LSL$FRT:KERN_CAM.FRT'.

  [1m--------------------------------------------------------------------------------[0m
  [1mDESCRIPTION[0m


            [1mCommand[0m [1mline[0m

            The symbol KERNCAM2I is normally set up as:

                      KERNCAM2I == "$lsl$exe:kerncam2i"

            and the program may then be used as if it were a normal VMS utility.

            [1mInput[0m [1mfile[0m

            The input is expected to be a valid KERN CAM data file.   For  further
            description  of  the  KERN  CAM  data  structure  see the accompanying
            'Format Description' section.

            [1mOutput[0m [1mfile[0m

            The default action is to output one dataset to a single IFF file,  the
            required file having been selected by input filename.

            [1mProgram[0m [1maction[0m

            KERNCAM2I is a utility to transfer a KERN CAM format disc file  to  an
            Internal Feature Format (IFF) disk file.

            Note that only a single dataset may be transferred during a single run
            of the program.

            KERNCAM2I writes a Type 2 Map Descriptor to the output IFF  file,  and
            if the relevant 'MAP SCALE' and 'MAP INDEX' records are present at the
            start of the input KERN CAM file the arguments are inserted in the IFF
            header  as  map  scale  and origin offset.  See the section on 'Format
            Description' for details of the KERN CAM Map Header.

            After a START  code  word  has  been  read  from  the  KERN  CAM  file
            subsequent records are translated into IFF features.  All IFF features
            are constructed in layer 1 of the IFF file.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-3
  UTILITY KERNCAM2I                                                   17 June 1991


            The argument to the CHANGE TO LINETYPE code word is expanded into  the
            feature  code  (FS  entry)  in the IFF file depending on the geometric
            nature of the feature.   See  the  table  in  the  'Data  Preparation'
            section for details of this conversion.  These feature codes reference
            appropriate  graphical  types  which  are  defined  in  the  FRT  file
            LSL$FRT:KERN_CAM.FRT.

            The easting, northing and height record(s) of the KERN CAM feature are
            translated  into  3D  strings  (ZS  Entries)  in  the  IFF  file.  The
            coordinates of linear features are translated literally where 'PEN UP'
            moves  become  invisible  moves  and  'PEN  DOWN' moves become visible
            moves.

            The textual descriptions which  may  be  appended  to  the  CHANGE  TO
            LINETYPE/SYMBOL  code  word and to the first coordinate record are put
            into AC entries within the relevant feature.   Similarly,  AC  entries
            are constructed for the arguments to the CHANGE TO SCALE and CHANGE TO
            HOUR code words, if they are present.

            The KERNCAM2I program always refers to the types  of  the  AC  entries
            which  it  constructs using the same AC names.  The user may alter the
            codes of the AC entries written to the output IFF file by changing the
            FRT file read by the program.  The use of the FRT file is described in
            the 'Data Preparation' section of the documentation for this module.

            KERNCAM2I will close the IFF file on reading a QUIT record  after  the
            data records.

            Some quantities may be subject to rounding errors in their final digit
            when  the  program  transfers them from the input IFF file to the KERN
            CAM format tape file.  This will generally only occur  for  quantities
            when  all  8  of their potential significant figures (digits) are used
            (ie.  greater than 99.99999 degrees).  This rounding error is inherent
            to VAX/VMS data storage methods.

            Details of the structure, content and characteristics of an  KERN  CAM
            format  tape  are  to  be  found  in the 'Data Format' section of this
            modules's documentation.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-4
  EXAMPLES                                                            17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mEXAMPLES[0m


   [1m$[0m [1mKERNCAM2I<CR>[0m

  _Input-KERN-File: TEST<CR>
  _Output-IFF-File: TESTKERN<CR>

   Reading KERN CAM file SYS$DISK:[]TEST.DAT;0
  %LSLLIB-I-IFFOPENED, LSL$DATA_ROOT:[LSL.IFF]TESTKERN.IFF;4 opened for write

   Writing to IFF file LSL$DATA_ROOT:[LSL.IFF]TESTKERN.IFF;4

   ELAPSED:    0 00:00:21.23  CPU: 0:00:02.91  BUFIO: 19  DIRIO: 68  FAULTS: 246 



  This example shows a successful conversion of KERN CAM file  TEST.DAT  into  the
  IFF file TESTKERN.IFF with default file specifications.



   [1m$[0m [1mKERNCAM2I/FRT=KERN_CAM/DIAGNOSTICS[0m [1mDEMO[0m [1mTESTKERN<CR>[0m

  .Command line was: KERNCAM2I/FRT=KERN_CAM/DIAGNOSTICS DEMO TESTKERN

   Reading KERN CAM file SYS$DISK:[]DEMO.DAT;0
  %LSLLIB-I-IFFOPENED, LSL$DATA_ROOT:[LSL.IFF]TESTKERN.IFF;2 opened for write

   Writing to IFF file LSL$DATA_ROOT:[LSL.IFF]TESTKERN.IFF;2

   Line read:
   Line ignored:
   Line read: CHANGE TO MAP SCALE     2500.0000     2500.0000
   MD2 scale is:      2500.0000
   Line read: CHANGE TO MAP ROTATION   0.628319     40.0000
   Line ignored: CHANGE TO MAP ROTATION   0.628319     40.0000
   Line read: CHANGE TO MAP INDEX
   Line read:     39500.000     5900.000
   MD2 origin:     39500.000       5900.000
   Line read: START
   IFF header information output

   Line read: CHANGE TO LINETYPE   1            PAVED ROAD
   Linetype FC: 1
   FC Name: PAVED ROAD      
   Line read: CHANGE TO STRAIGHT
   Line ignored: CHANGE TO STRAIGHT
   Line read: CHANGE TO HOUR           0.44
   Hour:            0.44
   Line read: CHANGE TO PEN UP
   Line read:    39101.529    6572.268     824.816
   Line read: CHANGE TO PEN DOWN
   Line read:    39155.714    6606.782     821.896
   Line read:    39232.805    6656.333     820.758


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-5
  EXAMPLES                                                            17 June 1991


   Line read:    39296.559    6696.514     820.780
   Line read:    39363.887    6738.713     821.730
   Line read: CHANGE TO LINETYPE   1            PAVED ROAD
   Linetype FC: 1
   FC Name: PAVED ROAD      
   Line read: CHANGE TO CURVE
   Linetype FC now: 1001
   Line read: CHANGE TO HOUR           0.45
   Hour:            0.45
   Line read:    39370.876    6742.806     821.735
   Line read:    39389.337    6751.621     822.760
   Line read:    39410.962    6764.728     823.243
   Line read:    39428.373    6777.010     823.179
   Line read:    39456.871    6800.456     823.179
   Line read:    39480.603    6823.967     823.184
   Line read:    39497.310    6838.121     823.179
   Line read:    39508.005    6849.248     823.173
   Line read: CHANGE TO LINETYPE   1            PAVED ROAD
   Linetype FC: 1
   FC Name: PAVED ROAD      
   Line read: CHANGE TO STRAIGHT
   Line ignored: CHANGE TO STRAIGHT
   Line read: CHANGE TO HOUR           0.45
   Hour:            0.45
   Line read:    39527.887    6868.247     823.206
   Line read:    39547.924    6887.381     823.093
   Line read:    39567.267    6906.112     823.087
   Line read: CHANGE TO LINETYPE   3            FOOTPATH ROAD
   Linetype FC: 3
   FC Name: FOOTPATH ROAD   
   Line read: CHANGE TO STRAIGHT
   Line ignored: CHANGE TO STRAIGHT
   Line read: CHANGE TO HOUR           0.45
   Hour:            0.45
   Line read: CHANGE TO PEN UP
   Line read:    39105.141    6566.627     824.816
   Line read: CHANGE TO PEN DOWN
   Line read:    39156.597    6599.573     821.896
   Line read:    39236.397    6650.679     820.758
   Line read:    39300.123    6690.843     820.780
   Line read:    39367.361    6732.985     821.730
   Line read: CHANGE TO LINETYPE   3            FOOTPATH ROAD
   Linetype FC: 3
   FC Name: FOOTPATH ROAD   
   Line read: CHANGE TO CURVE 
   Linetype FC now: 1003
   Line read: CHANGE TO HOUR           0.45
   Hour:            0.45
   Line read:    39374.015    6736.888     821.735
   Line read:    39392.523    6745.720     822.760
   Line read:    39414.633    6759.121     823.243
   Line read:    39432.437    6771.680     823.179
   Line read:    39461.681    6795.740     823.179
   Line read:    39480.016    6818.946     823.184
   Line read:    39501.601    6832.920     823.179
   Line read:    39512.764    6844.533     823.173


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-6
  EXAMPLES                                                            17 June 1991


   Line read: CHANGE TO LINETYPE   3            FOOTPATH ROAD
   Linetype FC: 3
   FC Name: FOOTPATH ROAD   
   Line read: CHANGE TO STRAIGHT
   Line ignored: CHANGE TO STRAIGHT
   Line read: CHANGE TO HOUR           0.45
   Hour:            0.45
   Line read:    39530.350    6861.755     823.206
   Line read:    39549.742    6879.913     823.093 
   Line read:    39571.916    6901.290     823.087
   Line read: CHANGE TO LINETYPE  15            RAILWAY ROAD 
   Linetype FC: 15
   FC Name: RAILWAY ROAD    
   Line read: CHANGE TO CURVE
   Linetype FC now: 1015
   Line read: CHANGE TO HOUR           0.49
   Hour:            0.49
   Line read: CHANGE TO PEN UP
   Line read:    39614.709    6897.901     813.588
   Line read: CHANGE TO PEN DOWN 
   Line read:    39606.148    6882.455     813.604
   Line read:    39601.193    6873.830     813.631
   Line read: CHANGE TO LINETYPE  15            RAILWAY ROAD
   Linetype FC: 15
   FC Name: RAILWAY ROAD    
   Line read: CHANGE TO STRAIGHT
   Line ignored: CHANGE TO STRAIGHT
   Line read: CHANGE TO HOUR           0.50
   Hour:            0.50
   Line read:    39565.383    6818.680     813.631
   Line read:    39533.222    6773.154     813.631
   Line read:    39485.255    6704.336     812.949
   Line read: CHANGE TO LINETYPE  15            RAILWAY ROAD 
   Linetype FC: 15
   FC Name: RAILWAY ROAD    
   Line read: CHANGE TO CURVE
   Linetype FC now: 1015
   Line read: CHANGE TO HOUR           0.50 
   Hour:            0.50
   Line read:    39476.157    6691.497     812.901


   ELAPSED:    0 00:00:17.46  CPU: 0:00:01.03  BUFIO: 190  DIRIO: 18  FAULTS: 333 



  This second example shows a successful conversion of KERN CAM file DEMO.DAT into
  the IFF file TESTKERN.IFF with default file specifications, with the DIAGNOSTICS
  switched on to give full information on the progress of the file transfer.








  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-7
  MESSAGES (SUCCESS)                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(SUCCESS)[0m

  These messages are used to indicate that the program has succeeded in performing
  some action, and do not require any user action.

  NORMAL, Normal, successful completion

      [1mExplanation:[0m  KERNCAM2I has completed successfully.

      [1mUser[0m [1maction:[0m  None.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-8
  MESSAGES (WARNING)                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(WARNING)[0m

  These messages are output when an error  has  occurred  that  can  be  corrected
  immediately by the user or that the program will attempt to overcome.

  ACDFNDERR, AC type not found in FRT file for name 'string'

      [1mExplanation:[0m  The AC name has not been found in the FRT table.

      [1mUser[0m [1maction:[0m  Check that the correct FRT file has been given.

  FRTFNDERR, FC 'integer' not found in FRT file

      [1mExplanation:[0m  The feature code indicated was not found in the FRT file.

      [1mUser[0m [1maction:[0m  Check that the FRT file given is the correct one, or check for
      the relevant entry.

  KERNPUT0, 'string' replaced with zero

      [1mExplanation:[0m  A error reading a number has resulted in the replacement  with
      zero to the IFF file.

      [1mUser[0m [1maction:[0m  Check the KERN file for the error causing the read error.

  KERNPUT1, 'string' replaced with 1

      [1mExplanation:[0m  A error reading a number has resulted in the replacement  with
      one to the IFF file.

      [1mUser[0m [1maction:[0m  Check the KERN file for the error causing the read error.

  RDINTERR, error reading integer into 'string' from KERN file

      [1mExplanation:[0m  There was an error trying to read an integer number  from  the
      KERN CAM file, and the field will be replaced with the stated number.

      [1mUser[0m [1maction:[0m  Check the KERN file for the cause of the error.

  RDREALERR, error reading real no.  into 'string' from KERN file

      [1mExplanation:[0m  There was an error trying to read a real number from the  KERN
      CAM file, and the field will be replaced with the stated number.

      [1mUser[0m [1maction:[0m  Check the KERN file for the cause of the error.

  SYMBOLGTERR, unexpected GT for symbol feature with FC 'integer'

      [1mExplanation:[0m  A symbol feature with the given feature code has an unexpected
      graphical  type  in  the  FRT file (ie.  not GT 8 or GT 10), and the feature
      cannot be created.

      [1mUser[0m [1maction:[0m  Check that the correct FRT file has been given,  or  that  the
      FRT FC entries are correct.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                           Page 4-9
  MESSAGES (WARNING)                                                  17 June 1991


  UNSETHOUR, hour entry is unset for AC entry

      [1mExplanation:[0m  The hour value is unset due  to  a  read  error,  and  the  AC
      abandoned

      [1mUser[0m [1maction:[0m  Check the data in the KERN file.

  UNSETMD2LOC, The MD2 origin entry was unset, and is set to 0,0

      [1mExplanation:[0m  The MD2 origin entry was unset because of a reading  error  or
      the header was missing from the KERN CAM data, and is assumed to be at (0.0,
      0.0)

      [1mUser[0m [1maction:[0m  Check the data in the KERN file.

  UNSETMD2SCL, MD2 scale entry was unset, and is set to 1.0

      [1mExplanation:[0m  The MD2 scale entry was unset because of a  reading  error  or
      the header was missing from the KERN CAM data, and is assumed to be equal to
      1.0

      [1mUser[0m [1maction:[0m  Check the data in the KERN file.

  UNSETSCALE, scale entry is unset for AC entry

      [1mExplanation:[0m  The scale value is unset due to  a  read  error,  and  the  AC
      abandoned

      [1mUser[0m [1maction:[0m  Check the data in the KERN file.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                          Page 4-10
  MESSAGES (ERROR)                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(ERROR)[0m

  These messages indicate an error in processing which will cause the  program  to
  terminate.   The  most  likely  causes  are a corrupt or otherwise invalid input
  file, or an error related to command line processing and file manipulation.

  ARCPTSERR, wrong no.  of points for arc feature:  'integer'

      [1mExplanation:[0m  There were less than 3 points in a feature preceded by  CHANGE
      TO ARC, and no feature can be created.

      [1mUser[0m [1maction:[0m  Check the KERN CAM file.

  CIRCPTSERR, wrong no.  of points for circle feature:  'integer'

      [1mExplanation:[0m  There were less than 4 points in a feature preceded by  CHANGE
      TO ARC and which was closed to indicate a full circle, and no feature can be
      created.

      [1mUser[0m [1maction:[0m  Check the KERN CAM file.

  CMDLINERR, error in reading command line

      [1mExplanation:[0m  There was an error decoding the command line specified to  run
      the program.

      [1mUser[0m [1maction:[0m  Respecify the command line.

  FILCLOERR, unable to close file 'filename'

      [1mExplanation:[0m  There was an error that prevented the closure of the file, and
      will be left in a strange state.

      [1mUser[0m [1maction:[0m  Check for any system errors that might have caused the error.

  FILOPNERR, unable to open file 'filename'

      [1mExplanation:[0m  There was an error that prevented the opening of the file  for
      reading.

      [1mUser[0m [1maction:[0m  Check for any system errors that might have caused the error.

  FRTINTERR, error opening FRT file 'filename'

      [1mExplanation:[0m  There was an error initialising the required FRT file.

      [1mUser[0m [1maction:[0m  Check the FRT file.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                          Page 4-11
  MESSAGES (ERROR)                                                    17 June 1991


  IFFOPNERR, unable to open IFF file 'filename'

      [1mExplanation:[0m  An error has occurred in the opening of the IFF file.  Further
      information  is  given  in the accompanying error messages.  The most likely
      cause of failure is an invalid file specification, or invalid system  status
      for the creation of disc files.

      [1mUser[0m [1maction:[0m  Check that the file specification used in the parameter of the
      DCL  command  line  is  valid  for  your local system, and that there are no
      access or protection violation problems.  Resubmit the command line  with  a
      valid file specification.

  KERNSTRTERR, program start error

      [1mExplanation:[0m  There was no START line in the KERN CAM file  to  signify  the
      end of the KERN header and the beginning of the data, and reading abandoned.

      [1mUser[0m [1maction:[0m  Check the data in the KERN file.

  OPNFILERR, Error while opening files

      [1mExplanation:[0m  An error has occurred in the opening of the disc  files.   The
      most  likely  reasons  for  the  failure  are  an incorrectly specified file
      specification in the DCL command line parameter, or  invalid  file  creation
      status.   The accompanying error messages give further information about the
      failure.

      [1mUser[0m [1maction:[0m  Resubmit the command line with a valid file specification,  or
      check user status.

  RDCOORDERR, error reading coordinates from line 'string'

      [1mExplanation:[0m  There was an error reading the coordinate values from  a  line
      which was expected to contain them.

      [1mUser[0m [1maction:[0m  Check the contents of the KERN CAM file.

  READLINERR, error reading line from KERN file

      [1mExplanation:[0m  There was an error trying to read the KERN CAM  file  (further
      messages  having  produced  from the program giving further information) and
      the program abandoned.

      [1mUser[0m [1maction:[0m  Check the KERN file for errors.

  UNEXPEOF, unexpected end of file

      [1mExplanation:[0m  The KERN file has come to a premature end.

      [1mUser[0m [1maction:[0m  Check the data in the file.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                          Page 4-12
  MESSAGES (ERROR)                                                    17 June 1991


  UNSETFC, feature code (FC) in the FS entry is unset

      [1mExplanation:[0m  The feature code (FC) in the FS entry is unset due to  a  read
      error, and the feature abandoned

      [1mUser[0m [1maction:[0m  Check the data in the KERN file.


  IFFKERNCAM REFERENCE (1.0): KERNCAM2I utility                          Page 4-13
  MESSAGES (OTHER)                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(OTHER)[0m

  In addition to the above messages which are generated  by  the  program  itself,
  other  messages  may  be  produced  by the command line interpreter (CLI) and by
  Laser-Scan libraries.  In particular, messages  may  be  generated  by  the  IFF
  library  and  by  the  Laser-Scan I/O library, LSLLIB.  IFF library messages are
  introduced by '%IFF' and are documented in the IFF  library  users'  guide.   In
  most  cases  IFF  errors will be due to a corrupt input file, and this should be
  the first area of investigation.  If the cause of the error cannot be traced  by
  the user, and Laser-Scan are consulted, then the output file should be preserved
  to facilitate diagnosis.  LSLLIB messages are introduced by  '%LSLLIB'  and  are
  generally  self-explanatory.   They  are  used to explain the details of program
  generated errors.
