
















                                  [3mLaser-Scan Ltd.[0m


                                  [3mCONVERT PACKAGE[0m

                                  [3mIFFDLG Reference[0m


                               [3mIssue 1.1 - 5-May-1992[0m































  Copyright (C) 1992 Laser-Scan Ltd
  Science Park, Milton Road, Cambridge, England CB4 4FY  tel: (01223) 420414

  Document "IFFDLG REFERENCE", Category "REFERENCE"
  Document Issue 1.1      J Cadogan (modified 05-May-1992)


  IFFDLG REFERENCE (1.1)
  Contents                                                    5 May 1992


                                     CONTENTS

                  IFFDLG - Change Record . . . . . . . . . . . . . . . i

                  PREFACE  . . . . . . . . . . . . . . . . . . . . . . 1
                    Intended audience  . . . . . . . . . . . . . . . . 1
                    Structure of this document . . . . . . . . . . . . 1
                    Conventions used in this document  . . . . . . . . 2


  CHAPTER 1       DLG FORMAT DESCRIPTION

                  FORMAT DESCRIPTION . . . . . . . . . . . . . . . . 1-1
                    Introduction . . . . . . . . . . . . . . . . . . 1-1
                    Magnetic tape output . . . . . . . . . . . . . . 1-1
                    Disk file output . . . . . . . . . . . . . . . . 1-1


  CHAPTER 2       DLG DATA PREPARATION

                  DATA PREPARATION . . . . . . . . . . . . . . . . . 2-1
                    Comparison of DLG and IFF  . . . . . . . . . . . 2-1
                    Format of IFF Files for Transfer To DLG  . . . . 2-1
                    The AC Entries Used to Hold DLG Information in 
                    IFF  . . . . . . . . . . . . . . . . . . . . . . 2-2
                    A Typical FRT File for use with DLG Data Held in 
                    IFF  . . . . . . . . . . . . . . . . . . . . . . 2-4
                    Structuring of IFF Files for Transfer To DLG . . 2-7


  CHAPTER 3       I2DLG UTILITY

                  UTILITY I2DLG  . . . . . . . . . . . . . . . . . . 3-1
                    FUNCTION . . . . . . . . . . . . . . . . . . . . 3-1
                    FORMAT . . . . . . . . . . . . . . . . . . . . . 3-1
                    PROMPT . . . . . . . . . . . . . . . . . . . . . 3-1
                    PARAMETERS . . . . . . . . . . . . . . . . . . . 3-1
                    COMMAND QUALIFIERS . . . . . . . . . . . . . . . 3-2
                    RESTRICTIONS . . . . . . . . . . . . . . . . . . 3-4
                    DESCRIPTION  . . . . . . . . . . . . . . . . . . 3-5
                    EXAMPLES . . . . . . . . . . . . . . . . . . . . 3-7
                    MESSAGES (SUCCESS) . . . . . . . . . . . . . .  3-10
                    MESSAGES (INFORMATIONAL) . . . . . . . . . . .  3-11
                    MESSAGES (WARNING) . . . . . . . . . . . . . .  3-13
                    MESSAGES (ERROR) . . . . . . . . . . . . . . .  3-15
                    MESSAGES (OTHER) . . . . . . . . . . . . . . .  3-21


  IFFDLG REFERENCE (1.1)                                                    Page i
  Change record                                                         5 May 1992


  [1m-------------------------------------------------------------------------------[0m
  [1mIFFDLG -[0m [1mChange Record[0m


  [1m-------------------------------------------------------------------------------[0m

  [1mVersion[0m [1m1.0   S[0m [1mTownrow  17-June-1991[0m

            Module IFFDLG     - Reorganised package documentation.

  [1m-------------------------------------------------------------------------------[0m

  [1mVersion[0m [1m1.2   J[0m [1mCadogan  31-January-1992[0m

            Module IFFDLG     - New I2dlg qualifiers /DATUM, /DECIMAL_HEIGHTS  and
                                /HEIGHT_UNITS  added  which  are  reflected in the
                                documentation.
                              - I2DLG New  information  message  AUTONOD  and  new
                                warning message HEINOTREQ.
                              - I2DLG Description of  the  translation  of  height
                                values from AC type 3's added.



  IFFDLG REFERENCE (1.1)                                                    Page 1
  PREFACE                                                               5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mPREFACE[0m



  [1m--------------------------------------------------------------------------------[0m
  [1mIntended[0m [1maudience[0m

            This manual is intended  for  users  of  a  specific  utility  of  the
            Laser-Scan CONVERT package running under the VAX/VMS operating system.
            Each manual  contains  the  documentation  for  a  particular  CONVERT
            utility  and a site will only receive new or updated documentation for
            those utilities which they have purchased.

  [1m--------------------------------------------------------------------------------[0m
  [1mStructure[0m [1mof[0m [1mthis[0m [1mdocument[0m

            This document is composed of 2 major sections.

            The Introduction is  an  overview  of  the  CONVERT  package  and  its
            purpose.

            There then follow the User Guides for  the  individual  modules  which
            comprise  CONVERT.   Each  individual  module  contains the same basic
            categories of information.  These are:

            MODULE              - the name of the CONVERT module.

            FORMAT DESCRIPTION  - a description of the data format written or
                                  read by the utility programs in this conversion
                                  module.

            DATA PREPARATION    - guidance on how to digitise or prepare the IFF
                                  and other data required by the utility programs
                                  in this module.

            For each utility program  in  the  module,  there  will  then  be  the
            following categories:

            UTILITY             - the name of the utility.

            FUNCTION            - a synopsis of what the utility does.

            FORMAT              - a summary of the utility command format
                                  and command qualifiers. Default qualifier
                                  settings are indicated.

            PROMPT              - how it prompts the user.

            PARAMETERS          - description of expected command parameters.

            COMMAND QUALIFIERS  - description of all command qualifiers.
                                  Qualifiers are ordered alphabetically and 
                                  default argument values are indicated.

            RESTRICTIONS        - a summary of restrictions on the use of 


  IFFDLG REFERENCE (1.1)                                                    Page 2
  PREFACE                                                               5 May 1992


                                  qualifiers

            DESCRIPTION         - the definitive description of the utility 
                                  action.

            COMMANDS            - for interactive utilities only, a description 
                                  of all commands. Commands are ordered 
                                  alphabetically and default argument values are 
                                  indicated. 

            EXAMPLES            - annotated examples of utility useage.

            MESSAGES            - all classes of message are listed and described
                                  and suggested user action given. The messages
                                  are divided into sections according to message
                                  severity within which the messages are ordered
                                  alphabetically by message mnemonic.

  [1m--------------------------------------------------------------------------------[0m
  [1mConventions[0m [1mused[0m [1min[0m [1mthis[0m [1mdocument[0m


            ----------------------------------------------------------------------
            Convention            Meaning
            ----------------------------------------------------------------------
            <CR>                  The user should press the carriage control key
                                  on the terminal

            <CTRL/x>              The phrase <CTRL/x> indicates that the user must
                                  press the key labelled CTRL while simultaneously
                                  pressing another key, for example, <CTRL/Z>.

            $ [1mIFF2SIF<CR>[0m         Command examples show all user entered commands
                                  in [1mbold[0m type.

            $ [1mIFF2SIF<CR>[0m         Vertical series of periods, or ellipsis, mean
                    .             either that not all the data that CONVERT would
                    .             display in response to the particular command is
                    .             shown or that not all the data that the user
                                  would enter is shown.

            file-spec...          Horizontal elipsis indicates that additional
                                  parameters, values or information can be
                                  entered.

            [logical-name]        Square brackets indicate that the enclosed item
                                  is optional. (Square brackets are not, however,
                                  optional in the syntax of a directory name in
                                  a file-specification, or in the syntax of a
                                  substring specification in a VMS assisnment
                                  statement).
            ----------------------------------------------------------------------


  IFFDLG REFERENCE (1.1)                                                    Page 3
  PREFACE                                                               5 May 1992


            ----------------------------------------------------------------------
            Convention            Meaning
            ----------------------------------------------------------------------
            'integer'             An integer number is expected in the specified
                                  input or output field. (See "Command line data
                                  types" below).

            'real'                A real number is expected in the specified input
                                  or output field. (See "Command line data types"
                                  below).

            'file-spec'           A VMS file specification is expected in the
                                  specified input or output field.

            'device-name'         A VMS device specification (for instance, MTA0:)
                                  is expected in the specified input or output
                                  field.
            ----------------------------------------------------------------------















                                     CHAPTER 1

                               DLG FORMAT DESCRIPTION





  IFFDLG REFERENCE (1.1): DLG format description                          Page 1-1
  FORMAT DESCRIPTION                                                    5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mFORMAT[0m [1mDESCRIPTION[0m

            [1m----------------------------------------------------------------------[0m
            [1mIntroduction[0m

            The program I2DLG provides a translation  from  Laser-Scan's  Internal
            Feature Format (IFF) to the U.S.  Geological Survey Digital Line Graph
            (DLG) format.  For a brief comparison of the way IFF  and  DLG  regard
            data, see the section on 'Data Preparation' below.

            The program produces the [1mStandard[0m [1mDLG[0m [1mDistribution[0m [1mformat[0m  [1m(Level[0m  [1m3)[0m,
            as  described  in  the  document  [1mNational[0m  [1mMapping[0m [1mProgram,[0m [1mTechnical[0m
            [1mInstructions,[0m [1mData[0m [1mUsers[0m [1mGuide[0m [1m1,[0m [1mUS[0m [1mGeoData,[0m [1mDigital[0m [1mLine[0m [1mGraphs[0m [1mfrom[0m
            [1m1:24,000-Scale[0m  [1mMaps.[0m   of  1986,  (Department  of  the Interior, U.S.
            Geological Survey, National Mapping Division.)

            [1m----------------------------------------------------------------------[0m
            [1mMagnetic[0m [1mtape[0m [1moutput[0m

            The program write to magnetic tape in DLG-3 format in ASCII code, in a
            block size that is divisible by 144 and which lies in the range 144 to
            5760 bytes (inclusive).  Records have a fixed length of 144 characters
            and  are  padded  with spaces if necessary.  The output is normally at
            1600 bpi, PE, on 9 track tape.

            There are no header blocks, only a series of  header  records  at  the
            start  of the tape.  There are no tapemarks at either the start or end
            of the file on tape.  A single run of I2DLG will  read  a  single  IFF
            file and create a single data file on tape.

            [1m----------------------------------------------------------------------[0m
            [1mDisk[0m [1mfile[0m [1moutput[0m

            Output may also be made  to  disk  file.   Again,  the  record  length
            defaults to 144 bytes.  Records are filled with spaces if necessary.

            Each disk file contains the output from one IFF file.

            These files may then be output to magnetic tape using  either  of  the
            VAX  programs BACKUP or EXCHANGE - the former is intended for transfer
            between VAXes, and the latter provides an ANSI  standard  tape  format
            (it  replaces  the  RSX  utility FLX on VAXes with VMS version 4.0 and
            up).  Consult the relevant Digital manuals for more details  of  these
            utilities.














                                     CHAPTER 2

                                DLG DATA PREPARATION





  IFFDLG REFERENCE (1.1): DLG data preparation                            Page 2-1
  DATA PREPARATION                                                      5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mDATA[0m [1mPREPARATION[0m

            [1m----------------------------------------------------------------------[0m
            [1mComparison[0m [1mof[0m [1mDLG[0m [1mand[0m [1mIFF[0m

            IFF is a feature  oriented  data  format  -  data  is  separated  into
            features,  and  each  feature  represents  one 'thing' on the map.  An
            integer feature code is used to say what type of thing it is that  the
            feature represents.  A feature might thus be a contour, or a house, or
            a river, depending on the type of map being  digitised,  and  the  way
            that  the data is to be used.  The IFF format also has the capacity to
            hold information on a link and node structure of the points and lines.

            An DLG file contains information about nodes, areas and lines held  in
            data  records, which are similar in concept to single point and linear
            IFF features.  Each data  record  holds  information  about  a  single
            feature  including,  for  lines, its structural links to node and area
            features.

            [1m----------------------------------------------------------------------[0m
            [1mFormat[0m [1mof[0m [1mIFF[0m [1mFiles[0m [1mfor[0m [1mTransfer[0m [1mTo[0m [1mDLG[0m

            A DLG file contains header information, held in  the  initial  logical
            records,  each  one  holding  a specific item of information about the
            data set such as the scale and the map corner coordinates.   The  Data
            Users Guide contains a detailed description of these records.

            In an IFF file, as read by I2DLG, most of the header information  must
            be  held in a predetermined set of attributes (AC entries) attached to
            a feature in layer 0.  The remainder  of  the  header  information  is
            extracted by the program from the Map Descriptor entry of the IFF file
            which must be a complete and version  2  entry.   Details  of  the  AC
            entries used are given below.

            A DLG-3 (standard format) file holds data only  as  nodes,  areas  and
            lines  where  the  node  and  area  data  records  hold  primarily the
            coordinates of the entity and any attributes are  held  in  subsequent
            records.  The coordinate strings of line features are held in a series
            of records following the principle line record.

            The IFF file to be converted to DLG format will hold  the  nodes,areas
            and  lines  as  separately  feature coded features where the nodes and
            areas are unorientated  point  features,  and  the  lines  are  linear
            features.   In  addition  DLG  nodes  will  be generated from junction
            entries in the IFF file  where  the  node  is  not  represented  by  a
            appropriately  feature coded node feature.  There is a fourth category
            of feature allowed in the IFF file  and  that  is  unorientated  point
            features  that  are  not at node locations nor represent areas.  These
            will be converted into DLG format as a 'degenerate line' comprising  a
            node record and a line record of zero length.

            Heights for line features in an IFF file are held as AC's of  type  3.
            These  heights  are  converted  into  DLG as the appropriate elevation
            attribute code for the particular category that a feature is in.   The
            units   which   the  heights  represent  can  be  specified  with  the


  IFFDLG REFERENCE (1.1): DLG data preparation                            Page 2-2
  DATA PREPARATION                                                      5 May 1992


            /HEIGHT_UNITS qualifier and can be either  feet  or  metres.   If  the
            heights  are  an  offset  below a datum then the /DATUM qualifier will
            specify this.  Height values are by default  rounded  to  the  nearest
            integer  when converted, but if the /DECIMAL_HEIGHTS qualifier is used
            then the integer part of the height value will be output along with an
            additional attribute code giving its decimal part rounded to 1 decimal
            place.  The categories which use heights are Hydrography, Hypsography,
            and  Survey  Control.   AC  type 3's in features which belong to other
            categories will be ignored and a warning message issued.

            [1m----------------------------------------------------------------------[0m
            [1mThe[0m [1mAC[0m [1mEntries[0m [1mUsed[0m [1mto[0m [1mHold[0m [1mDLG[0m [1mInformation[0m [1min[0m [1mIFF[0m

            In the IFF file AC entries are used to hold DLG header data,  indicate
            special  area features, hold 'left' and 'right' labels of lines and to
            hold the major and minor DLG codes of features.

            The contents of DLG header record fields, with a few  exceptions,  are
            held  in  Ancillary Code (AC) entries in layer 0 of the IFF file.  The
            AC entries may be held in any kind of feature in layer 0 .

            The program I2DLG always refers to the  ACs  by  the  same  names,  so
            allowing the user to determine which code is used in the AC entries in
            the IFF file, by supplying a  suitable  Feature  Representation  Table
            (FRT)  file.   The  names of the header ACs are encoded in the program
            and must not be altered by the user.  An  example  FRT  ACD  table  is
            given below.

            There are some elements of the DLG header which are not held  in  ACs.
            These  are  the corner points which are read from the IFF Corner Point
            (CP) entry, the map projection parameters and the scale which are read
            from  the  IFF  Map  Descriptor (MD) entry.  The remaining fields, not
            given by the ACs in Table 1 of the FRT, have fixed values  encoded  in
            the program.

            The DLG format requires the first area  entry  to  be  defined  as  an
            outside  area.   This area feature may be identified by an appropriate
            AC with the name 'OUTSIDE AREA' if the user wishes to locate it  at  a
            particular  position.   If no area feature with this AC is supplied in
            the IFF file then a default DLG area record will  be  created  at  the
            position 0,0 with major and minor codes of 0.
            The IFF file must contain at least 1 area feature  as  the  background
            area  identified  by an AC of name 'BACKGROUND AREA'.  The coordinates
            of all background areas will be made 0,0 in the DLG file.

            The DLG format for line records  includes  a  cross_reference  to  the
            areas  to the left and right of it.  I2DLG reads this information from
            ACs of code 4 and 5 in the IFF line features.  These ACs  will  always
            hold  respectively  the  left  and right area references which in this
            case are the FSNs of the area point features.

            The IFF format holds the major and minor codes of the DLG features  as
            AC  entries within node, area, line and point features.  The DLG major
            code is the AC code number and the DLG minor code is held as the value
            of  the  AC.   These ACs are converted directly into the DLG attribute
            code records following the feature records.


  IFFDLG REFERENCE (1.1): DLG data preparation                            Page 2-3
  DATA PREPARATION                                                      5 May 1992


            I2DLG will construct the DLG header record specifying the category  of
            the  data  from  the  name in the ACD table of the first valid AC read
            from the IFF  file.   All  valid  attributes  (major  codes)  for  the
            1:24,000  series  of  quads  are  given in the example FRT ACD Table 2
            below.  Both the code and the names in this table may be  altered  and
            extended to cover the categories of other scales by the user.

            The FRT file will be read by  the  program,  which  then  uses  it  to
            determine the AC codes corresponding to each AC name.  Full details of
            the preparation and use of FRT files can be found  in  the  Laser-Scan
            'FRT User Guide'.

            The default number of AC codes allowed in  an  FRT  file  is  50.   To
            execute I2DLG with more codes (eg the full range of attributes defined
            below and in the example  FRT  file)  the  allowable  number  must  be
            increased.   If this has not been implemented systemwide by the system
            manager, increase the  allowable  number  of  codes  by  entering  the
            following command to the DCL prompt:

            $DEFINE LSL$FRT_ACDMAX 200

            Where a text field is held in an AC of type "C"  (text)  the  text  is
            generally held as "Additional Text".


  IFFDLG REFERENCE (1.1): DLG data preparation                            Page 2-4
  DATA PREPARATION                                                      5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mA[0m [1mTypical[0m [1mFRT[0m [1mFile[0m [1mfor[0m [1muse[0m [1mwith[0m [1mDLG[0m [1mData[0m [1mHeld[0m [1min[0m [1mIFF[0m

            The following is a listing of a typical FRT file which might  be  used
            with  I2DLG and other utilities to prepare and process an IFF file for
            a DLG format magnetic tape file.  This FRT file is  normally  supplied
            with the program.
            LSL$PUBLIC_ROOT:[CONVERT.ACCEPT]DLG_ACD_TABLE.FRT

  ! USGS 24/50 verification plot Feature Representation Table (FRT) 
  ! version 2 PGH 28/1/86

  ! first the FRT itself
  !       FC      GT      Colour  Width   Size    SC      Description
  FRT     0       1       1       0       0       0       Unknown feature type
  FRT     1       7       1       0       0.5     7       areas
  FRT     2       7       2       0       0.5     5       nodes
  FRT     3       1       3       0       0       0       lines
  FRT     4       8       4       0       0.3     6       points (degen. lines)
  FRT     10      7       2       0       2.0     1       corner points
  FRT     11      10      2       0       5       1       text annotation
  FRT     64      1       1       0       0       0       Unknown feature type
  FRT     101     10      1       0       2       1       area annotation
  FRT     102     10      2       0       2       1       node annotation
  FRT     103     10      3       0       2       1       line annotation
  FRT     104     10      4       0       2       1       point annotation
  ! then the SCT which defines symbol components
  !       FC      GT      Colour  Width   Size    SC      Description
  SCT     0       1       0       0       0       0       linear
  SCT     1       1       0       0       0       0       linear
  SCT     2       2       0       0       0       0       clockwise arc
  SCT     3       3       0       0       0       0       anticlockwise arc
  SCT     4       4       0       0       0       0       circumcircle arc
  SCT     5       5       0       0       0       0       full circumcircle
  SCT     6       6       0       0       0       0       interpolated curve

  ! then the group definitions
  !       name       range,range
  !GROUP  CENTRES         66,80,85-102,352-371

  ! then the pattern definitions
  !       Pattern  Major  Minor  Major  Minor  Overall Major  Minor  Major  Minor
  !       Index    UC     UC     Repeat Repeat Size    Size   Size   Width  Width

  PATTERN 5        0      0      0      0      0.9     0.6    0.0    0.     0.
  PATTERN 6        5      0      0      0      1.8     0.6    0.0    0.3    0.
  PATTERN 7        12     0      0      0      2.58    1.8    0.0    0.9    0.
  PATTERN 8        0      0      0      0      2.4     1.44   0.0    0.     0.
  PATTERN 10       0      0      0      0      1.8     1.2    0.0    0.     0.
  PATTERN 12       0      0      0      0      2.76    2.16   0.0    0.     0.
  PATTERN 15       0      0      0      0      2.7     1.8    0.0    0.     0.
  PATTERN 20       1      0      0      0      4.0     3.99   0.0    2.0    0.
  PATTERN 22       0      0      0      0      3.0     2.5    0.0    0.     0.
  PATTERN 25       0      0      0      0      4.5     3.0    0.0    0.     0.
  PATTERN 28       0      5      0      0      5.4     3.6    0.6    3.6    0.3
  PATTERN 30       0      0      0      0      5.4     3.6    0.0    0.     0.


  IFFDLG REFERENCE (1.1): DLG data preparation                            Page 2-5
  DATA PREPARATION                                                      5 May 1992


  PATTERN 32       5      0      0      0      5.4     3.6    0.0    1.8    0.
  PATTERN 80       0      0      0      0      14.4    9.6    0.0    0.     0.
  PATTERN 81       5      0      0      0      5.0     0.6    0.0    0.3    0.0
  PATTERN 82       0      0      0      0      9.0     6.0    0.0    0.0    0.0
  PATTERN 83       0      0      0      0      11.0    6.0    2.0    0.0    0.0
  PATTERN 84       0      0      0      0      6.0     4.0    0.0    0.0    0.0
  PATTERN 85       1      0      0      0      6.0     5.99   0.0    1.5    0.0
                                          
  ! 
  !==============================================================================
  !
  !   A T T R I B U T E   C O D E S
  ! 
  !==============================================================================
  !
  !
  ACD TABLE 0
  ACD I   120     OLD_DLG
  !
  ! 
  !==============================================================================
  !
  !
  ACD TABLE       1               ! Header record contents ( 1:24,000 scale)
  !
  !********************************************************************
  ! DO NOT ALTER THE NAMES IN THIS TABLE AS THEY ARE ENCODED IN I2DLG
  !********************************************************************
  !
  !       Code    Name
  !
  ! A.1 record
  ACD I     1     CARTO_UNIT              ! held in text string (A40)
  ACD I     2     SOURCE_MATER            ! held in text string (A10)
  ACD C     3     DATE_QUAL               ! P, L or I
  ACD I     4     SOURCE_SCALE
  ACD C     5     QUAD_NUMBER
  ACD C     6     CONT_INT_L
  ACD C     8     BATHY_INT_L
  ACD C     9     CONT_INT_S
  ACD C    11     BATHY_INT_S
  ACD C    12     FLAG_A
  ACD C    13     FLAG_B
  ACD C    14     FLAG_C
  ACD C    15     EDGE_FLAG
  ACD C    16     EDGEWS
  ACD C    17     EDGEWR
  ACD C    18     EDGENS
  ACD C    19     EDGENR
  ACD C    20     EDGEES
  ACD C    21     EDGEER
  ACD C    22     EDGESS
  ACD C    23     EDGESR
  ACD I    24     REG_SW_LONG             ! held in text string (A24)
  ACD I    25     REG_SW_LAT              ! held in text string (A24)
  ACD I    26     REG_NW_LONG             ! held in text string (A24)


  IFFDLG REFERENCE (1.1): DLG data preparation                            Page 2-6
  DATA PREPARATION                                                      5 May 1992


  ACD I    27     REG_NW_LAT              ! held in text string (A24)
  ACD I    28     REG_NE_LONG             ! held in text string (A24)
  ACD I    29     REG_NE_LAT              ! held in text string (A24)
  ACD I    30     REG_SE_LONG             ! held in text string (A24)
  ACD I    31     REG_SE_LAT              ! held in text string (A24)
  ACD I    32     PROJ_A_ONE              ! held in text string (A24)
  ACD I    33     PROJ_A_TWO              ! held in text string (A24)
  ACD I    34     PROJ_A_THREE            ! held in text string (A24)
  ACD I    35     PROJ_A_FOUR             ! held in text string (A24)
  !
  ! Special Areas
  !
  ACD I   998     OUTSIDE_AREA
  ACD I   999     BACKGROUND_AREA
  !
  !=======================================================================
  !
  ACD TABLE       2               ! DLG base categories on 1:24,000 scale
  !
  ! The codes and names in this table are user defineable.
  !
  !       Code    Name                    Minimum Maximum Min. Step
  !
  !               01234567890123456789
  ACD I   020     HYPSOGRAPHY             0       614
  ACD I   021     HYPSOGRAPHY_ELEV_A      0       9999
  ACD I   022     HYPSOGRAPHY_ELEV_B      0       9999
  ACD I   023     HYPSOGRAPHY_ELEV_C      0       9999
  ACD I   024     HYPSOGRAPHY_ELEV_D      0       9999
  ACD I   025     HYPSOGRAPHY_ELEV_E      0       9999
  ACD I   026     HYPSOGRAPHY_ELEV_F      0       9999
  ACD I   027     HYPSOGRAPHY_ELEV_G      0       9999
  ACD I   028     HYPSOGRAPHY_ELEV_H      0       9999
  ACD I   029     HYPSOGRAPHY_COINC       0       99
  ACD I   050     HYDROGRAPHY             0       618
  ACD I   051     HYDROGRAPHY_ELEV_FT     0       9999
  ACD I   052     HYDROGRAPHY_ELEV_M      0       9999
  ACD I   053     HYDROGRAPHY_ANGLE       0       999
  ACD I   055     HYDROGRAPHY_RIV_MILE    0       9999
  ACD I   056     HYDROGRAPHY_FT_BELOW    0       9999
  ACD I   057     HYDROGRAPHY_M_BELOW     0       9999
  ACD I   058     HYDROGRAPHY_BEST_EST    0       0
  ACD I   059     HYDROGRAPHY_COINC       0       99
  ACD I   070     SURFACE_COVER           0       201
  ACD I   078     SURFACE_COVER_BEST      0       0
  ACD I   079     SURFACE_COVER_COINC     0       99
  ACD I   080     NON_VEG_SUFACE_COVER    0       300
  ACD I   088     NON_VEG_SUFACE_BEST     0       0
  ACD I   089     NON_VEG_SUFACE_COINC    0       99
  ACD I   090     BOUNDARIES              0       301
  ACD I   091     BOUNDARIES_FIPS_CODE    0       99
  ACD I   092     BOUNDARIES_CNTY_FIPS    0       999
  ACD I   095     BOUNDARIES_MONUMENT     0       9999
  ACD I   099     BOUNDARIES_COINC        0       99
  ACD I   150     SURVEY_CONTROL          0       609
  ACD I   151     SURVEY_CONTROL_A                


  IFFDLG REFERENCE (1.1): DLG data preparation                            Page 2-7
  DATA PREPARATION                                                      5 May 1992


  ACD I   152     SURVEY_CONTROL_B
  ACD I   153     SURVEY_CONTROL_C
  ACD I   154     SURVEY_CONTROL_D
  ACD I   156     SURVEY_CONTROL_E
  ACD I   159     SURVEY_CONTROL_F
  ACD I   170     TRANSPORT_ROAD
  ACD I   171     TRANSPORT_ROAD_A
  ACD I   172     TRANSPORT_ROAD_B
  ACD I   173     TRANSPORT_ROAD_C
  ACD I   174     TRANSPORT_ROAD_D
  ACD I   175     TRANSPORT_ROAD_E
  ACD I   176     TRANSPORT_ROAD_F
  ACD I   177     TRANSPORT_ROAD_G
  ACD I   178     TRANSPORT_ROAD_H
  ACD I   179     TRANSPORT_ROAD_I
  ACD I   180     TRANSPORT_RAIL
  ACD I   181     TRANSPORT_RAIL_A
  ACD I   188     TRANSPORT_RAIL_B
  ACD I   189     TRANSPORT_RAIL_C
  ACD I   190     TRANSPORT_SYSTEMS
  ACD I   193     TRANSPORT_SYSTEMS_A
  ACD I   198     TRANSPORT_SYSTEMS_B
  ACD I   199     TRANSPORT_SYSTEMS_C
  ACD I   200     MANMADE_STRUCTURES
  ACD I   202     MANMADE_STRUCTURES_A
  ACD I   203     MANMADE_STRUCTURES_B
  ACD I   208     MANMADE_STRUCTURES_C
  ACD I   209     MANMADE_STRUCTURES_D
  ACD I   300     US_PLSS
  ACD I   301     US_PLSS_A
  ACD I   302     US_PLSS_B
  ACD I   303     US_PLSS_C
  ACD I   304     US_PLSS_D
  ACD I   305     US_PLSS_E
  ACD I   306     US_PLSS_F
  ACD I   307     US_PLSS_G
  ACD I   308     US_PLSS_H
  ACD I   309     US_PLSS_I
  !



            [1m----------------------------------------------------------------------[0m
            [1mStructuring[0m [1mof[0m [1mIFF[0m [1mFiles[0m [1mfor[0m [1mTransfer[0m [1mTo[0m [1mDLG[0m

            DLG format is a 'structured' format and hence  an  IFF  file  must  be
            fully  structured  into  a consistent link-node structure encompassing
            all the features in the file before attempting to convert from IFF  to
            DLG  formats.   I2DLG  converts  the  data and structure of a junction
            structured and left/right labelled IFF  file  into  a  'standard'  DLG
            format,  (level 3) file, the program does not perform any further data
            structuring as part of the conversion.

            Before structuring the data the user must ensure that the node,  area,
            line  and  point  features  are  correctly  feature  coded,  that  the
            attributes of the features are held in  appropriate  AC  entries  (see


  IFFDLG REFERENCE (1.1): DLG data preparation                            Page 2-8
  DATA PREPARATION                                                      5 May 1992


            above for a description of ACs), that different categories of data are
            in different layers and that a feature in layer 0 has all th  required
            ACs  detailing  the header record contents.  This can be achieved with
            the LITES2 interactive editor - remembering to use the DLG FRT file.

            The IFF file must have a complete type 2 Map Descriptor entry prepared
            with  the IMP utility ITRANS with qualifier /DESCRIPTOR.  The units of
            the coordinates must be in thousandths of an inch, and the  origin  of
            the  data  is  normally  at the centre of the data area defined by the
            corner  points.   This  can  be  achieved  with   the   transformation
            capabilities of the IMP utility ITRANS.

            The IFF file must be prepared for conversion with  programs  from  the
            Laser-Scan  software  packages  STRUCTURE  and  POLYGONS.  The user is
            expected to be familiar with the ILINK and IPOLYGON modules  of  these
            packages.

            It is necessary to label the IFF line features with the Feature Serial
            Numbers  (FSN) of the area features to the left and right of the line.
            This information is held in the ACs of code 4 and 5, and  is  used  to
            cross-reference  the  DLG  lines  to  the  DLG internal identification
            number of the DLG area records to the left and right of the line.  The
            relevant ACs are created in the IFF file by the IPOLYGON module of the
            POLYGONS package.

            For efficient operation of IPOLYGON it may be necessary to  split  the
            data  into  2  IFF  files;  one containing the lines and area features
            (seed points) and another containing the rest of the data.   This  can
            be done using the IMP utilities ISELECT and IMERGE as appropriate.
            It is necessary to structure the data before running  IPOLYGON  so  an
            initial  run  of  ILINK  with  at  least the qualifiers /STRUCTURE and
            /LAYER=0 is required.
            IPOLYGON can then be run with at least the qualifiers:
            /ONEARM=USE - to label both sides of line segments that do not connect
            to any other,
            /SEED=USE:FSN - to label with the FSNs of the seed (area) points,
            /SEGMENT=(LABEL,JUNCTION) - to label the line segments and retain  the
            junction structure.

            After running IPOLYGON to label the line segments the FSNs of the data
            must not be altered.

            All the data can then be merged together again  and  a  final  run  of
            ILINK  with at least the qualifiers /STRUCTURE and /LAYER=0,...  made.
            The data is now in a form suitable for input to I2DLG.














                                     CHAPTER 3

                                   I2DLG UTILITY





  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-1
  UTILITY I2DLG                                                         5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mUTILITY[0m [1mI2DLG[0m

  [1m--------------------------------------------------------------------------------[0m
  [1mFUNCTION[0m

            I2DLG reads an Internal Feature Format (IFF) file, and produces a file
            on  disc  or  magnetic  tape  in  U.S.  Geological Survey Digital Line
            Graph (DLG) format.

  [1m--------------------------------------------------------------------------------[0m
  [1mFORMAT[0m

            $ I2DLG input-file-spec output-file-spec

            [1mCommand[0m [1mqualifiers[0m               [1mDefaults[0m

            /AREA=feature-code(s)              /AREA=1
            /BLOCK_SIZE=block-length          /BLOCK_SIZE=144
            /[NO]BY_LAYER                     /NOBY_LAYER
            /[NO]DATUM                       /NODATUM
            /[NO]DECIMAL_HEIGHTS             /NODECIMAL_HEIGHTS
            /FRT=file-spec                     /FRT=LSL$FRT:DLG.FRT
            /HEIGHT_UNITS=feet/metres        /HEIGHT_UNITS=F
            /LINE=feature-code(s)              /LINE=3
            /[NO]LIST                          /NOLIST
            /[NO]LOG                           /NOLOG
            /NODE=feature-code(s)              /NODE=2
            /POINT=feature-code(s)             /POINT=4
            /[NO]REWIND                        /NOREWIND


  [1m--------------------------------------------------------------------------------[0m
  [1mPROMPT[0m

            _Input-IFF-file:        input-file-spec
            _Output-DLG-file:       output-file-spec

  [1m--------------------------------------------------------------------------------[0m
  [1mPARAMETERS[0m

  input-file-spec

          - This parameter specifies the name of an IFF file, and  is  compulsory.
            The  data written to the output DLG file is read from this file.  Only
            one filename may be specified for each run of the program.
            The default device and extension LSL$IF:.IFJ are applied to the  input
            file specification when it is parsed.

  output-file-spec

          - This parameter specifies the name of a DLG file,  and  is  compulsory.
            The  data  read from the input IFF file is written to this file.  Only
            one filename may be specified for each run of the program.
            If the output file specification does not end with a colon (:)  it  is
            assumed  to  be  a  disc  file,  and  the default device and extension


  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-2
  UTILITY I2DLG                                                         5 May 1992


            HERE:.DLG are applied to the output  file  specification  when  it  is
            parsed.
            If the  output  file  specification  ends  with  a  colon  (:)  it  is
            considered  to be a magnetic tape device name and I2DLG will write the
            data file to a magnetic tape that has been mounted /FOREIGN.

  [1m--------------------------------------------------------------------------------[0m
  [1mCOMMAND[0m [1mQUALIFIERS[0m


  /AREA=integer[,...]

          - This qualifier is used to specify the feature code(s) of the IFF point
            features  which  the  program  is to convert into area features in DLG
            format.
            The default feature code is 1.


  /BLOCK_SIZE=block-length

          - The /BLOCK_SIZE command qualifier specifies the length in bytes of the
            blocks  written to the magnetic tape.  The specified block length must
            be a multiple of 144 and be between 144 and 5760 inclusive.
            The default block length is 144.  This accords  with  the  Data  Users
            Guide  specification of 1 record (144 bytes) per block.  However, mag.
            tape usage and writing speed are improved with a  higher  value.   The
            maximum 5760 bytes will give 40 records per block.
            The qualifier is ignored if given without specifying a  magnetic  tape
            device for output.


  /BY_LAYER
  /NOBY_LAYER (default)

          - When the /BY_LAYER command qualifier is given I2DLG will output a  DLG
            dataset  consisting of nodes, areas and lines in a particular category
            for each layer in the input IFF file.  So a  many  layered  IFF  file,
            after   layer   0,   will  produce  multiple  datasets  (of  different
            categories) after a single set of header records.
            The default action is to ignore any IFF layer structure and  output  a
            single  category  dataset.   In each case layer 0 is used to construct
            the header records.


  /DATUM
  /NODATUM (default)

          - When the /DATUM command qualifier  is  given  I2DLG  will  output  the
            height  value  (AC  3)  for  a given feature with a DLG attribute code
            indicates that the value is a height below a  datum.   For  categories
            which never have datums the the attribute code used is one for heights
            without a datum.
            The default action is to output the height value attribute  codes  for
            heights without a datum.



  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-3
  UTILITY I2DLG                                                         5 May 1992


  /DECIMAL_HEIGHTS
  /NODECIMAL_HEIGHTS (default)

          - When the /DECIMAL_HEIGHTS command qualifier is given I2DLG will output
            the  height  value  (AC  3) for a given feature with an additional DLG
            attribute code which gives a decimal for the  value  so  that  heights
            given as accurate 'reals' can be represented.
            The default action is to not to output  decimal  attribute  codes  for
            heights.


  /FRT=file-spec

          - The /FRT command qualifier specifies a  Feature  Representation  Table
            (FRT) file which the program will read to determine the AC codes given
            in the AC entries, in the IFF file, created to hold header and feature
            attribute  information.  The program I2DLG always refers to the header
            ACs using the same names, but the user may alter the codes, onto which
            these names map, by changing the ACD Table in the FRT file.  The names
            and codes of the feature attribute ACs may  be  altered  by  the  user
            similarly.
            The  default  file  specification  is  LSL$FRT:DLG.FRT.   If  a   file
            specification is given with /FRT, it is parsed against this default.


  /HEIGHT_UNITS=metres/feet

          - The /HEIGHT_UNITS command qualifier specifies the units  that  heights
            will  represent.   The  parameters given can be either F for Feet or M
            for Metres.
            The default units are feet (F).


  /LINE=integer[,...]

          - This qualifier is used to specify the feature code(s)  of  the  linear
            features  which  the  program  is to convert into line features in DLG
            format.
            The default feature code is 3.


  /LIST
  /NOLIST (default)

          - The /LIST qualifier, when present on  the  command  line,  will  cause
            I2DLG to list each record to the user's terminal (SYS$OUTPUT) as it is
            written to the output DLG file.  Two lines of 72 characters  each  are
            written for each record.
            It is primarily a diagnostic aid and should be used with discretion as
            it may generate substantial amounts of output at the terminal.
            When /NOREWIND, the default, is used, the data is written only to  the
            output file.



  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-4
  UTILITY I2DLG                                                         5 May 1992


  /LOG
  /NOLOG (default)

          - The /LOG command qualifier causes I2DLG to write to the users terminal
            (SYS$OUTPUT)  informative  messages  when files are opened, IFF layers
            are read, and indications of the progress of the program.
            The  output  of  these  messages  can  be  suppressed  by  the  /NOLOG
            qualifier.


  /NODE=integer[,...]

          - This qualifier is used to specify the feature code(s) of the IFF point
            features  from  which  the program is to convert into node features in
            DLG format.
            The default feature code is 2.


  /POINT=integer[,...]

          - This qualifier is used to specify the feature code(s) of the IFF point
            features  from which the program is to convert into 'degenerate lines'
            comprising node and line features in DLG format.
            The default feature code is 4.


  /REWIND
  /NOREWIND (default)

          - The /REWIND qualifier, when present on  the  command  line,  specifies
            that  the  magnetic  tape  should  be  rewound, by I2DLG, to the 'BOT'
            position before writing of any DLG file is started.
            [1mNote[0m [1mthat[0m [1mexisting[0m [1mdata[0m [1mon[0m [1mthe[0m [1mtape[0m [1mwill[0m [1mbe[0m [1moverwritten[0m
            When /NOREWIND, the default, is used, the data is written starting  at
            the current position of the tape.


  [1m--------------------------------------------------------------------------------[0m
  [1mRESTRICTIONS[0m

            I2DLG operates with the following restrictions:

             o  I2DLG cannot be used to generate Optional DLG Distribution format.

             o  Features in IFF layer 0 will not be formatted  into  Standard  DLG
                format,  as  these  features  are  reserved  for use as digitising
                control and registration marks.  Only relevant AC entries will  be
                used to generate the header records.

             o  No IFF text entries will be processed.

             o  The /AREA, /LINE, /NODE and /POINT  qualifiers  can  each  take  a
                maximum  of  1024  arguments  (including, of course, burst numeric
                ranges) only.


  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-5
  UTILITY I2DLG                                                         5 May 1992


             o  If writing to magnetic tape the block size must  be  divisible  by
                144, and lie in the range 144 to 5760.



  [1m--------------------------------------------------------------------------------[0m
  [1mDESCRIPTION[0m

            I2DLG is a utility to transfer an Internal Feature Format  (IFF)  disk
            file  to  a 'dataset' in Standard DLG format on magnetic tape or disc.
            A 'dataset' is a single file on the output tape comprising a series of
            header  records  and  data  records  of  nodes,areas,  and lines.  The
            program allows the creation of multiple sets of data records after one
            set  of  header  records  on  one  tape but does not currently support
            datasets spanning more than one tape.   Very  large  files  should  be
            divided  into  smaller files with identical 'header' features in layer
            0, and then transferred to separate tapes.

            Note that only a single map sheet may be transferred during  a  single
            run of the program.

            If the /LOG qualifier  is  used  on  the  command  line,  the  program
            produces  messages  giving  information  about  the  progress  of  the
            program, and any errors or difficulties which may be encountered.

            I2DLG transfers ancillary information from a dummy feature in layer  0
            of  the  input IFF file to the header block or blocks of an DLG format
            tape.  Header information is held in the IFF file in a  number  of  AC
            entries  with  codes  as  defined by the FRT file read by the program.
            The other details of the dummy header feature are ignored by I2DLG.

            I2DLG initially scans the whole IFF file to determine the total number
            of  nodes,  areas  and  lines  (on  a  per category basis if /BY_LAYER
            qualifier is given) and counts point features with FCs given with  the
            /POINT  qualifier  as  a  node and a line.  Category codes are derived
            from the first AC entry ( after layer 0) with a valid code defined  as
            a  category  in  the  ACD  tables  of  the specified FRT file.  If the
            default situation of /NOBY_LAYER applies then all subsequent AC  codes
            must be in the same category ( ie have identical first 4 characters in
            their ACD names).  Where the /BY_LAYER qualifier has been  given  then
            the AC codes must be consistent within each layer.

            The IFF file is then searched for all the Junction Block (JB)  entries
            and  a  node  is  counted  for  each  junction  that  is  not  already
            represented by a node feature.

            I2DLG then reads all the AC entries in layer 0 of  the  IFF  file  and
            extracts  the  relevant  entries  (as  defined in the ACD table of the
            specified FRT file ), to generate the DLG header records.  To complete
            the  header the scale, corner points and map projection parameters are
            extracted from the Map Descriptor  (MD)  and  Corner  Point  (CP)  IFF
            entries.  The header records are then written to the DLG file.

            The IFF file  is  then  searched  for  the  nodes,  areas  and  lines,
            previously identified in the initial scan, which are then written as 3
            groups of data records together with their attribute  information  and


  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-6
  UTILITY I2DLG                                                         5 May 1992


            coordinates.   Also output, for the lines, are the cross-references to
            the start and end  nodes  and  adjacent  areas  which  constitute  the
            structural information.
            This will be repeated for each layer if the  /BY_LAYER  qualifier  has
            been given.

            Details of the structure, content and characteristics of an DLG format
            tape  are  to  be found in the 'Data Format' section of this modules's
            documentation.

            It is essential that the tape is mounted as a foreign  volume  with  a
            write-permit-ring  prior to running I2DLG.  This is achieved using the
            DCL command MOUNT with the /FOREIGN qualifier e.g.
            $ MOUNT MSA0:/FOREIGN.


  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-7
  UTILITY I2DLG                                                         5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mEXAMPLES[0m

            Rewind tape and transfer IFF file to the beginning of the tape

  $
  $ [1malloc[0m [1mmua0:[0m
  %DCL-I-ALLOC, _LSLV3C$MUA0: allocated
  $ [1mmount/foreign[0m [1mmua0:[0m
  %MOUNT-I-MOUNTED,  mounted on _LSLV3C$MUA0:
  $ [1mdefine[0m [1mlsl$frt_acdmax[0m [1m200[0m
  $ [1mi2dlg/log/frt=here:dlgtest/block_size=5760/rewind[0m [1mfrank_s12.ifj[0m [1mmua0:[0m
  %LSLLIB-I-IFFOPENED, LSL$DATA_ROOT:[LSL.IFF]FRANK_S12.IFJ;2 opened for read
  %I2DLG-I-DLGTAPOPN, DLG tape on device _LSLV3C$MUA0: opened for output
  %I2DLG-I-INITSCAN, Scanning IFF file for category totals.
  %I2DLG-I-LAYER, layer 0
  %I2DLG-I-LAYER, layer 1
  %I2DLG-I-JUNCSCAN, Counting junctions.
  %I2DLG-I-HEADOUT, Writing DLG header records.
  %I2DLG-I-JUNCPOS, Finding junction positions.
  %I2DLG-I-NODEOUT, Writing DLG node records.
  %I2DLG-I-AREAOUT, Writing DLG area records.
  %I2DLG-I-LINEOUT, Writing DLG line records.
   ELAPSED:    0 00:00:26.47  CPU: 0:00:13.13  BUFIO: 21  DIRIO: 176  FAULTS: 259 


            Transfer IFF file to a disc file and list at terminal.

  $
  $ [1malloc[0m [1mmua0:[0m
  %DCL-I-ALLOC, _LSLV3C$MUA0: allocated
  $ [1mmount/foreign[0m [1mmua0:[0m
  %MOUNT-I-MOUNTED,  mounted on _LSLV3C$MUA0:
  $ [1mdefine[0m [1mlsl$frt_acdmax[0m [1m200[0m
  $ [1mi2dlg/log/frt=here:dlgtest/list[0m [1mfrank_s12[0m [1mtestfile[0m
  %LSLLIB-I-IFFOPENED, LSL$DATA_ROOT:[LSL.IFF]FRANK_S12.IFJ;2 opened for read
  %I2DLG-I-DLGOPNOUT, DLG file HERE:TESTFILE.DLG;0 opened for output
  %I2DLG-I-INITSCAN, Scanning IFF file for category totals.
  %I2DLG-I-LAYER, layer 0
  %I2DLG-I-LAYER, layer 1
  %I2DLG-I-JUNCSCAN, Counting junctions.
  %I2DLG-I-HEADOUT, Writing DLG header records.
  laserscan                                frank_s12 p   24000   1        
                                           10  ,100  2   ,5   abcdefghijkl
       3     1     0       0.000000000000000       0.000000000000000      
   0.000000000000000       0.000000000000000       0.000000000000000      
         0.000000000000000       0.000000000000000       0.000000000000000
         0.000000000000000       0.000000000000000       0.000000000000000
         0.000000000000000       0.000000000000000       0.000000000000000
         0.000000000000000     2       0.000000000000000     0     4      
                                                                          
                                                                          
                                                                          
                                                                          
                                                                          
                               0                                          


  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-8
  UTILITY I2DLG                                                         5 May 1992


  SW     0     0NW     0    38NE    38    38SE    38     0                
                                                                          
       1                                                                  
                                                                          
  SURVEY_CONTROL          12    12     4     4    14    14                
                                                                          
  %I2DLG-I-JUNCPOS, Finding junction positions.
  %I2DLG-I-NODEOUT, Writing DLG node records.
  N      1    33    16     4     0                                        
                                                                          
     150   300   150   301   150   302   150   303                        
                                                                          
  N      2    33    33     1     0                                        
                                                                          
     150   100                                                            
                                                                          
  N      3    19    21     0     0                                        
                                                                          
  N      4     0    38     0     0                                        
                                                                          
  N      5    38    38     0     0                                        
                                                                          
  N      6    38     0     0     0                                        
                                                                          
  N      7     4     9     0     0                                        
                                                                          
  N      8    19     0     0     0                                        
                                                                          
  N      9     0    23     0     0                                        
                                                                          
  N     10    19    10     0     0                                        
                                                                          
  N     11    11    14     0     0                                        
                                                                          
  N     12    12     5     0     0                                        
                                                                          
  %I2DLG-I-AREAOUT, Writing DLG area records.
  A      1     0     0     1     0                                        
                                                                          
       0     0                                                            
                                                                          
  A      2     9    11     0     0                                        
                                                                          
  A      3    12    28     0     0                                        
                                                                          
  A      4    29    17     0     0                                        
                                                                          
  A      5     4     4    14     0                                        
                                                                          
     150   300   151  1234   151    10   151    20   151    30   151    40
     151    50   151    60   151    70   151    80   151    90   151   100
     151   110   151   120                                                
                                                                          
  %I2DLG-I-LINEOUT, Writing DLG line records.
  L      1     4     5     1     3     2     0     0                      
                                                                          


  IFFDLG REFERENCE (1.1): I2DLG utility                                   Page 3-9
  UTILITY I2DLG                                                         5 May 1992


       0    38    38    38                                                
                                                                          
  L      2     5     6     1     4     2     0     0                      
                                                                          
      38    38    38     0                                                

     ...
     ...
     ...
                                                                          
  L     14     2     2     0     0     2     1     0                      
                                                                          
      33    33    33    33                                                
                                                                          
     150   100                                                            
                                                                          
   ELAPSED:    0 00:00:29.69  CPU: 0:00:13.54  BUFIO: 146  DIRIO: 189  FAULTS: 273 



  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-10
  MESSAGES (SUCCESS)                                                    5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(SUCCESS)[0m

  These messages are used to indicate that the program has succeeded in performing
  some action, and do not require any user action.

  NORMAL, Normal, successful completion

      [1mExplanation:[0m  I2DLG has finished its  operations  successfully  and  without
      problems.

      [1mUser[0m [1maction:[0m  None.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-11
  MESSAGES (INFORMATIONAL)                                              5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(INFORMATIONAL)[0m

  These messages give information only, and require no  immediate  action  by  the
  user.  They are used to provide information on the current state of the program,
  or to supply explanatory information in support of a warning or error message.

  AREAOUT, Writing DLG area records.

      [1mExplanation:[0m  The area records for the DLG file are being written out.

      [1mUser[0m [1maction:[0m  None.

  AUTONOD, 'integer' nodes generated from junctions.

      [1mExplanation:[0m  The number of nodes generated from junctions.

      [1mUser[0m [1maction:[0m  None.

  DLGOPNOUT, DLG file 'file-spec' opened for output

      [1mExplanation:[0m  The file specified has been opened for writing the DLG file to

      [1mUser[0m [1maction:[0m  None.

  DLGTAPOPN, DLG tape on device 'file-spec' opened for output

      [1mExplanation:[0m  The magnetic tape device specified has been opened for writing
      the DLG file to

      [1mUser[0m [1maction:[0m  None.

  HEADOUT, Writing DLG header records.

      [1mExplanation:[0m  The header records for the DLG file are being written out.

      [1mUser[0m [1maction:[0m  None.

  INITSCAN, Scanning IFF file for category totals.

      [1mExplanation:[0m  The IFF file is being read  and  totals  for  nodes,areas  and
      lines generated.

      [1mUser[0m [1maction:[0m  None.

  JUNCPOS, Finding junction positions.

      [1mExplanation:[0m  The IFF file Junction Block entries are being  read  and  node
      locations for the current category saved.

      [1mUser[0m [1maction:[0m  None.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-12
  MESSAGES (INFORMATIONAL)                                              5 May 1992


  JUNCSCAN, Counting junctions.

      [1mExplanation:[0m  The IFF file Junction Block entries are being  read  and  node
      locations counted.

      [1mUser[0m [1maction:[0m  None.

  LAYER, layer 'integer'

      [1mExplanation:[0m  The start of the specified layer has been  found  in  the  IFF
      file

      [1mUser[0m [1maction:[0m  None.

  LINEOUT, Writing DLG line records.

      [1mExplanation:[0m  The line records for the DLG file are being written out.

      [1mUser[0m [1maction:[0m  None.

  NODEOUT, Writing DLG node records.

      [1mExplanation:[0m  The node records for the DLG file are being written out.

      [1mUser[0m [1maction:[0m  None.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-13
  MESSAGES (WARNING)                                                    5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(WARNING)[0m

  These messages are output when an error  has  occurred  that  can  be  corrected
  immediately by the user or that the program will attempt to overcome.

  HADOUT, Duplicate outside area feature - ignored

      [1mExplanation:[0m  Subsequent area features defining an outside area are ignored.

      [1mUser[0m [1maction:[0m  If the area feature is required then edit the  IFF  file  with
      LITES2 or IPATCH and rerun I2DLG

  HEINOTREQ, Category 'category' does not require heights (FSN 'fsn')

      [1mExplanation:[0m  A feature with an AC 3 (height) is in a  category  which  does
      not use heights.

      [1mUser[0m [1maction:[0m  Check that the feature is in the appropriate category

  INVALACNOD, Inconsistent AC value 'integer' ignored

      [1mExplanation:[0m  An Ancillary Code entry of a node feature has  been  found  in
      the  IFF file with a value that is incompatible with a DLG node record.  The
      attribute is ignored.

      [1mUser[0m [1maction:[0m  If the attribute is required  then  edit  the  IFF  file  with
      LITES2 or IPATCH and rerun I2DLG

  INVALACPT, Inconsistent AC value 'integer' ignored

      [1mExplanation:[0m  An Ancillary Code entry of a point feature has been  found  in
      the IFF file with a value that is incompatible with a DLG point record.  The
      attribute is ignored.

      [1mUser[0m [1maction:[0m  If the attribute is required  then  edit  the  IFF  file  with
      LITES2 or IPATCH and rerun I2DLG

  NOTALINE, 'line' feature (FSN:'fsn') ignored - not a line

      [1mExplanation:[0m  The feature has a specified line feature code but is not  held
      as a line in the IFF file so is not output to the DLG file.

      [1mUser[0m [1maction:[0m  Examine feature in IFF file with IPATCH or LITES2 and  correct
      as necessary.

  NOTASYMBA, area feature (FSN:'fsn') ignored - not a symbol

      [1mExplanation:[0m  The feature has a specified area feature code but is not  held
      as a symbol in the IFF file so is not output to the DLG file.

      [1mUser[0m [1maction:[0m  Examine feature in IFF file with IPATCH or LITES2 and  correct
      as necessary.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-14
  MESSAGES (WARNING)                                                    5 May 1992


  NOTASYMBN, node feature (FSN:'fsn') ignored - not a symbol

      [1mExplanation:[0m  The feature has a specified node feature code but is not  held
      as a symbol in the IFF file so is not output to the DLG file.

      [1mUser[0m [1maction:[0m  Examine feature in IFF file with IPATCH or LITES2 and  correct
      as necessary.

  NOTASYMBP, point feature (FSN:'fsn') ignored - not a symbol

      [1mExplanation:[0m  The feature has a specified point feature code but is not held
      as a symbol in the IFF file so is not output to the DLG file.

      [1mUser[0m [1maction:[0m  Examine feature in IFF file with IPATCH or LITES2 and  correct
      as necessary.

  TOOAC, Attribute limit exceeded - AC 'integer' 'integer' ignored

      [1mExplanation:[0m  The limit of 24 attributes for a feature  has  been  exceeded.
      Subsequent attributes will be ignored.

      [1mUser[0m [1maction:[0m  If the attribute is required  then  edit  the  IFF  file  with
      LITES2 or IPATCH and rerun I2DLG

  UNK0ACNAM, AC name 'name' is not a valid DLG record type A field.

      [1mExplanation:[0m  The name of the AC type read from the ACD  table  in  the  FRT
      file  does  not correspond to any of the valid field names as defined within
      I2DLG for the record type A.  The entry will be ignored

      [1mUser[0m [1maction:[0m  Check the contents of the ACD table in the specified FRT file.

  UNKATYP, invalid AC type 'integer' ignored

      [1mExplanation:[0m  An unknown AC entry  has  been  found  in  the  IFF  file  and
      ignored.

      [1mUser[0m [1maction:[0m  If the attribute is required check that the correct  FRT  file
      is being used or amend IFF file using LITES2 or IPATCH and rerun I2DLG.

  UNKDTYP, unknown AC data type in an AC type 'integer' entry

      [1mExplanation:[0m  Entry will be ignored

      [1mUser[0m [1maction:[0m  None.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-15
  MESSAGES (ERROR)                                                      5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(ERROR)[0m

  These messages indicate an error in processing which will cause the  program  to
  terminate.   The  most  likely  causes  are a corrupt or otherwise invalid input
  file, or an error related to command line processing and file manipulation.

  BADACD, error initialising ACD table in FRT file 'file-spec'

      [1mExplanation:[0m  I2DLG has not been able to correctly read the ACD table in the
      specified FRT file.

      [1mUser[0m [1maction:[0m  Check the contents of the ACD tables of the FRT file

  BADDEV, error enquiring about device 'name'

      [1mExplanation:[0m  The specified device is not available.  The associated  system
      error messages should give further information.

      [1mUser[0m [1maction:[0m  Rerun I2DLG with amended qualifiers.

  BADFEAT, error processing feature 'fsn' ('isn')

      [1mExplanation:[0m  An error - usually with the AC entries - has been  encountered
      while  processing  the  feature.   The  associated  error messages will give
      further information.

      [1mUser[0m [1maction:[0m  Investigate the cause of the error using IPATCH or LITES2  and
      rerun I2DLG on the data.

  BADFRT, error initialising FRT file 'file-spec'

      [1mExplanation:[0m  I2DLG has not been able to open the specified FRT  file.   The
      associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check the spelling of the FRT file-spec and that the  required
      FRT is available in the directory LSL$FRT:

  BADLEFTFSN, Invalid or missing lefthand AC label in feature FSN 'integer'

      [1mExplanation:[0m  An AC entry  of  type  4  has  an  invalid  or  missing  label
      containing the FSN of the area feature to the left of the line.

      [1mUser[0m [1maction:[0m  Enter a correct value using IPATCH, LITES2 or IPOLYGON.

  BADRIGHTFSN, Invalid or missing righthand AC label in feature FSN 'integer'

      [1mExplanation:[0m  An AC entry  of  type  5  has  an  invalid  or  missing  label
      containing the FSN of the area feature to the right of the line.

      [1mUser[0m [1maction:[0m  Enter a correct value using IPATCH, LITES2 or IPOLYGON.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-16
  MESSAGES (ERROR)                                                      5 May 1992


  BADUNT, Map Descriptor has wrong units - must be Thousandths

      [1mExplanation:[0m  The data must be in thousandths of an inch ( Codes 103 or 104)
      in order to be translated into DLG format.

      [1mUser[0m [1maction:[0m  Amend Map Descriptor and/or data using ITRANS and rerun I2DLG.

  ERROPNDLG, error opening DLG disc file 'filename' .

      [1mExplanation:[0m  I2DLG was unable to correctly open a disc file for DLG data.

      [1mUser[0m  [1maction:[0m   Subsequent  system  error   messages   will   give   further
      information.

  ERROROUT, error outputting a record

      [1mExplanation:[0m  I2DLG was unable to correctly output a record to the magtape.

      [1mUser[0m [1maction:[0m  Report possible program problem to Laser-Scan.

  EXPNUM, number of digits ('integer') is too large for output field

      [1mExplanation:[0m  The value of an AC entry exceeds its DLG defined size.

      [1mUser[0m [1maction:[0m  Check ACD table is correct.

  FORDEV, device 'name' not mounted foreign

      [1mExplanation:[0m  The magtape has not been mounted with the /FOREIGN qualifier.

      [1mUser[0m [1maction:[0m  Issue the correct mount command and rerun I2DLG.

  INTMAX, value 'integer' exceeds defined limits for AC 'integer'.

      [1mExplanation:[0m  The integer value in the AC  entry  lies  outside  the  limits
      defined in the FRT table.

      [1mUser[0m [1maction:[0m  Check that the FRT table has the  correct  limits  defined  or
      amend the IFF file using LITES2 or IPATCH.

  INVALBLK, invalid blocksize 'integer' - valid range 144 to 5760

      [1mExplanation:[0m  An invalid argument was given to the /BLOCKSIZE qualifier, the
      value  must  be  in  the  range 144 to 5760 (bytes) and a multiple of 144 (1
      record)

      [1mUser[0m [1maction:[0m  Reenter the command line with a correct value.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-17
  MESSAGES (ERROR)                                                      5 May 1992


  INVALFCA, 'integer' is an invalid argument to /AREA qualifier - value must lie
      in range 0 - 32767

      [1mExplanation:[0m  The feature  code  value  given  in  the  /AREA  qualifier  is
      incorrect.

      [1mUser[0m [1maction:[0m  Reenter the command line with a correct value.

  INVALFCL, 'integer' is an invalid argument to /LINE qualifier - value must lie
      in range 0 - 32767

      [1mExplanation:[0m  The feature  code  value  given  in  the  /LINE  qualifier  is
      incorrect.

      [1mUser[0m [1maction:[0m  Reenter the command line with a correct value.

  INVALFCN, 'integer' is an invalid argument to /NODE qualifier - value must lie
      in range 0 - 32767

      [1mExplanation:[0m  The feature  code  value  given  in  the  /NODE  qualifier  is
      incorrect.

      [1mUser[0m [1maction:[0m  Reenter the command line with a correct value.

  INVALFCP, 'integer' is an invalid argument to /POINT qualifier - value must lie
      in range 0 - 32767

      [1mExplanation:[0m  The feature code  value  given  in  the  /POINT  qualifier  is
      incorrect.

      [1mUser[0m [1maction:[0m  Reenter the command line with a correct value.

  INVALMAJAC, Inconsistent AC type 'integer' ignored in feature FSN 'integer'

      [1mExplanation:[0m  An Ancillary Code entry of a feature has been found in the IFF
      file  of  a  type that is incompatible with the specified DLG category.  The
      attribute is ignored.

      [1mUser[0m [1maction:[0m  If the attribute is required  then  edit  the  IFF  file  with
      LITES2 or IPATCH and rerun I2DLG

  LASTBLK, error completing last data block

      [1mExplanation:[0m  I2DLG is unable to complete the last  block  of  data  on  the
      magtape.

      [1mUser[0m [1maction:[0m  Report possible program problem to Laser-Scan.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-18
  MESSAGES (ERROR)                                                      5 May 1992


  MTBLK, error writing magnetic tape block

      [1mExplanation:[0m  The program has been unable to write a block to  the  magtape.
      The associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check correct mechanical operation of the tapedeck  and  rerun
      I2DLG.

  MTOPEN, error initialising tape unit 'name'

      [1mExplanation:[0m  The program has been unable to initialise  the  magtape.   The
      associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check tape has been physically loaded  correctly  and  mounted
      /FOREIGN.

  MTORWD, error rewinding tape unit 'name'

      [1mExplanation:[0m  The program has  been  unable  to  rewind  the  magtape.   The
      associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check tape has been physically loaded  correctly  and  mounted
      /FOREIGN.

  NOACHD, No header information found in layer 0.

      [1mExplanation:[0m  The IFF file must  have  the  header  infomation  held  as  AC
      entries in layer 0.

      [1mUser[0m [1maction:[0m  Update the IFF file using LITES and rerun ILINK and  I2DLG  on
      this data.

  NOAREAS, left and rght areas not known for line feature (FSN 'integer')

      [1mExplanation:[0m  I2DLG is unable to determine the left and right areas for this
      line feature.

      [1mUser[0m [1maction:[0m  Check consistency of junction structure and AC entries 4 and 5
      in the IFF file using IPATCH and rerun I2DLG.

  NOCOORDS, no coordinates found for a feature (FSN 'integer')

      [1mExplanation:[0m  I2DLG is unable to read any coordinates from the IFF file.

      [1mUser[0m [1maction:[0m  Amend the IFF file using IPATCH and rerun I2DLG.

  NOJUNCTN, no junction found from junction pointer in line feature (FSN
      'integer')

      [1mExplanation:[0m  I2DLG is unable to correlate a stored junction  position  with
      the information in the junction pointer entry in a line feature.

      [1mUser[0m [1maction:[0m  Check consistency of junction structure in the IFF file  using
      IPATCH and rerun I2DLG.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-19
  MESSAGES (ERROR)                                                      5 May 1992


  NOMD, IFF type 2 map descriptor not found

      [1mExplanation:[0m  The IFF file must have a type 2 map descriptor entry.

      [1mUser[0m [1maction:[0m  Update the IFF file using ITRANS and rerun I2DLG on this data.

  NONODES, start and end nodes not known for line feature (FSN 'integer')

      [1mExplanation:[0m  I2DLG is unable to determine the start and end nodes for  this
      line feature.

      [1mUser[0m [1maction:[0m  Check consistency of junction structure in the IFF file  using
      IPATCH and rerun I2DLG.

  NOOUT, no area feature found defining the outside area.

      [1mExplanation:[0m  I2DLG did not find an area  feature  with  an  appropriate  AC
      entry that indicated it was an outside area.

      [1mUser[0m [1maction:[0m  Create an area feature with a suitable AC  entry  in  the  IFF
      file  LITES and rerun ILINK and I2DLG.  Also check that the correct FRT file
      is used.

  NOTMULTREC, invalid blocksize 'integer' - not a multiple of 144.

      [1mExplanation:[0m  An invalid argument was given to the /BLOCKSIZE qualifier, the
      value must be a whole multiple of 144 and in the range 144 to 5760 (bytes)

      [1mUser[0m [1maction:[0m  Reenter the command line with a correct value.

  RELMAX, value 'real' exceeds defined limits for AC 'integer' - output may be
      incorrect

      [1mExplanation:[0m  The real value in the AC entry lies outside the limits defined
      in the FRT table.

      [1mUser[0m [1maction:[0m  Check that the FRT table has the  correct  limits  defined  or
      amend the IFF file using LITES2 or IPATCH.

  TOOPTS, more than 3000 points found in feature (FSN 'integer')

      [1mExplanation:[0m  the DLG format is limited to 3000 coordinate pairs per line.

      [1mUser[0m [1maction:[0m  Amend the IFF file and rerun I2DLG.

  UNEXPEOF, unexpected end of IFF file

      [1mExplanation:[0m  The IFF file has an incorrect structure or missing entries.

      [1mUser[0m [1maction:[0m  Amend the IFF file using IPATCH and rerun I2DLG.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-20
  MESSAGES (ERROR)                                                      5 May 1992


  UNEXPEOFL, unexpected end of IFF file when locating start of a line

      [1mExplanation:[0m  The IFF file has an incorrect structure or missing entries.

      [1mUser[0m [1maction:[0m  Amend the IFF file using IPATCH and rerun I2DLG.

  UNKDEV, unknown device 'name'

      [1mExplanation:[0m  The specified device is  not  known.   The  associated  system
      error messages should give further information.

      [1mUser[0m [1maction:[0m  Rerun I2DLG with amended qualifiers.

  UNSETMD2, IFF type 2 map descriptor is unset

      [1mExplanation:[0m  The IFF file must have a type 2 map descriptor entry.

      [1mUser[0m [1maction:[0m  Update the IFF file using ITRANS and rerun I2DLG on this data.


  IFFDLG REFERENCE (1.1): I2DLG utility                                  Page 3-21
  MESSAGES (OTHER)                                                      5 May 1992


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(OTHER)[0m

  In addition to the above messages which are generated  by  the  program  itself,
  other  messages  may  be  produced  by the command line interpreter (CLI) and by
  Laser-Scan libraries.  In particular, messages  may  be  generated  by  the  IFF
  library  and  by  the  Laser-Scan I/O library, LSLLIB.  IFF library messages are
  introduced by '%IFF' and are documented in the IFF  library  users'  guide.   In
  most  cases  IFF  errors will be due to a corrupt input file, and this should be
  the first area of investigation.  If the cause of the error cannot be traced  by
  the user, and Laser-Scan are consulted, then the output file should be preserved
  to facilitate diagnosis.  LSLLIB messages are introduced by  '%LSLLIB'  and  are
  generally  self-explanatory.   They  are  used to explain the details of program
  generated errors.
