
















                                  [3mLaser-Scan Ltd.[0m


                                  [3mCONVERT PACKAGE[0m

                                  [3mIFFMGD Reference[0m


                              [3mIssue 1.0 - 17-June-1991[0m































  Copyright (C) 1991 Laser-Scan Ltd
  Science Park, Milton Road, Cambridge, England CB4 4FY  tel: (01223) 420414

  Document "IFFMGD REFERENCE", Category "REFERENCE"
  Document Issue 1.0      S Townrow (modified 17-Jun-1991)


  IFFMGD REFERENCE (1.0)
  Contents                                                  17 June 1991


                                     CONTENTS

                  IFFMGD - Change Record . . . . . . . . . . . . . . . i

                  PREFACE  . . . . . . . . . . . . . . . . . . . . . . 1
                    Intended audience  . . . . . . . . . . . . . . . . 1
                    Structure of this document . . . . . . . . . . . . 1
                    Conventions used in this document  . . . . . . . . 2


  CHAPTER 1       MGD FORMAT DESCRIPTION

                  FORMAT DESCRIPTION . . . . . . . . . . . . . . . . 1-1
                    Introduction . . . . . . . . . . . . . . . . . . 1-1
                    Magnetic tape output . . . . . . . . . . . . . . 1-1


  CHAPTER 2       MGD DATA PREPARATION

                  DATA PREPARATION . . . . . . . . . . . . . . . . . 2-1
                    Comparison of MGD77 and IFF  . . . . . . . . . . 2-1
                    Format of IFF Files for Transfer To and From 
                    MGD77  . . . . . . . . . . . . . . . . . . . . . 2-1
                    The AC Entries Used to Hold MGD77 Information in 
                    IFF  . . . . . . . . . . . . . . . . . . . . . . 2-2
                    A Typical FRT File for use with MGD77 Data Held 
                    in IFF . . . . . . . . . . . . . . . . . . . .  2-11


  CHAPTER 3       I2MGD UTILITY

                  UTILITY I2MGD  . . . . . . . . . . . . . . . . . . 3-1
                    FUNCTION . . . . . . . . . . . . . . . . . . . . 3-1
                    FORMAT . . . . . . . . . . . . . . . . . . . . . 3-1
                    PROMPT . . . . . . . . . . . . . . . . . . . . . 3-1
                    PARAMETERS . . . . . . . . . . . . . . . . . . . 3-1
                    COMMAND QUALIFIERS . . . . . . . . . . . . . . . 3-1
                    RESTRICTIONS . . . . . . . . . . . . . . . . . . 3-2
                    DESCRIPTION  . . . . . . . . . . . . . . . . . . 3-3
                    EXAMPLES . . . . . . . . . . . . . . . . . . . . 3-5
                    MESSAGES (SUCCESS) . . . . . . . . . . . . . . . 3-7
                    MESSAGES (INFORMATIONAL) . . . . . . . . . . . . 3-8
                    MESSAGES (WARNING) . . . . . . . . . . . . . . . 3-9
                    MESSAGES (ERROR) . . . . . . . . . . . . . . .  3-11
                    MESSAGES (OTHER) . . . . . . . . . . . . . . .  3-14


  CHAPTER 4       MGD2I UTILITY

                  UTILITY MGD2I  . . . . . . . . . . . . . . . . . . 4-1
                    FUNCTION . . . . . . . . . . . . . . . . . . . . 4-1
                    FORMAT . . . . . . . . . . . . . . . . . . . . . 4-1
                    PROMPT . . . . . . . . . . . . . . . . . . . . . 4-1
                    PARAMETERS . . . . . . . . . . . . . . . . . . . 4-1
                    COMMAND QUALIFIERS . . . . . . . . . . . . . . . 4-1
                    RESTRICTIONS . . . . . . . . . . . . . . . . . . 4-3


  IFFMGD REFERENCE (1.0)
  Contents                                                  17 June 1991


                    DESCRIPTION  . . . . . . . . . . . . . . . . . . 4-3
                    EXAMPLES . . . . . . . . . . . . . . . . . . . . 4-5
                    MESSAGES (SUCCESS) . . . . . . . . . . . . . . . 4-7
                    MESSAGES (WARNING) . . . . . . . . . . . . . . . 4-8
                    MESSAGES (ERROR) . . . . . . . . . . . . . . .  4-11
                    MESSAGES (OTHER) . . . . . . . . . . . . . . .  4-13


  IFFMGD REFERENCE (1.0)                                                    Page i
  Change record                                                       17 June 1991


  [1m-------------------------------------------------------------------------------[0m
  [1mIFFMGD -[0m [1mChange Record[0m


  [1m-------------------------------------------------------------------------------[0m

  [1mVersion[0m [1m1.0   S[0m [1mTownrow  17-June-1991[0m

            Module IFFMGD     - Reorganised package documentation.

  [1m-------------------------------------------------------------------------------[0m

  [1mVersion[0m [1m1.0   S[0m [1mTownrow  2-September-1991[0m

            Module IFFMGD     - New line added to  documentation  which  describes
                                translation  of  null  values  from IFF to MGD and
                                vice-versa.

  [1m-------------------------------------------------------------------------------[0m


  IFFMGD REFERENCE (1.0)                                                    Page 1
  PREFACE                                                             17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mPREFACE[0m



  [1m--------------------------------------------------------------------------------[0m
  [1mIntended[0m [1maudience[0m

            This manual is intended  for  users  of  a  specific  utility  of  the
            Laser-Scan CONVERT package running under the VAX/VMS operating system.
            Each manual  contains  the  documentation  for  a  particular  CONVERT
            utility  and a site will only receive new or updated documentation for
            those utilities which they have purchased.

  [1m--------------------------------------------------------------------------------[0m
  [1mStructure[0m [1mof[0m [1mthis[0m [1mdocument[0m

            This document is composed of 2 major sections.

            The Introduction is  an  overview  of  the  CONVERT  package  and  its
            purpose.

            There then follow the User Guides for  the  individual  modules  which
            comprise  CONVERT.   Each  individual  module  contains the same basic
            categories of information.  These are:

            MODULE              - the name of the CONVERT module.

            FORMAT DESCRIPTION  - a description of the data format written or
                                  read by the utility programs in this conversion
                                  module.

            DATA PREPARATION    - guidance on how to digitise or prepare the IFF
                                  and other data required by the utility programs
                                  in this module.

            For each utility program  in  the  module,  there  will  then  be  the
            following categories:

            UTILITY             - the name of the utility.

            FUNCTION            - a synopsis of what the utility does.

            FORMAT              - a summary of the utility command format
                                  and command qualifiers. Default qualifier
                                  settings are indicated.

            PROMPT              - how it prompts the user.

            PARAMETERS          - description of expected command parameters.

            COMMAND QUALIFIERS  - description of all command qualifiers.
                                  Qualifiers are ordered alphabetically and 
                                  default argument values are indicated.

            RESTRICTIONS        - a summary of restrictions on the use of 


  IFFMGD REFERENCE (1.0)                                                    Page 2
  PREFACE                                                             17 June 1991


                                  qualifiers

            DESCRIPTION         - the definitive description of the utility 
                                  action.

            COMMANDS            - for interactive utilities only, a description 
                                  of all commands. Commands are ordered 
                                  alphabetically and default argument values are 
                                  indicated. 

            EXAMPLES            - annotated examples of utility useage.

            MESSAGES            - all classes of message are listed and described
                                  and suggested user action given. The messages
                                  are divided into sections according to message
                                  severity within which the messages are ordered
                                  alphabetically by message mnemonic.

  [1m--------------------------------------------------------------------------------[0m
  [1mConventions[0m [1mused[0m [1min[0m [1mthis[0m [1mdocument[0m


            ----------------------------------------------------------------------
            Convention            Meaning
            ----------------------------------------------------------------------
            <CR>                  The user should press the carriage control key
                                  on the terminal

            <CTRL/x>              The phrase <CTRL/x> indicates that the user must
                                  press the key labelled CTRL while simultaneously
                                  pressing another key, for example, <CTRL/Z>.

            $ [1mIFF2SIF<CR>[0m         Command examples show all user entered commands
                                  in [1mbold[0m type.

            $ [1mIFF2SIF<CR>[0m         Vertical series of periods, or ellipsis, mean
                    .             either that not all the data that CONVERT would
                    .             display in response to the particular command is
                    .             shown or that not all the data that the user
                                  would enter is shown.

            file-spec...          Horizontal elipsis indicates that additional
                                  parameters, values or information can be
                                  entered.

            [logical-name]        Square brackets indicate that the enclosed item
                                  is optional. (Square brackets are not, however,
                                  optional in the syntax of a directory name in
                                  a file-specification, or in the syntax of a
                                  substring specification in a VMS assisnment
                                  statement).
            ----------------------------------------------------------------------


  IFFMGD REFERENCE (1.0)                                                    Page 3
  PREFACE                                                             17 June 1991


            ----------------------------------------------------------------------
            Convention            Meaning
            ----------------------------------------------------------------------
            'integer'             An integer number is expected in the specified
                                  input or output field. (See "Command line data
                                  types" below).

            'real'                A real number is expected in the specified input
                                  or output field. (See "Command line data types"
                                  below).

            'file-spec'           A VMS file specification is expected in the
                                  specified input or output field.

            'device-name'         A VMS device specification (for instance, MTA0:)
                                  is expected in the specified input or output
                                  field.
            ----------------------------------------------------------------------















                                     CHAPTER 1

                               MGD FORMAT DESCRIPTION





  IFFMGD REFERENCE (1.0): MGD format description                          Page 1-1
  FORMAT DESCRIPTION                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mFORMAT[0m [1mDESCRIPTION[0m

            [1m----------------------------------------------------------------------[0m
            [1mIntroduction[0m

            The program I2MGD provides a translation  from  Laser-Scan's  Internal
            Feature  Format  (IFF)  to the Marine Geophysical Data Exchange Format
            (MGD77).  MGD2I provides a translation from MGD77 to IFF.  For a brief
            comparison  of  the  way IFF and MGD77 regard data, see the section on
            'Data Preparation' below.

            The programs read and produce the MGD77 ASCII format, as described  in
            the  document  [1mThe[0m  [1mMarine[0m  [1mGeophysical[0m [1mData[0m [1mExchange[0m [1mFormat[0m [1m-[0m [1m'MGD77'[0m
            [1m(Bathymetry,[0m [1mMagnetics[0m [1mand[0m [1mGravity)[0m  of  September  1977,  revised  in
            December  1981,  (U.S.   Department  of Commerce, National Oceanic and
            Atmospheric Administration, National Geophysical and Solar-Terrestrial
            Data Center).

            [1m----------------------------------------------------------------------[0m
            [1mMagnetic[0m [1mtape[0m [1moutput[0m

            The programs read from and write to magnetic tape in MGD77  format  in
            ASCII code, in blocks (physical records) of 1920 bytes.  The output is
            normally at 1600 bpi, PE, on 9 track tape.

            If necessary, the last block of each file is padded  with  appropriate
            null   or   'unspecified'   characters   as  decribed  in  the  format
            specification.   Each  file  is  separated  from  the  previous  by  a
            tapemark, and there are two tapemarks after the last file on a tape.

            If an MGD77 format file spans more than one tape, then the contents of
            the  separate tapes must be treated as separate files for the purposes
            of transfer to and from IFF.   This  is  possible  because  each  tape
            carries  a  duplicate of the file header information.  Large IFF files
            must be demerged and merged using IMP utility IMERGE, as  appropriate,
            before  and  after  transfer to and from MGD77 format files which span
            multiple tapes.














                                     CHAPTER 2

                                MGD DATA PREPARATION





  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-1
  DATA PREPARATION                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mDATA[0m [1mPREPARATION[0m

            [1m----------------------------------------------------------------------[0m
            [1mComparison[0m [1mof[0m [1mMGD77[0m [1mand[0m [1mIFF[0m

            IFF is a feature  oriented  data  format  -  data  is  separated  into
            features,  and  each  feature  represents  one 'thing' on the map.  An
            integer feature code is used to say what type of thing it is that  the
            feature represents.  A feature might thus be a contour, or a house, or
            a river, depending on the type of map being  digitised,  and  the  way
            that the data is to be used.

            An MGD77 file contains information  about  bathymetric,  magnetic  and
            gravitational  observations held in data records, which are similar in
            concept  to  single  point  IFF  features.   Each  data  record  holds
            information  about  a  single set of observations made at one position
            and time.  All these data records are thus  of  the  same  type,  with
            fields  relating  to  all  three of the possible types of observation.
            Since this information is frequently collected  during  some  sort  of
            surveying  journey, the data records are often ordered chronologically
            on the tape.

            [1m----------------------------------------------------------------------[0m
            [1mFormat[0m [1mof[0m [1mIFF[0m [1mFiles[0m [1mfor[0m [1mTransfer[0m [1mTo[0m [1mand[0m [1mFrom[0m [1mMGD77[0m

            An MGD77 file contains header information, held in one or more  header
            blocks,  and  logical data records, each one holding information about
            the bathymetric, magnetic and gravitational observations made  at  one
            position and time.

            In an IFF file, as created by MGD2I or to be read by I2MGD, the header
            information  and  logical  data  records  are  held  in features.  The
            contents of the header blocks are held in a single feature in layer  0
            of  the  IFF  file.   The contents of the each logical data record are
            held in separate features in layer 1 (or greater)  of  the  IFF  file.
            The user may specify the feature code to be used.

            Every feature, whether it corresponds  to  the  MGD77  header  or  the
            logical data records, contains a single-point ZS (3D string) entry and
            a number of Ancillary Code (AC) entries.  In the case of  the  logical
            data  records,  the ZS entry will hold the longitude (in degrees), the
            latitude  (in  degrees)  and  corrected  depth  (in  metres)  of   the
            observation.   For  the  header  feature,  the  ZS  entry contains any
            suitable dummy set of  coordinates;  for  example  the  longitude  and
            latitude of the first data record feature, and a corrected depth of 0.
            The AC entries are used to hold the remaining fields of the header and
            data records.

            An IFF file with this structure derived from MGD77 data  may  be  used
            directly  for  input  to  digital  terrain  model  generation software
            (DTMCREATE package) or all the information in the AC entries  examined
            and manipulated in the LITES2 editor.


  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-2
  DATA PREPARATION                                                    17 June 1991


            [1m----------------------------------------------------------------------[0m
            [1mThe[0m [1mAC[0m [1mEntries[0m [1mUsed[0m [1mto[0m [1mHold[0m [1mMGD77[0m [1mInformation[0m [1min[0m [1mIFF[0m

            The contents  of  MGD77  header  and  data  record  fields,  with  the
            exception  of longitude and latitude , are held in Ancillary Code (AC)
            entries when they are transferred to IFF files.  The  corrected  depth
            is also held in the ZS entry as well as in an AC entry.

            The programs I2MGD and MGD2I always refer  to  the  ACs  by  the  same
            names,  so allowing the user to determine which code is used in the AC
            entries  in  the  IFF  file,   by   supplying   a   suitable   Feature
            Representation  Table  (FRT)  file.   The FRT file will be read by the
            programs, which then use it to determine the AC codes corresponding to
            each  AC  name.   Full details of the preparation and use of FRT files
            can be found in the Laser-Scan 'FRT User Guide'.

            The default number of AC codes allowed in  an  FRT  file  is  50.   To
            execute  I2MGD  and  MGD2I  with  more  codes  (eg  the  full range of
            attributes defined below and inthe example  FRT  file)  the  allowable
            number must be increased.  If this has not been implemented systemwide
            by the system manager, increase  the  allowable  number  of  codes  by
            entering the following commnad to the DCL prompt:

            $DEFINE LSL$FRT_ACDMAX 200

            Some fields, for example those  containing  sequence  numbers  in  the
            header  blocks,  are  not  transferred  to  the IFF file because their
            contents are invariant or because they are  made  superfluous  by  the
            nature or structure of an IFF file.

            The AC entries for fields the contents of which are unspecified should
            be omitted or, for unsigned quantities, filled with '9's.

            Where a text field is held in an AC of type "C"  (text)  the  text  is
            held as "Additional Text".

            The fields of the MGD77 header are listed below, with  the  names  and
            types  of  the  AC entries in which they are held in an equivalent IFF
            file:


            [1mCruise[0m [1mIdentifier[0m
            AC Name :  M_Cruise_ID
            AC Type :  Text, 8 characters.


            [1mFormat[0m [1mAcronym[0m
            AC Name :  M_Format_acronym
            AC Type :  Text, 5 characters, always 'MGD77'.


            [1mData[0m [1mCentre[0m [1mFile[0m [1mNumber[0m
            AC Name :  M_Data_centre_no
            AC Type :  Integer, between 0 and 99999999.


  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-3
  DATA PREPARATION                                                    17 June 1991


            [1mNumber[0m [1mof[0m [1mType[0m [1m1[0m [1mHeaders[0m
            AC Name :  M_Type_one_headers
            AC Type :  Integer, between 1 and 4.


            [1mNumber[0m [1mof[0m [1mType[0m [1m2[0m [1mHeaders[0m
            AC Name :  M_Type_two_headers
            AC Type :  Integer, should be 0 on MGD77 format tape files.


            [1mNumber[0m [1mof[0m [1mData[0m [1mParameters[0m
            AC Name :  M_Data_Parameters
            AC Type :  Integer, should be 29.


            [1mParameters[0m [1mSurveyed[0m [1mCode[0m [1m-[0m [1mbathymetry[0m
            AC Name :  M_Survey_Code_bathy
            AC Type :  Integer, should be 0, 1, 3 or 5.


            [1mParameters[0m [1mSurveyed[0m [1mCode[0m [1m-[0m [1mmagnetics[0m
            AC Name :  M_Survey_Code_mag
            AC Type :  Integer, should be 0, 1, 3 or 5.


            [1mParameters[0m [1mSurveyed[0m [1mCode[0m [1m-[0m [1mgravity[0m
            AC Name :  M_Survey_code_grav
            AC Type :  Integer, should be 0, 1, 3 or 5.


            [1mParameter[0m [1mSurveyed[0m [1mCode[0m [1m-[0m [1mhigh-resolution[0m [1mseismics[0m
            AC Name :  M_Survey_code_H_res
            AC Type :  Integer, should be 0, 1, 3 or 5.


            [1mParameter[0m [1mSurveyed[0m [1mCode[0m [1m-[0m [1mdeep[0m [1mpenetration[0m [1mseismics[0m
            AC Name :  M_Survey_code_D_pen
            AC Type :  Integer, should be 0, 1, 3 or 5.


            [1mFile[0m [1mCreation[0m [1mDate[0m
            AC Name :  M_File_Creation
            AC Type :  Integer, date in format YYMMDD.


            [1mContributing[0m [1mInstitution[0m
            AC Name :  M_Contributing_inst
            AC Type :  Text, 41 characters.


            [1mCountry[0m
            AC Name :  M_Country
            AC Type :  Text, 18 characters.


  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-4
  DATA PREPARATION                                                    17 June 1991


            [1mPlatform[0m [1mName[0m
            AC Name :  M_Platform_Name
            AC Type :  Text, 21 characters.


            [1mPlatform[0m [1mType[0m [1mCode[0m
            AC Name :  M_Platform_type_code
            AC Type :  Integer, between 0 and 9.


            [1mPlatform[0m [1mType[0m
            AC Name :  M_Platform_type
            AC Type :  Text, 6 characters.


            [1mChief[0m [1mScientist(s)[0m
            AC Name :  M_Chief_scientist
            AC Type :  Text, 32 characters.


            [1mProject,[0m [1mCruise[0m [1mand[0m [1mLeg[0m
            AC Name :  M_Project_cruise_leg
            AC Type :  Text, 58 characters.


            [1mFunding[0m
            AC Name :  M_Funding
            AC Type :  Text, 20 characters.


            [1mSurvey[0m [1mDeparture[0m [1mDate[0m
            AC Name :  M_Survey_departure
            AC Type :  Integer, date in format YYMMDD.


            [1mPort[0m [1mof[0m [1mDeparture[0m
            AC Name :  M_Port_of_departure
            AC Type :  Text, 34 characters.


            [1mSurvey[0m [1mArrival[0m [1mDate[0m
            AC Name :  M_Survey_arrival
            AC Type :  Integer, date in format YYMMDD.


            [1mPort[0m [1mof[0m [1mArrival[0m
            AC Name :  M_Port_of_arrival
            AC Type :  Text, 32 characters.


            [1mNavigation[0m [1mInstrumentation[0m
            AC Name :  M_Navigation_instr
            AC Type :  Text, 40 characters.


  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-5
  DATA PREPARATION                                                    17 June 1991


            [1mPosition[0m [1mDetermination[0m [1mMethod[0m
            AC Name :  M_Pos_determ_method
            AC Type :  Text, 38 characters.


            [1mBathymetry[0m [1mInstrumentation[0m
            AC Name :  M_Bathy_instr
            AC Type :  Text, 40 characters.


            [1mAdditional[0m [1mForms[0m [1mof[0m [1mBathymetry[0m [1mData[0m
            AC Name :  M_Add_bathy_data
            AC Type :  Text, 38 characters.


            [1mMagnetics[0m [1minstrumentation[0m
            AC Name :  M_Magnetics_instr
            AC Type :  Text, 40 characters.


            [1mAdditional[0m [1mForms[0m [1mof[0m [1mMagnetic[0m [1mData[0m
            AC Name :  M_Add_mag_data
            AC Type :  Text, 38 characters.


            [1mGravity[0m [1mInstrumentation[0m
            AC Name :  M_Gravity_instr
            AC Type :  Text, 40 characters.


            [1mAdditional[0m [1mForms[0m [1mof[0m [1mGravity[0m [1mData[0m
            AC Name :  M_Add_gravity_data
            AC Type :  Text, 38 characters.


            [1mSeismic[0m [1mInstrumentation[0m
            AC Name :  M_Seismic_instr
            AC Type :  Text, 40 characters.


            [1mFormats[0m [1mof[0m [1mSeismic[0m [1mData[0m
            AC Name :  M_Form_seismic_data
            AC Type :  Text, 38 characters.


            [1mGeneral[0m [1mDigitising[0m [1mRate[0m [1mof[0m [1mBathymetry[0m
            AC Name :  M_Dig_rate_bathy
            AC Type :  Real, between 0.0 and 99.9, accurate to 1 decimal place.


            [1mGeneral[0m [1mSampling[0m [1mRate[0m [1mof[0m [1mBathymetry[0m
            AC Name :  M_Samp_rate_bathy
            AC Type :  Text, 12 characters.


  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-6
  DATA PREPARATION                                                    17 June 1991


            [1mAssumed[0m [1mSound[0m [1mVelocity[0m
            AC Name :  M_Assumed_sound_vel
            AC Type :  Real, between 0.0 and 9999.9, accurate to 1 decimal place.


            [1mBathymetry[0m [1mDatum[0m [1mCode[0m
            AC Name :  M_Bathy_datum_code
            AC Type :  Integer, between 00 and 99.


            [1mInterpolation[0m [1mScheme[0m
            AC Name :  M_Interpolation
            AC Type :  Text, 56 characters.


            [1mGeneral[0m [1mRate[0m [1mof[0m [1mDigitising[0m [1mMagnetics[0m
            AC Name :  M_Dig_rate_mag
            AC Type :  Real, between 0.0 and 99.9, accurate to 1 decimal place.


            [1mGeneral[0m [1mSampling[0m [1mRate[0m [1mof[0m [1mMagnetics[0m
            AC Name :  M_Samp_rate_mag
            AC Type :  Integer, between 0 and 99.


            [1mMagnetic[0m [1mSensor[0m [1mTow[0m [1mDistance[0m
            AC Name :  M_Mag_sensor_towdist
            AC Type :  Integer, between 0 and 9999.


            [1mSensor[0m [1mDepth[0m
            AC Name :  M_Mag_sensor_depth
            AC Type :  Real, between 0.0 and 9999.9, accurate to 1 decimal place.


            [1mHorizontal[0m [1mSensor[0m [1mSeparation[0m
            AC Name :  M_Mag_hor_sensor_sep
            AC Type :  Integer, between 0 and 999.


            [1mReference[0m [1mField[0m [1mCode[0m
            AC Name :  M_Mag_ref_field_code
            AC Type :  Integer, between 0 and 99.


            [1mReference[0m [1mField[0m
            AC Name :  M_Reference_Field
            AC Type :  Text, 12 characters.


            [1mMethod[0m [1mof[0m [1mApplying[0m [1mResidual[0m [1mField[0m
            AC Name :  M_M_O_A_residual
            AC Type :  Text, 47 characters.


  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-7
  DATA PREPARATION                                                    17 June 1991


            [1mGeneral[0m [1mDigitising[0m [1mRate[0m [1mof[0m [1mGravity[0m
            AC Name :  M_Dig_rate_gravity
            AC Type :  Real, between 0.0 and 99.9, accurate to 1 decimal place.


            [1mGeneral[0m [1mSampling[0m [1mRate[0m [1mof[0m [1mGravity[0m
            AC Name :  M_Samp_rate_gravity
            AC Type :  Integer, between 0 and 99.


            [1mTheoretical[0m [1mGravity[0m [1mFormula[0m [1mCode[0m
            AC Name :  M_Gravity_form_code
            AC Type :  Integer, between 1 and 9.


            [1mTheoretical[0m [1mGravity[0m [1mFormula[0m
            AC Name :  M_Gravity_formula
            AC Type :  Text, 17 characters.


            [1mReference[0m [1mSystem[0m [1mCode[0m
            AC Name :  M_Ref_system_code
            AC Type :  Integer, between 1 and 9.


            [1mReference[0m [1mSystem[0m
            AC Name :  M_Reference_system
            AC Type :  Text, 16 characters.


            [1mCorrections[0m [1mApplied[0m
            AC Name :  M_Correction_applied
            AC Type :  Text, 38 characters.


            [1mDeparture[0m [1mBase[0m [1mStation[0m [1mGravity[0m
            AC Name :  M_Dep_base_stn_grav
            AC Type :  Real, between 0.0  and  999999.9,  accurate  to  1  decimal
            place.


            [1mDeparture[0m [1mBase[0m [1mStation[0m [1mDescription[0m
            AC Name :  M_Dep_base_stn_descr
            AC Type :  Text, 33 characters.


            [1mArrival[0m [1mBase[0m [1mStation[0m [1mGravity[0m
            AC Name :  M_Arr_base_stn_grav
            AC Type :  Real, between 0.0  and  999999.9,  accurate  to  1  decimal
            place.


            [1mArrival[0m [1mBase[0m [1mStation[0m [1mDescription[0m
            AC Name :  M_Dep_base_stn_descr
            AC Type :  Text, 31 characters.


  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-8
  DATA PREPARATION                                                    17 June 1991


            [1m10-Degree[0m [1mIdentifiers[0m
            AC Name :  M_Ten_degree_ident
            AC Type :  Integer, between 0 and 9999.


            [1mAdditional[0m [1mDocumentation[0m
            AC Name :  M_Additional_doc
            AC Type :  Text, 78 characters.



            The fields of the MGD77 logical data records are  listed  below,  with
            the  names  and  types  of the AC entries in which they are held in an
            equivalent IFF file:


            [1mCruise[0m [1mIdentifier[0m
            AC Name :  M_Data_cruise_ident
            AC Type :  Text, 8 characters.


            [1mTime[0m [1mZone[0m [1mCorrection[0m [1m(including[0m [1msign)[0m
            AC Name :  M_Data_time_zone_cor
            AC Type :  Real, between -13 and +12, accurate to 2 decimal places.


            [1mYear,[0m [1mMonth[0m [1mand[0m [1mDay[0m
            AC Name :  M_Data_date
            AC Type :  Integer, date in format YYMMDD.


            [1mTime[0m [1m-[0m [1mHours[0m
            AC Name :  M_Data_time_hours
            AC Type :  Integer, between 0 and 23.


            [1mTime[0m [1m-[0m [1mMinutes[0m
            AC Name :  M_Data_time_mins
            AC Type :  Real, between 0.0 and 59.999, accurate to 3 decimal places.


            [1mBathymetry,[0m [1mTraveltime[0m
            AC Name :  M_Data_bathy_travel
            AC Type :  Real, between  0.0  and  99.9999,  accurate  to  4  decimal
            places.


            [1mBathymetry,[0m [1mCorrected[0m [1mDepth[0m
            AC Name :  M_Data_bathy_correct
            AC Type :  Real, between 0.0 and 99999.9, accurate to 1 decimal place.


            [1mBathymetry[0m [1mCorrection[0m [1mCode[0m
            AC Name :  M_Data_bathy_co_code
            AC Type :  Integer, between 1 and 99.


  IFFMGD REFERENCE (1.0): MGD data preparation                            Page 2-9
  DATA PREPARATION                                                    17 June 1991


            [1mBathymetry[0m [1mType[0m [1mCode[0m
            AC Name :  M_Data_bathy_ty_code
            AC Type :  Integer, between 1 and 9.


            [1mMagnetics[0m [1mTotal[0m [1mField,[0m [1m1st[0m [1mSensor[0m
            AC Name :  M_Data_mag_total_one
            AC Type :  Real, between 0.0 and 99999.9, accurate to 1 decimal place.


            [1mMagnetics[0m [1mTotal[0m [1mField,[0m [1m2nd[0m [1mSensor[0m
            AC Name :  M_Data_mag_total_two
            AC Type :  Real, between 0.0 and 99999.9, accurate to 1 decimal place.


            [1mMagnetics[0m [1mResidual[0m [1mField[0m [1m(including[0m [1msign)[0m
            AC Name :  M_Data_mag_residual
            AC Type :  Real, between +/- 9999.9, accurate to 1 decimal place.


            [1mSensor[0m [1mUsed[0m [1mfor[0m [1mResidual[0m [1mField[0m
            AC Name :  M_Data_sens_residual
            AC Type :  Integer, between 1 and 9.


            [1mMagnetics[0m [1mDiurnal[0m [1mCorrection[0m [1m(including[0m [1msign)[0m
            AC Name :  M_Data_mag_diurn_cor
            AC Type :  Real, between +/- 999.9, accurate to 1 decimal place.


            [1mDepth[0m [1mor[0m [1mAltitude[0m [1mof[0m [1mLead[0m [1mMagnetic[0m [1mSensor[0m [1m(including[0m [1msign)[0m
            AC Name :  M_Data_alt_mag_sens
            AC Type :  Integer, between +/- 99999.


            [1mObserved[0m [1mGravity[0m
            AC Name :  M_Data_obs_gravity
            AC Type :  Real, between 0.0  and  999999.9,  accurate  to  1  decimal
            place.


            [1mEOTVOS[0m [1mCorrection[0m [1m(including[0m [1msign)[0m
            AC Name :  M_Data_EOTVOS_corr
            AC Type :  Real, between +/- 9999.9, accurate to 1 decimal place.


            [1mFree-Air[0m [1mAnomaly[0m [1m(including[0m [1msign)[0m
            AC Name :  M_Data_free_air_anom
            AC Type :  Real, between +/- 999.9, accurate to 1 decimal place.


            [1mSeismic[0m [1mShot-Point[0m [1mIdentification[0m
            AC Name :  M_Data_seismic_ident
            AC Type :  Text, 8 characters.


  IFFMGD REFERENCE (1.0): MGD data preparation                           Page 2-10
  DATA PREPARATION                                                    17 June 1991


            [1mQuality[0m [1mCode[0m [1mfor[0m [1mGravity[0m
            AC Name :  M_Data_Qcode_gravity
            AC Type :  Integer, between 0 and 9.


            [1mQuality[0m [1mCode[0m [1mfor[0m [1mMagnetics[0m
            AC Name :  M_Data_Qcode_magnet
            AC Type :  Integer, between 0 and 9.


            [1mQuality[0m [1mCode[0m [1mfor[0m [1mBathymetry[0m
            AC Name :  M_Data_Qcode_bathy
            AC Type :  Integer, between 0 and 9.


            [1mQuality[0m [1mCode[0m [1mfor[0m [1mNavigation[0m
            AC Name :  M_Data_Qcode_navigat
            AC Type :  Integer, between 5 and 9.


  IFFMGD REFERENCE (1.0): MGD data preparation                           Page 2-11
  DATA PREPARATION                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mA[0m [1mTypical[0m [1mFRT[0m [1mFile[0m [1mfor[0m [1muse[0m [1mwith[0m [1mMGD77[0m [1mData[0m [1mHeld[0m [1min[0m [1mIFF[0m

  The following is a listing of a typical FRT file which might be used with MGD2I,
  I2MGD  and  other  utilities  to  prepare  and process an IFF file from an MGD77
  format magnetic tape file.  This FRT file is normally supplied  with  MGD2I  and
  I2MGD for acceptance testing as the file:
  LSL$PUBLIC_ROOT:[CONVERT.ACCEPT]MGD77_ACD_TABLE.FRT

  !
  ! FRT Table for the conversion to and from IFF, and the display in IFF,
  ! of data in 'The Marine Geophysical Data Exchange Format' (MGD77).
  !
  ! Created: F J Brown                            26-July-1988
  !
  ! Copyright: Laser-Scan Ltd.,Cambridge, CB4 4FY, ENGLAND
  !
  !
  ! Attribute codes:
  ! ================
  !
  !
  ACD TABLE       3
  !
  ! Header record codes
  ! ===================
  !
  !   Type Code   Name                    Minimum Maximum Minimum   Additional
  !                                        value   value   step      text length
  !
  ACD C   1       M_Cruise_ID                                     ! 8 chars
  ACD C   2       M_Format_acronym                                ! 5 chars(MGD77)
  ACD I   3       M_Data_Centre_no        0       99999999 1
  ACD I   4       M_Type_one_headers      1       4       1
  ACD I   5       M_Type_two_headers      0       0
  ACD I   6       M_Data_Parameters       29      29
  ACD I   7       M_Survey_code_bathy     0       5       1 
  ACD I   8       M_Survey_code_mag       0       5       1
  ACD I   9       M_Survey_code_grav      0       5       1
  ACD I   10      M_Survey_code_H_res     0       5       1
  ACD I   11      M_Survey_code_D_pen     0       5       1
  ACD I   12      M_File_creation         10101   999999
  ACD C   13      M_Contributing_inst.                            ! 41 chars 
  ACD C   14      M_Country                                       ! 18 chars 
  ACD C   15      M_Platform_name                                 ! 21 chars 
  ACD I   16      M_Platform_type_code    0       9       1
  ACD C   17      M_Platform_type                                 ! 6 chars
  ACD C   18      M_Chief_scientist                               ! 32 chars
  ACD C   19      M_Project_cruise_leg                            ! 58 chars
  ACD C   20      M_Funding                                       ! 20 chars
  ACD I   21      M_Survey_departure      10101   999999
  ACD C   22      M_Port_of_departure                             ! 34 chars
  ACD I   23      M_Survey_arrival        10101   999999
  ACD C   24      M_Port_of_arrival                               ! 32 chars
  ACD C   25      M_Navigation_instr                              ! 40 chars
  ACD C   26      M_Pos_determ_method                             ! 38 chars


  IFFMGD REFERENCE (1.0): MGD data preparation                           Page 2-12
  DATA PREPARATION                                                    17 June 1991


  ACD C   27      M_Bathy_instr                                   ! 40 chars
  ACD C   28      M_Add_bathy_data                                ! 38 chars
  ACD C   29      M_Magnetics_instr                               ! 40 chars
  ACD C   30      M_Add_mag_data                                  ! 38 chars
  ACD C   31      M_Gravity_instr                                 ! 40 chars
  ACD C   32      M_Add_gravity_data                              ! 38 chars
  ACD C   33      M_Seismic_instr                                 ! 40 chars
  ACD C   34      M_Form_seismic_data                             ! 38 chars
  ACD R   35      M_Dig_rate_bathy        0.0     99.9    0.1        
  ACD C   36      M_Samp_rate_bathy                               ! 12 chars
  ACD R   37      M_Assumed_sound_vel     0.0     9999.9  0.1
  ACD I   38      M_Bathy_datum_code      0       99      1
  ACD C   39      M_Interpolation                                 ! 56 chars
  ACD R   40      M_Dig_rate_mag          0.0     99.9    0.1
  ACD I   41      M_Samp_rate_mag         0       99      1
  ACD I   42      M_Mag_sensor_towdist    0       9999    1
  ACD R   43      M_Mag_sensor_depth      0.0     9999.9  0.1
  ACD I   44      M_Mag_hor_sensor_sep    0       999     1
  ACD I   45      M_Mag_ref_field_code    0       99      1
  ACD C   46      M_Reference_field                               ! 12 chars
  ACD C   47      M_M_O_A_residual                                ! 47 chars
  ACD R   48      M_Dig_rate_gravity      0.0     99.9    0.1
  ACD I   49      M_Samp_rate_gravity     0       99      1
  ACD I   50      M_Gravity_form_code     1       9       1
  ACD C   51      M_Gravity_formula                               ! 17 chars
  ACD I   52      M_Ref_system_code       1       9       1
  ACD C   53      M_Reference_system                              ! 16 chars
  ACD C   54      M_Correction_applied                            ! 38 chars
  ACD R   55      M_Dep_base_stn_grav     0.0     999999.9 0.1
  ACD C   56      M_Dep_base_stn_descr                            ! 33 chars
  ACD R   57      M_Arr_base_stn_grav     0.0     999999.9 0.1
  ACD C   58      M_Arr_base_stn_descr                            ! 31 chars
  ACD I   59      M_Ten_degree_ident      0       9999    1
  ACD C   60      M_Additional_doc                                ! 78 chars
  !
  ! Data record codes
  ! =================
  !
  !   Type Code   Name                    Minimum Maximum Minimum   Additional
  !                                        value   value   step      text length
  !
  ACD C   101     M_Data_cruise_ident                             ! 8 chars
  ACD R   102     M_Data_time_zone_cor    -13.0   99.9    0.01
  ACD I   103     M_Data_date             10101   999999
  ACD I   104     M_Data_time_hours       0       99
  ACD R   105     M_Data_time_mins        0.0     99.999
  ACD I   106     M_Data_pos_type_code    1       9       1
  ACD R   107     M_Data_bathy_travel     0.0     99.9999 0.0001
  ACD R   108     M_Data_bathy_correct    0.0     99999.9 0.1
  ACD I   109     M_Data_bathy_co_code    1       99      1
  ACD I   110     M_Data_bathy_ty_code    1       9       1
  ACD R   111     M_Data_mag_total_one    0.0     99999.9 0.1
  ACD R   112     M_Data_mag_total_two    0.0     99999.9 0.1
  ACD R   113     M_Data_mag_residual     -9999.9 9999.9  0.1
  ACD I   114     M_Data_sens_residual    1       9       1
  ACD R   115     M_Data_mag_diurn_cor    -999.9  999.9   0.1


  IFFMGD REFERENCE (1.0): MGD data preparation                           Page 2-13
  DATA PREPARATION                                                    17 June 1991


  ACD I   116     M_Data_alt_mag_sens     -99999  99999   1
  ACD R   117     M_Data_obs_gravity      0.0     999999.9 0.1
  ACD R   118     M_Data_EOTVOS_corr      -9999.9 9999.9  0.1
  ACD R   119     M_Data_free_air_anom    -999.9  999.9   0.1
  ACD C   120     M_Data_seismic_ident                            ! 8 chars
  ACD I   121     M_Data_Qcode_gravity    0       9       1
  ACD I   122     M_Data_Qcode_magnet     0       9       1
  ACD I   123     M_Data_Qcode_bathy      0       9       1
  ACD I   124     M_Data_Qcode_navigat    5       9       1
  !
















                                     CHAPTER 3

                                   I2MGD UTILITY





  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-1
  UTILITY I2MGD                                                       17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mUTILITY[0m [1mI2MGD[0m

  [1m--------------------------------------------------------------------------------[0m
  [1mFUNCTION[0m

            I2MGD reads an Internal Feature Format (IFF) file, and produces a file
            on magnetic tape in Marine Geophysical Data (MGD77) exchange format.

  [1m--------------------------------------------------------------------------------[0m
  [1mFORMAT[0m

            $ I2MGD output-file-spec

            [1mCommand[0m [1mqualifiers[0m               [1mDefaults[0m

            /DEVICE=magtape-drive            /DEVICE=MSA0:
            /[NO]DIAGNOSTICS                 /NODIAGNOSTICS
            /FC=feature-code                 /FC=10
            /FRT=file-spec                   /FRT=LSL$FRT:MGD77_ACD_TABLE.FRT
            /[NO]REWIND                      /NOREWIND


  [1m--------------------------------------------------------------------------------[0m
  [1mPROMPT[0m

            _Input-IFF-file:        input-file-spec

  [1m--------------------------------------------------------------------------------[0m
  [1mPARAMETERS[0m

  input-file-spec

          - This parameter specifies the name of an IFF file, and  is  compulsory.
            The  data written to the output tape is read from this file.  Only one
            filename may be specified for each run of the program.
            The default device and extension LSL$IF:.IFF are applied to the output
            file specification when it is parsed.

  [1m--------------------------------------------------------------------------------[0m
  [1mCOMMAND[0m [1mQUALIFIERS[0m

  /DEVICE=magtape-drive

          - The /DEVICE command qualifier specifies the magnetic  tape  device  on
            which the output tape is to be written.
            The default device name is MSA0:.



  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-2
  UTILITY I2MGD                                                       17 June 1991


  /DIAGNOSTICS
  /NODIAGNOSTICS (default)

          - When /DIAGNOSTICS is present, the I2MGD utility will output diagnostic
            messages  as  it  processes  the  input  tape.  These messages include
            information about each block  of  data  written  to  the  tape.   This
            qualifier should be used only when strictly necessary as large amounts
            of terminal output can be generated.


  /FC=feature-code

          - This qualifier is used to specify the Feature Code  (FC)  of  all  the
            features  from  which  the program is to extract the details to create
            the output magtape file.  That is, the dummy feature used to hold  the
            header  information Ancillary Code (AC) entries, and the features used
            to hold the coordinates and  attribute  data  for  each  logical  data
            record on the tape.
            The default feature code is 10.


  /FRT=file-spec

          - The /FRT command qualifier specifies a  Feature  Representation  Table
            (FRT) file which the program will read to determine the AC codes given
            to the AC entries, in the IFF file, created to hold header and feature
            attribute  information.   The program I2MGD always refers to these ACs
            using the same names, but the user may alter  the  codes,  onto  which
            these names map, by changing the FRT file.
            The default file specification is LSL$FRT:MGD77_ACD_TABLE.FRT.   If  a
            file  specification  is  given  with  /FRT,  it is parsed against this
            default.


  /REWIND
  /NOREWIND (default)

          - The /REWIND qualifier, when present on  the  command  line,  specifies
            that  the  magnetic  tape  should  be  rewound, by I2MGD, to the 'BOT'
            position before writing of any sheet is started.
            [1mNote[0m [1mthat[0m [1mexisting[0m [1mdata[0m [1mon[0m [1mthe[0m [1mtape[0m [1mwill[0m [1mbe[0m [1moverwritten[0m
            When /NOREWIND, the default, is used, the  data  is  appended  to  any
            existing  datasets  on  the tape.  The tape is rewound to BOT and then
            searched for the EOV mark.  When found the tape is positioned  between
            the  two  tapemarks  and the new data written from there.  The tape is
            terminated with a new EOV after the data.

  [1m--------------------------------------------------------------------------------[0m
  [1mRESTRICTIONS[0m

            None


  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-3
  UTILITY I2MGD                                                       17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mDESCRIPTION[0m

            I2MGD is a utility to transfer an Internal Feature Format  (IFF)  disk
            file to a 'map sheet' on an MGD77 format magnetic tape.  A 'map sheet'
            is a single file or dataset on the output tape.   The  program  allows
            the  creation  of multiple datasets on one tape but does not currently
            support datasets spanning more than one tape.  Very large files should
            be  divided  into  smaller  files  with identical 'header' features in
            layer 0, and then transferred to separate tapes.

            Note that only a single map sheet may be transferred during  a  single
            run of the program.

            If the /DIAGNOSTICS qualifier is used on the command line, the program
            produces messages giving information about the blocks being written to
            the tape, and any errors or difficulties which may be encountered.

            I2MGD transfers information from a dummy feature in  layer  0  of  the
            input  IFF file to the header block or blocks of an MGD77 format tape.
            The dumy feature is taken to be the first feature  with  the  required
            feature   code   (FC)(default  is  10)  read  from  layer  0.   Header
            information is held in the IFF file in a number  of  AC  entries  with
            codes  as  defined  by  the  FRT  file read by the program.  The dummy
            header feature has the coordinates of the local origin of the IFF file
            and these are ignored by I2MGD.

            I2MGD translates each IFF feature record, with the  specified  FC,  in
            the  input  file into a MGD77 logical data record .  The data features
            can be contained in any layers from layer 1 onwards of  the  IFF  file
            and  are  ordered as in the IFF file.  The X, Y and Z coordinates of a
            ZS entry are transfered  to  the  longitude,  latitude  and  corrected
            depth,  respectively, of a data record.  If the Z coordinate is an IFF
            undefined value, it is translated into a null depth  value  of  99999.
            All  the  AC  entries  contained  in the feature are transfered to the
            relevant attribute fields in the data record.  The codes of  these  AC
            entries are determined from the FRT file read by the program.

            Some quantities, for example longitudes, may be  subject  to  rounding
            errors  in  their final digit when the program transfers them from the
            input IFF file to the MGD77 format tape  file.   This  will  generally
            only  occur  for  quantities  such  as  longitude  when all 8 of their
            potential significant figures (digits) are  used  (ie.   greater  than
            99.99999  degrees).   This  rounding error is inherent to VAX/VMS data
            storage methods.  It may cause a positional inaccuracy of less than  1
            metre on the earth's surface.

            The I2MGD program always refers to the types of the AC  entries  which
            it  constructs  using the same AC names.  The user may alter the codes
            of the AC entries written to the output IFF file by changing  the  FRT
            file read by the program.  The use of the FRT file is described in the
            'Data Preparation' section of the documentation for this module.

            Details of the structure, content  and  characteristics  of  an  MGD77
            format  tape  are  to  be  found  in the 'Data Format' section of this
            modules's documentation.


  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-4
  UTILITY I2MGD                                                       17 June 1991


            It is essential that the tape is mounted as a foreign  volume  with  a
            write-permit-ring  prior to running I2MGD.  This is achieved using the
            DCL command MOUNT with the /FOREIGN qualifier e.g.
            $ MOUNT MSA0:/FOREIGN.


  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-5
  UTILITY I2MGD                                                       17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mEXAMPLES[0m

  Rewind tape and transfer IFF file to the beginning of the tape

  $
  $ [1malloc[0m [1mmub1:[0m
  %DCL-I-ALLOC, _LSLM3A$MUB1: allocated
  $ [1mmount/foreign[0m [1mmub1:[0m
  %MOUNT-I-MOUNTED,  mounted on _LSLM3A$MUB1:
  $ [1mdefine[0m [1mlsl$frt_acdmax[0m [1m200[0m
  $ [1mi2mgd/device=mub1:/rewind/frt=mgd77_acd_table/diagnostics[0m [1mtest.iff[0m
  %I2MGD-I-MGDOPNOUT, MGD77 file MUB1: opened for output
  %I2MGD-I-LAYER, layer 0
  Header Block 1 : 
  1V3620   MGD77        10295553185902  LAMONT-DOHERTY GEOLOGICAL OBSERVATORY   01
        ...
        ...
                                                                                24
  Block 1 written
  %I2MGD-I-LAYER, layer 1
  Data Block : 
  3V3620   +00008101191300000-2980068+03115301300070100053736199999999999999999999
        ...
        ...
  28723005751004354361999999999999999999999999999999999999999999999999999999999999
  Block 2 written
  Data Block : 
  3V3620   +00008101191430000-3000746+03123133300582600441036199999999999999999999
        ...
        ...
  207830101250076243619999999999999999999999999999999794083-00092+0425999999999999
  Block 3 written
  Data Block : 
  3V3620   +00008101191602000-3026399+03121999301012500762436199999999999999999999
        ...
        ...
  14503023001017210361999999999999999999999999999999999999999999999999999999999999
  Block 4 written
  Data Block : 
  3V3620   +00008101191748000-3056517+03110500302400101795836199999999999999999999
        ...
        ...
  61733035751026748361999999999999999999999999999999999999999999999999999999999999
  Block 5 written
  Data Block : 
  3V3620   +00008101191924000-3083433+03095199303622602710336199999999999999999999
        ...
        ...
  06623038726028973361999999999999999999999999999999999999999999999999999999999999
  Block 6 written
  Data Block : 
  3V3620   +00008101192100000-3110844+03079693303890102910436199999999999999999999
        ...
        ...
  95533038951029141361999999999999999999999999999999999999999999999999999999999999


  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-6
  UTILITY I2MGD                                                       17 June 1991


  Block 7 written
  Data Block : 
  3V3620   +00008101192230000-3133500+03058133303925102936636199999999999999999999
        ...
        ...
  99999999999999999999999999999999999999999999999999999999999999999999999999999999
  Block 8 written
   ELAPSED:    0 00:00:29.07  CPU: 0:00:10.76  BUFIO: 220  DIRIO: 69  FAULTS: 323 
  $ 
  $ 


  Transfer IFF file to the end of the existing  datasets  on  the  tape  on  MUB1:
  using default qualifiers.

  $ 
  $ [1mi2mgd/device=mub1:[0m [1mmgd77_smalltest[0m
  %I2MGD-I-MGDOPNOUT, MGD77 file MUB1: opened for output
  %I2MGD-I-NOTEOF, rewinding and looking for end of volume
   ELAPSED:    0 00:00:20.14  CPU: 0:00:10.59  BUFIO: 20  DIRIO: 65  FAULTS: 307 
  $ 
  $ 
  $ [1mdismount[0m [1mmub1:[0m
  $ [1mdeallocate[0m [1mmub1:[0m
  $ 


  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-7
  MESSAGES (SUCCESS)                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(SUCCESS)[0m

  These messages are used to indicate that the program has succeeded in performing
  some action, and do not require any user action.

  NORMAL, Normal, successful completion

      [1mExplanation:[0m  I2MGD has finished its  operations  successfully  and  without
      problems.

      [1mUser[0m [1maction:[0m  None.


  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-8
  MESSAGES (INFORMATIONAL)                                            17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(INFORMATIONAL)[0m

  These messages give information only, and require no  immediate  action  by  the
  user.  They are used to provide information on the current state of the program,
  or to supply explanatory information in support of a warning or error message.

  LAYER, layer 'integer'

      [1mExplanation:[0m  The start of the specified layer has been  found  in  the  IFF
      file

      [1mUser[0m [1maction:[0m  None.

  MGDOPNOUT, MGD77 file 'filename' opened for output

      [1mExplanation:[0m  The magnetic tape device specified has been opened for writing
      the MGD77 file to

      [1mUser[0m [1maction:[0m  None.

  NOTEOF, rewinding and looking for end of volume

      [1mExplanation:[0m  I2MGD is rewinding the tape back to the BOT  marker  and  will
      then  search  through  the tape looking for the pair of tapemarks indicating
      the End-of-File .  It will then position the tapehead between the  tapemarks
      preparatory  to writing the requested dataset.  This may take some time with
      large datasets.

      [1mUser[0m [1maction:[0m  None.


  IFFMGD REFERENCE (1.0): I2MGD utility                                   Page 3-9
  MESSAGES (WARNING)                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(WARNING)[0m

  These messages are output when an error  has  occurred  that  can  be  corrected
  immediately by the user or that the program will attempt to overcome.

  BADSNUM, too many Additional Documentation entries for header blocks

      [1mExplanation:[0m  More ACs of 'Additional Documentation' type than the  79  that
      can  be written to the 4 header blocks have been found in the header feature
      in layer 0.  The excess ACs have been ignored.

      [1mUser[0m [1maction:[0m  If the documentation is required then edit the IFF file  using
      IPATCH  or LITES2 to reduce the number of AC entries of this type, and rerun
      I2MGD on this data.

  CORDEP, Z value 'real' different from Bathymetric Depth in AC entry - Z value
      used.

      [1mExplanation:[0m  The value read from the Z field of the ZS entry  is  different
      to  that previous read from the AC type M_Data_bathy_correct.  The former is
      assumed correct for output.

      [1mUser[0m [1maction:[0m  If the Z value of the ZS entry  is  not  required  on  output,
      amend the IFF file using IPATCH or LITES2 and rerun I2MGD on this data.

  DOC77LONG, an Additional Documentation record has been truncated to 77
      characters

      [1mExplanation:[0m  The start of each additional header block is  labeled  with  a
      Record Type field of '1'.  Only 77 characters can therefore be output in the
      first sequence of 80 characters.  Truncation  of  the  end  of  an  AC  type
      Additional Documentation entry of 78 characters has ocurred.

      [1mUser[0m [1maction:[0m  If the full documentation is required edit the IFF file

  MISSAC, no AC entries in feature 'fsn' ('isn') in layer 'integer'

      [1mExplanation:[0m  No AC entries were found in the  specified  feature.   A  data
      record  comprising only the latitude, longitude and Corrected Depth has been
      output.

      [1mUser[0m [1maction:[0m  Examine feature in IFF file with IPATCH or LITES2 and  correct
      as necessary.

  UNKACOD, unknown AC code 'integer' - entry ignored

      [1mExplanation:[0m  The specified AC code was not found in the FRT table  supplied
      to the program.  The AC entry has been ignored.

      [1mUser[0m [1maction:[0m  Check that the correct FRT table with the  complete  range  of
      ACD entries was supplied.


  IFFMGD REFERENCE (1.0): I2MGD utility                                  Page 3-10
  MESSAGES (WARNING)                                                  17 June 1991


  UNKDTYP, unknown AC data type in an AC type 'integer' entry

      [1mExplanation:[0m  Entry will be ignored

      [1mUser[0m [1maction:[0m  None.

  UNSETMD, IFF type 2 map descriptor is unset

      [1mExplanation:[0m  The IFF file must have a type  2  map  descriptor  entry  with
      valid origin offset, units in degrees and geographical coords

      [1mUser[0m [1maction:[0m  Amend the IFF file using IPATCH or ITRANS and rerun  I2MGD  on
      this data.


  IFFMGD REFERENCE (1.0): I2MGD utility                                  Page 3-11
  MESSAGES (ERROR)                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(ERROR)[0m

  These messages indicate an error in processing which will cause the  program  to
  terminate.   The  most  likely  causes  are a corrupt or otherwise invalid input
  file, or an error related to command line processing and file manipulation.

  BADDEV, error enquiring about device 'name'

      [1mExplanation:[0m  The specified device is not available.  The associated  system
      error messages should give further information.

      [1mUser[0m [1maction:[0m  Rerun I2MGD with amended qualifiers.

  BADFEAT, error processing feature 'fsn' ('isn')

      [1mExplanation:[0m  An error - usually with the AC entries - has been  encountered
      while  processing  the  feature.   The  associated  error messages will give
      further information.

      [1mUser[0m [1maction:[0m  Investigate the cause of the error using IPATCH or LITES2  and
      rerun I2MGD on the data.

  BADFRT, error initialising FRT file 'file-spec'

      [1mExplanation:[0m  I2MGD has not been able to open the specified FRT  file.   The
      associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check the spelling of the FRT filename and that  the  required
      FRT is available in the directory LSL$FRT:

  BADPRJ, Map Descriptor has wrong projection code - must be 100 (Geographical)

      [1mExplanation:[0m  The data must be in geographicals in order  to  be  translated
      into MGD77 format.

      [1mUser[0m [1maction:[0m  Amend Map Descriptor and/or data using ITRANS and rerun I2MGD.

  BADUNT, Map Descriptor has wrong units - must be Degrees

      [1mExplanation:[0m  The data must be in degrees units in order  to  be  translated
      into MGD77 format.

      [1mUser[0m [1maction:[0m  Amend Map Descriptor and/or data using ITRANS and rerun I2MGD.

  EXPNUM, number of digits ('integer') is too large for output field

      [1mExplanation:[0m  The value of an AC entry exceeds its MGD77 defined size.

      [1mUser[0m [1maction:[0m  Check ACD table is correct.


  IFFMGD REFERENCE (1.0): I2MGD utility                                  Page 3-12
  MESSAGES (ERROR)                                                    17 June 1991


  FORDEV, device 'name' not mounted foreign

      [1mExplanation:[0m  The magtape has not been mounted with the /FOREIGN qualifier.

      [1mUser[0m [1maction:[0m  Issue the correct mount command and rerun I2MGD.

  INTMAX, value 'integer' exceeds defined limits for AC 'integer'.

      [1mExplanation:[0m  The integer value in the AC  entry  lies  outside  the  limits
      defined in the FRT table.

      [1mUser[0m [1maction:[0m  Check that the FRT table has the  correct  limits  defined  or
      amend the IFF file using LITES2 or IPATCH.

  INVALFC, 'integer' is an invalid feature code argument - value must lie in range
      0 - 32767

      [1mExplanation:[0m  The value given in the /FC qualifier is incorrect.

      [1mUser[0m [1maction:[0m  Reenter the command line with a correct value.

  LASTBLK, error completing last data block

      [1mExplanation:[0m  I2MGD is unable to complete the last  block  of  data  on  the
      magtape.

      [1mUser[0m [1maction:[0m  Report possible program problem to Laser-Scan.

  MAXREC, too many data records for one block

      [1mExplanation:[0m  The data record counter exceeds 16.

      [1mUser[0m [1maction:[0m  Report possible program problem to Laser-Scan.

  MTBLK, error writing magnetic tape block

      [1mExplanation:[0m  The program has been unable to write a block to  the  magtape.
      The associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check correct mechanical operation of the tapedeck  and  rerun
      I2MGD.

  MTOPEN, error initialising tape unit 'name'

      [1mExplanation:[0m  The program has been unable to initialise  the  magtape.   The
      associated system error messages will give further information.

      [1mUser[0m [1maction:[0m  Check tape has been physically loaded  correctly  and  mounted
      /FOREIGN.


  IFFMGD REFERENCE (1.0): I2MGD utility                                  Page 3-13
  MESSAGES (ERROR)                                                    17 June 1991


  RELMAX, value 'real' exceeds defined limits for AC 'integer' - output may be
      incorrect

      [1mExplanation:[0m  The real value in the AC entry lies outside the limits defined
      in the FRT table.

      [1mUser[0m [1maction:[0m  Check that the FRT table has the  correct  limits  defined  or
      amend the IFF file using LITES2 or IPATCH.

  UNEXPEOF, unexpected end of IFF file

      [1mExplanation:[0m  The IFF file has an incorrect structure or missing entries.

      [1mUser[0m [1maction:[0m  Amend the IFF file using IPATCH and rerun I2MGD.

  UNKATYP, invalid AC type 'integer'

      [1mExplanation:[0m  An unknown AC entry has been found in the IFF file.

      [1mUser[0m [1maction:[0m  Check that the correct FRT file is being  used  or  amend  IFF
      file using LITES2 or IPATCH and rerun I2MGD.

  WREOT, error writing tape mark on 'name'

      [1mExplanation:[0m  The program has  been  unable  to  write  a  tapemark  to  the
      magtape.    The   associated   system   error  messages  will  give  further
      information.

      [1mUser[0m [1maction:[0m  Check correct mechanical operation of the tapedeck  and  rerun
      I2MGD.


  IFFMGD REFERENCE (1.0): I2MGD utility                                  Page 3-14
  MESSAGES (OTHER)                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(OTHER)[0m

  In addition to the above messages which are generated  by  the  program  itself,
  other  messages  may  be  produced  by the command line interpreter (CLI) and by
  Laser-Scan libraries.  In particular, messages  may  be  generated  by  the  IFF
  library  and  by  the  Laser-Scan I/O library, LSLLIB.  IFF library messages are
  introduced by '%IFF' and are documented in the IFF  library  users'  guide.   In
  most  cases  IFF  errors will be due to a corrupt input file, and this should be
  the first area of investigation.  If the cause of the error cannot be traced  by
  the user, and Laser-Scan are consulted, then the output file should be preserved
  to facilitate diagnosis.  LSLLIB messages are introduced by  '%LSLLIB'  and  are
  generally  self-explanatory.   They  are  used to explain the details of program
  generated errors.














                                     CHAPTER 4

                                   MGD2I UTILITY





  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-1
  UTILITY MGD2I                                                       17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mUTILITY[0m [1mMGD2I[0m

  [1m--------------------------------------------------------------------------------[0m
  [1mFUNCTION[0m

            MGD2I reads  a  magnetic  tape  in  Marine  Geophysical  Data  (MGD77)
            exchange  format,  and  produces an Internal Feature Format (IFF) file
            for the specified map sheet in the input data.  A  'map  sheet'  is  a
            single file or dataset on the input tape.

  [1m--------------------------------------------------------------------------------[0m
  [1mFORMAT[0m

            $ MGD2I output-file-spec

            [1mCommand[0m [1mqualifiers[0m               [1mDefaults[0m

            /DEVICE=magtape-drive            /DEVICE=MSA0:
            /[NO]DIAGNOSTICS                 /NODIAGNOSTICS
            /FC=feature-code                 /FC=10
            /FRT=file-spec                   /FRT=LSL$FRT:MGD77_ACD_TABLE.FRT
            /[NO]REWIND                      /NOREWIND
            /SELECT=integer                  /SELECT=1


  [1m--------------------------------------------------------------------------------[0m
  [1mPROMPT[0m

            _Output-IFF-file:        output-file-spec

  [1m--------------------------------------------------------------------------------[0m
  [1mPARAMETERS[0m

  output-file-spec

          - This parameter specifies the name of an IFF file, and  is  compulsory.
            The  map  sheet  read from the input tape is output to this file; this
            defaults to the first sheet in the input.  The /SELECT  qualifier  can
            be used to select a different sheet.
            The default device and extension LSL$IF:.IFF are applied to the output
            file specification when it is parsed.

  [1m--------------------------------------------------------------------------------[0m
  [1mCOMMAND[0m [1mQUALIFIERS[0m

  /DEVICE=magtape-drive

          - The /DEVICE command qualifier specifies the magnetic  tape  device  on
            which the input tape is to be read.
            The default device name is MSA0:.



  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-2
  UTILITY MGD2I                                                       17 June 1991


  /DIAGNOSTICS
  /NODIAGNOSTICS (default)

          - When /DIAGNOSTICS is present, the MGD2I utility will output diagnostic
            messages as it processes the input tape.  These messages include brief
            information about each new sheet encountered on the tape  and  details
            of each block in the required input sheet as it is processed.


  /FC=feature-code

          - This qualifier is used to specify the  Feature  Code  (FC)  which  the
            program  will  give to all the features which it creates in the output
            IFF file.  That  is,  the  dummy  feature  used  to  hold  the  header
            information Ancillary Code (AC) entries, and the features used to hold
            the coordinates and attribute data for each logical data record on the
            original tape.
            The default feature code is 10.


  /FRT=file-spec

          - The /FRT command qualifier specifies a  Feature  Representation  Table
            (FRT) file which the program will read to determine the AC codes given
            to the AC entries, in the IFF file, created to hold header and feature
            attribute  information.   The program MGD2I always refers to these ACs
            using the same names, but the user may alter  the  codes,  onto  which
            these names map, by changing the FRT file.
            The default file specification is LSL$FRT:MGD77_ACD_TABLE.FRT.   If  a
            file  specification  is  given  with  /FRT,  it is parsed against this
            default.


  /REWIND
  /NOREWIND (default)

          - The /REWIND qualifier, when present on  the  command  line,  specifies
            that  the  magnetic  tape  should  be  rewound, by MGD2I, to the 'BOT'
            position before reading of, or searching for, any  sheet  is  started.
            The  /REWIND  qualifier  may  be  used in combination with the /SELECT
            qualifier to read a sheet in a particular position, counted  from  the
            start of the tape.
            When /NOREWIND, the default, is used, the reading or searching of  the
            tape  starts  from  the present tape position.  The user should ensure
            that the current tape position is a sensible place from which to begin
            (see /SELECT).


  /SELECT=integer

          - This qualifier is used to select a sheet to be  read  from  the  input
            tape.   The  'integer'  specifies  the  required  sheet  number.  This
            qualifier may be used with either /REWIND or /NOREWIND  to  start  the
            search  for  the  sheet from the start of the tape or from the current
            tape position, respectively.
            If sheet 1 is specified with the /SELECT qualifier, the  program  will


  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-3
  UTILITY MGD2I                                                       17 June 1991


            attempt  to  read a dataset starting at the current tape position.  If
            sheet 2 is specified with the  /SELECT  qualifier,  the  program  will
            search  forwards  from  the  current  tape  position to find the first
            tapemark, which is considered to mark the end of the first  sheet  and
            the  start  of  the  second,  and  will  start  to read from the block
            immediately  following  it.   Similarly,  for  sheet  3,  the  program
            searches  for the second tapemark before starting to read the dataset,
            and so on.
            The end of the datasets on the tape (the end of volume) is  marked  by
            two consecutive tapemarks.
            The default is to read the first sheet found on the  tape.   That  is,
            from the sheet starting at the current tape position.
            The user should ensure that the tape is  positioned  correctly  before
            any operations are attempted with MGD2I.

  [1m--------------------------------------------------------------------------------[0m
  [1mRESTRICTIONS[0m

            None

  [1m--------------------------------------------------------------------------------[0m
  [1mDESCRIPTION[0m

            MGD2I is a utility to  transfer  a  map  sheet  from  a  MGD77  format
            magnetic  tape, to an Internal Feature Format (IFF) disk file.  A 'map
            sheet' is a single file or dataset on the input  tape.   Sheets  which
            span  more  than  one tape should be treated as separate sheets on the
            different tapes, with separate IFF files  being  generated  from  each
            tape using MGD2I.  These separate IFF files may subsequently be merged
            if required.

            The user may specify which sheet to transfer by means of  the  /SELECT
            qualifier.   The  program  will  search  forwards  through  the  tape,
            counting the number of end of  file  markers  (tapemarks),  until  the
            tapemark before the beginning of the required sheet is reached.

            If the /SELECT qualifier is not used, or it is used to select sheet 1,
            no  searching  of the tape occurs, and the program begins to read from
            the current tape position.  In this case, the user should ensure  that
            the  tape  is correctly positioned immediately before the first header
            block of the required sheet.

            If the /SELECT qualifier is used to specify some sheet other than  the
            first,  then  the  program  will search forwards from the current tape
            position  for  tapemarks.   The  tape  need  not,  in  this  case,  be
            positioned at the start of a sheet.

            If the tape read fails because the tape is at some unexpected position
            (because  of  a  previous  failure,  or  a user specified escape), the
            /SELECT qualifier must be  used,  possibly  in  conjunction  with  the
            /REWIND qualifier, to start again at a correct tape position.

            Note that only a single map sheet may be transferred during  a  single
            run of the program.


  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-4
  UTILITY MGD2I                                                       17 June 1991


            The program performs no validation operations on any sheets which  are
            skipped,  when using the /SELECT qualifier, and does not check whether
            they are complete and correct MGD77 format datasets.

            If the /DIAGNOSTICS qualifier is used on the command line, the program
            produces messages giving information about the sheets and blocks being
            read from the tape, and  any  errors  or  difficulties  which  may  be
            encountered.

            MGD2I transfers information from the header  block  or  blocks  of  an
            MGD77  format  tape  to  a  dummy feature in layer 0 of the output IFF
            file.  The header information is held in a number of AC  entries  with
            codes  as  defined  by  the  FRT  file read by the program.  The dummy
            header feature is given the coordinates of the local origin of the IFF
            file   created  by  the  program.   In  general,  these  will  be  the
            coordinates of the first data record in the input data.

            MGD2I translates each MGD77 logical data record into  an  IFF  feature
            record in the output file.  The data features are contained in layer 1
            of the IFF file and are ordered as in the tape file.   The  longitude,
            latitude and corrected depth of a data record are transfered to the X,
            Y and Z coordinates, respectively, of a ZS entry in the  corresponding
            feature.   If  the  corrected  depth  value  is null (ie 99999), it is
            translated into an IFF undefined value.  All the other attributes  are
            transfered to AC entries contained in the feature.  The codes of these
            AC entries are determined from the FRT file read by the program.

            Some quantities, for example longitudes, may be  subject  to  rounding
            errors  in  their final digit when the program transfers them from the
            MGD77 format tape file to the output IFF file.   This  will  generally
            only  occur  for  quantities  such  as  longitude  when all 8 of their
            potential significant figures (digits) are  used  (ie.   greater  than
            99.99999  degrees).   This  rounding error is inherent to VAX/VMS data
            storage methods.  It may cause a positional inaccuracy of less than  1
            metre on the earth's surface.

            The MGD2I program always refers to the types of the AC  entries  which
            it  constructs  using the same AC names.  The user may alter the codes
            of the AC entries written to the output IFF file by changing  the  FRT
            file read by the program.  The use of the FRT file is described in the
            'Data Preparation' section of the documentation for this module.

            Details of the structure, content  and  characteristics  of  an  MGD77
            format  tape  are  to  be  found  in the 'Data Format' section of this
            modules's documentation.

            It is essential that the tape is mounted as a foreign volume prior  to
            running  MGD2I.  This is achieved using the DCL command MOUNT with the
            /FOREIGN qualifier e.g.  MOUNT MSA0:/FOREIGN.


  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-5
  UTILITY MGD2I                                                       17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mEXAMPLES[0m

  Transfer the first data set on a tape to an IFF file

  $
  $ [1malloc[0m [1mmub1:[0m
  %DCL-I-ALLOC, LSLM3A$MUB1: allocated
  $ [1mmount/foreign[0m [1mmub1:[0m
  %MOUNT-I-MOUNTED,  mounted on LSLM3A$MUB1:
  $ [1mdefine[0m [1mlsl$frt_acdmax[0m [1m200[0m
  $ [1mmgd2i/device=mub1:/rewind/select=1/frt=mgd77_acd_table/diagnostics[0m
  Output-IFF-file: [1mmgd77_testdata[0m
  Searching for sheet number 1 (counted from beginning of tape)
  Rewinding tape
  Found required sheet 1
  %LSLLIB-I-IFFOPENED, LSL$DATA_ROOT:[LSL.IFF]MGD77_TESTDATA.IFF;1 opened for write
  Block      1    : 1920 bytes long
  First few bytes : 1V3620   MGD77        10295553185902  LA
  %MGD2I-W-BLANKNUM, Blank numeric input field for AC M_Data_centre_no
  -MGD2I-W-UNCOMPAC, Unable to complete AC with name M_Data_centre_no
  Block      2    : 1920 bytes long
  First few bytes : 3V3620   +00008101191300000-2980068+0311
  Block      3    : 1920 bytes long
  First few bytes : 3V3620   +00008101191430000-3000746+0312
  Block      4    : 1920 bytes long
  First few bytes : 3V3620   +00008101191602000-3026399+0312
  Block      5    : 1920 bytes long
  First few bytes : 3V3620   +00008101191748000-3056517+0311
  Block      6    : 1920 bytes long
  First few bytes : 3V3620   +00008101191924000-3083433+0309
  Block      7    : 1920 bytes long
  First few bytes : 3V3620   +00008101192100000-3110844+0307
  Block      8    : 1920 bytes long
  First few bytes : 3V3620   +00008101192230000-3133500+0305
  Block     10    : Tapemark (EOF)
   ELAPSED:    0 00:00:50.70  CPU: 0:00:12.28  BUFIO: 30  DIRIO: 92  FAULTS: 273 
  $ 

  Transfer the next data set on the tape to an IFF file:

  $
  $ [1mmgd2i/device=mub1:[0m [1mmgd77_testdata2[0m
  %LSLLIB-I-IFFOPENED, LSL$DATA_ROOT:[LSL.IFF]MGD77_TESTDATA2.IFF;1 opened for write
  %MGD2I-W-BLANKNUM, Blank numeric input field for AC M_Data_centre_no
  -MGD2I-W-UNCOMPAC, Unable to complete AC with name M_Data_centre_no
   ELAPSED:    0 00:00:20.26  CPU: 0:00:12.09  BUFIO: 8  DIRIO: 87  FAULTS: 324 
  $ 

  Specifically transfer the second data set on the tape to an IFF file:

  $ 
  $ [1mmgd2i/device=mub1:/rewind/select=2/diagnostics mgd77_testdata3[0m
  Searching for sheet number 2 (counted from beginning of tape)
  Rewinding tape
  Found sheet 1


  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-6
  UTILITY MGD2I                                                       17 June 1991


  Found required sheet 2
  %LSLLIB-I-IFFOPENED, LSL$DATA_ROOT:[LSL.IFF]MGD77_TESTDATA3.IFF;1 opened for write
  Block      1    : 1920 bytes long
  First few bytes : 1V3620   MGD77        10295553185902  LA
  %MGD2I-W-BLANKNUM, Blank numeric input field for AC M_Data_centre_no
  -MGD2I-W-UNCOMPAC, Unable to complete AC with name M_Data_centre_no
  Block      2    : 1920 bytes long
  First few bytes : 3V3620   +00008101191300000-2980068+0311
  Block      3    : 1920 bytes long
  First few bytes : 3V3620   +00008101191430000-3000746+0312
  Block      4    : 1920 bytes long
  First few bytes : 3V3620   +00008101191602000-3026399+0312
  Block      5    : 1920 bytes long
  First few bytes : 3V3620   +00008101191748000-3056517+0311
  Block      6    : 1920 bytes long
  First few bytes : 3V3620   +00008101191924000-3083433+0309
  Block      7    : 1920 bytes long
  First few bytes : 3V3620   +00008101192100000-3110844+0307
  Block      8    : 1920 bytes long
  First few bytes : 3V3620   +00008101192230000-3133500+0305
  Block     10    : Tapemark (EOF)
   ELAPSED:    0 00:00:22.60  CPU: 0:00:11.67  BUFIO: 29  DIRIO: 93  FAULTS: 316 
  $ 
  $ [1mdismount[0m [1mmub1:[0m
  $ [1mdeallocate[0m [1mmub1:[0m
  $ 


  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-7
  MESSAGES (SUCCESS)                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(SUCCESS)[0m

  These messages are used to indicate that the program has succeeded in performing
  some action, and do not require any user action.

  NORMAL, Normal, successful completion

      [1mExplanation:[0m  MGD2I has finished its  operations  successfully  and  without
      problems.

      [1mUser[0m [1maction:[0m  None.


  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-8
  MESSAGES (WARNING)                                                  17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(WARNING)[0m

  These messages are output when an error  has  occurred  that  can  be  corrected
  immediately by the user or that the program will attempt to overcome.

  ACNOTINFRT, AC with name 'AC-name' not found in FRT

      [1mExplanation:[0m  The specified AC name was not found in the FRT table  supplied
      to  the  program.  This is probably because one of the ACs used by MGD2I was
      omitted when the FRT was compiled.

      [1mUser[0m [1maction:[0m  The user should check that  all  the  AC  names  required  for
      transferring  the  MGD77  format  to an IFF file are present in the FRT file
      being used.  Any that are  not  should  be  added  before  the  transfer  is
      re-attempted.

  BADACTYP, AC 'AC-name' incompatible with type specified in ACD table

      [1mExplanation:[0m  The type specified in the ACD table of the FRT file, used with
      the program, for the named AC is not that expected by the program.

      [1mUser[0m [1maction:[0m  The user should check that the correct FRT file is being used,
      and that the type specified in the FRT file for the named AC is correct.

  BADACVAL, AC 'AC-name' value incompatible with range specified in ACD table

      [1mExplanation:[0m  The value found in the input MGD77 data for the named AC  lies
      outside  the value range (maximum and minimum) specified in the ACD table of
      the FRT file used with the program.

      [1mUser[0m [1maction:[0m  The user should check that the correct FRT file is being used,
      and  that  the  value  range  specified  in the FRT file for the named AC is
      correct.  The user should also check, if possible, that the input MGD77 data
      is correct.

  BLANKNUM, Blank numeric input field for AC 'AC-name'

      [1mExplanation:[0m  A blank numeric field, filled with spaces or nulls, was  found
      in  the input MGD77 data, corresponding to the named output AC in the output
      IFF file.  This AC will not be written to the output IFF file.

      [1mUser[0m [1maction:[0m  None.

  ILLEGDATATYP, Illegal record type found where data block expected

      [1mExplanation:[0m  When a logical data record, contained in  a  data  block,  was
      read and processed, its initial character, which was expected to be '3', was
      found not to be.

      [1mUser[0m [1maction:[0m  The user should ensure that the sheet being read  conforms  to
      the  MGD77  format,  and that the tape is correctly positioned, before again
      attempting the transfer.


  IFFMGD REFERENCE (1.0): MGD2I utility                                   Page 4-9
  MESSAGES (WARNING)                                                  17 June 1991


  ILLEGHDR1LEN, Illegal length block found for type 1 header

      [1mExplanation:[0m  When a type 1 header block was  read,  its  length,  which  is
      expected to be 1920 bytes, was found not to be.

      [1mUser[0m [1maction:[0m  The user should check  that  the  sheet  being  read,  and  in
      particular  the  header  blocks,  is  a  complete  and  correct MGD77 format
      dataset.  The user should also check that the tape was correctly  positioned
      before the transfer was attempted.  The transfer may then be retried.

  ILLEGHDR1TYP, Illegal block type found where type 1 header expected

      [1mExplanation:[0m  When a type 1 header block was read,  its  initial  character,
      which is expected to be '1', was found not to be.

      [1mUser[0m [1maction:[0m  The user should check  that  the  sheet  being  read,  and  in
      particular  the  header  blocks,  is  a  complete  and  correct MGD77 format
      dataset.  Also, the user should check that the tape was correctly positioned
      before  the  transfer  operation  was  attempted.   The transfer may then be
      retried.

  ILLEGNUM, Non-numeric characters found instead of number

      [1mExplanation:[0m  Characters which were not numeric, or '+' or '-',  were  found
      while attempting to read a numeric field in one of the header or data blocks
      read from the input magnetic tape.

      [1mUser[0m [1maction:[0m  The user should check that the tape complies  with  the  MGD77
      format  and  has not been corrupted.  Another possible cause of this message
      is the use of space or null characters to pad undefined fields; if  this  is
      the case, then these warnings can be ignored.

  SEQOUTOFORD, Sequence number 'integer' out of order or incorrect

      [1mExplanation:[0m  The specified sequence number (held in columns 79-80 of a type
      1 header block sequence) is does not have the value 'sequence-number'.

      [1mUser[0m [1maction:[0m  The user should check that the sheet being  read  conforms  to
      the  MGD77  format, and that the tape is correctly positioned, before trying
      the transfer again.

  SKIPHDR2, Skipping type 2 header blocks

      [1mExplanation:[0m  MGD2I has encountered one or more type 2 header blocks in  the
      sheet  being  transferred.  Since these are not defined in the MGD77 format,
      they are being ignored.  The program should function normally,  transferring
      header  information and data to the output IFF file, providing the remainder
      of the tape adheres to the MGD77 format.

      [1mUser[0m [1maction:[0m  The user should check that the input  magnetic  tape  contains
      MGD77  format  datasets  which  are  complete  and correct.  If the sheet is
      correct apart from the type 2 header, it will be transferred  normally  with
      the exception of the generation of this message.


  IFFMGD REFERENCE (1.0): MGD2I utility                                  Page 4-10
  MESSAGES (WARNING)                                                  17 June 1991


  UNCOMPAC, Unable to complete AC with name 'AC-name'

      [1mExplanation:[0m  The MGD2I program was unable to construct the named  AC  entry
      in the output IFF file.

      [1mUser[0m [1maction:[0m  The user should examine any other errors  produced  before  or
      after this one to determine the reason for the failure.


  IFFMGD REFERENCE (1.0): MGD2I utility                                  Page 4-11
  MESSAGES (ERROR)                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(ERROR)[0m

  These messages indicate an error in processing which will cause the  program  to
  terminate.   The  most  likely  causes  are a corrupt or otherwise invalid input
  file, or an error related to command line processing and file manipulation.

  BADTAPEDEV, The is a fault with the specified tape device

      [1mExplanation:[0m  There is a fault with the tape device specified in the command
      line which prevents it the tape being read by the program.

      [1mUser[0m [1maction:[0m  The user  should  examine  any  other  messages  generated  to
      determine the cause of the error.

  ENDOFVOL, End of volume encountered on tape

      [1mExplanation:[0m  The end of volume marker (two successive tapemarks)  has  been
      found on the input magnetic tape, before the required sheet was reached.

      [1mUser[0m [1maction:[0m  The user should respecify the command line, making appropriate
      use  of  the  /REWIND  and /SELECT qualifiers to transfer a sheet which lies
      before the end of the volume.

  ILLEGFC, Illegal feature code (not between 1 and 32767)

      [1mExplanation:[0m  The /FC command qualifier has been used to attempt to  specify
      a feature code not in the legal range.

      [1mUser[0m [1maction:[0m  The user should respecify the command line, ensuring that  the
      feature code specified lies in the legal range.

  ILLEGSHEET, Illegal sheet number (not 1 or more)

      [1mExplanation:[0m  The /SELECT command  line  qualifier  has  been  used  with  a
      negative integer instead of a legal sheet number.

      [1mUser[0m [1maction:[0m  The user should re-enter the command line, ensuring  that  the
      sheet number specified with the /SELECT qualifier is legal, that is, that is
      1 or more.

  NOIFFCP, No corner point (CP) entry found in IFF file

      [1mExplanation:[0m  The CP entry in the output IFF file, created by MGD2I,  cannot
      be  found.   This  could  be  due to corruption of the file possibly by some
      external agency.

      [1mUser[0m [1maction:[0m  The user should check for possible causes of file  corruption.
      If the problem persists, the system manager should be consulted.


  IFFMGD REFERENCE (1.0): MGD2I utility                                  Page 4-12
  MESSAGES (ERROR)                                                    17 June 1991


  NOIFFHDRZS, The header feature ZS entry cannot be found in IFF file

      [1mExplanation:[0m  The header feature's ZS entry in the output IFF file,  created
      by  MGD2I,  cannot  be  found.  This could be due to corruption of the file,
      possibly by some external agency.

      [1mUser[0m [1maction:[0m  The user should check for possible causes of file  corruption.
      If the problem persists, the system manager should be consulted.

  NOIFFMD, No type 2 map descriptor (MD) entry found in IFF file

      [1mExplanation:[0m  The MD entry in the output IFF file, created by MGD2I,  cannot
      be  found.   This  could  be  due to corruption of the file possibly by some
      external agency.

      [1mUser[0m [1maction:[0m  The user should check for possible causes of file  corruption.
      If the problem persists, the system manager should be consulted.

  NOIFFRA, No range (RA) entry found in IFF file

      [1mExplanation:[0m  The RA entry in the output IFF file, created by MGD2I,  cannot
      be  found.   This  could  be  due to corruption of the file possibly by some
      external agency.

      [1mUser[0m [1maction:[0m  The user should check for possible causes of file  corruption.
      If the problem persists, the system manager should be consulted.

  NOTMOUNTFOR, Input tape device is not mounted /FOREIGN

      [1mExplanation:[0m  The input tape device has not been  mounted  /FOREIGN,  as  is
      required by the MGD2I program.

      [1mUser[0m [1maction:[0m  The user should issue the  MOUNT/FOREIGN  'magtape-drive'  DCL
      command and then re-attempt the transfer from tape using the MGD2I program.


  IFFMGD REFERENCE (1.0): MGD2I utility                                  Page 4-13
  MESSAGES (OTHER)                                                    17 June 1991


  [1m--------------------------------------------------------------------------------[0m
  [1mMESSAGES[0m [1m(OTHER)[0m

  In addition to the above messages which are generated  by  the  program  itself,
  other  messages  may  be  produced  by the command line interpreter (CLI) and by
  Laser-Scan libraries.  In particular, messages  may  be  generated  by  the  IFF
  library  and  by  the  Laser-Scan I/O library, LSLLIB.  IFF library messages are
  introduced by '%IFF' and are documented in the IFF  library  users'  guide.   In
  most  cases  IFF  errors will be due to a corrupt input file, and this should be
  the first area of investigation.  If the cause of the error cannot be traced  by
  the user, and Laser-Scan are consulted, then the output file should be preserved
  to facilitate diagnosis.  LSLLIB messages are introduced by  '%LSLLIB'  and  are
  generally  self-explanatory.   They  are  used to explain the details of program
  generated errors.
