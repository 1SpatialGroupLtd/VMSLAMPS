


















                                  [1mLaser-Scan[0m [1mLtd.[0m


                              [1mTVES[0m [1m-[0m [1mAcceptance[0m [1mTests[0m


                            [1mIssue[0m [1m1.5[0m [1m(mod)[0m  [1m01-Oct-1992[0m


























  Copyright (c) Laser-Scan Ltd 1988
  "TVES Acceptance"                       Category: Acceptance Tests

  Issue 1.0       D R Catlow                      23-Jul-1987
  Issue 1.1       T A Adams                       07-Aug-1987
  Issue 1.2       D R Catlow                      25-Jan-1988
  Issue 1.3       D R Catlow                      26-May-1988
  Issue 1.4       D R Catlow                      13-Jun-1988
  Issue 1.5       S R Miller                      17-Mar-1989
  Issue 1.5 (mod) K M Sutherland                  01-Oct-1992


  [1mTVES[0m [1mAcceptance[0m [1mtests[0m                                                     Page 2


  1  [1mINTRODUCTION[0m

  This document describes the acceptance test procedure for the Laser-Scan Package
  TVES.

  TVES is a package of routines which are designed to exploit  and  validate  grid
  based  data,  and  in  particular  DTMs produced via the package DTMCREATE.  The
  package includes the  modules  COVER,  DTICONTOUR,  DTICHECK,  I2GRID,  PROFILE,
  ROVER,   SLOPES  and  VECTORISE.   In  addition,  the  extended  vector  overlay
  facilities of DTIVIEW (DTIVIEWEXTRA) form part of the TVES package.

  Data input to the TVES package is from grid data stored in a DTI format, and for
  a number of the modules vector data from an IFF file.



  2  [1mOVERVIEW[0m

  For the purpose of acceptance, a DTM generated by the package DTMCREATE will  be
  utilised.   The  heighted vector data from which the DTM was generated will also
  be used for the purposes of overlay, along with data on woods, roads and  rivers
  digitised from a map covering the area of the acceptance DTM.

  Acceptance will be performed using a supplied DCL command  procedure  to  invoke
  the  TVES  modules, and issue module commands.  In parts of the acceptance test,
  involving the module ROVER, it will be necessary to interactively type commands.
  In these cases, the required commands are given in this document.

  The acceptance procedure is invoked by typing [1m@LSL$COM:TVES_ACCEPT[0m

  A  LSL  supported  graphics  device  with  8  bit-planes  is  required  for  the
  demonstration  of the TVES package.  You will be asked if graphical output is to
  a VAX workstation, before being asked to confirm that you wish to carry out  the
  acceptance tests.



  3  [1mDESCRIPTION OF ACCEPTANCE PROCEDURE[0m

  The acceptance procedure first demonstrates the module ROVER.  ROVER is used  to
  display  a  DTM  as  a colour coded layered image, and to overlay vector data in
  registration on to this image.  As part of the acceptance, contour data and data
  on rivers, roads and woodland will be overlaid.

  The facilities available in ROVER to control  the  graphical  representation  of
  both  the  raster  and  vector  data (eg.  height interval, height range, colour
  definition options) will be demonstrated.  User control over feature and picture
  selection,  will  be  shown.   Full  and quartered screen mode will be shown.  A
  series of images will be produced:

  The first image shows the use of the default  window  and  default  height  step
  interval - no overlay is shown.  The second image shows a user defined window; a
  height step interval of 50 metres, and a height range of 0 to 500 metres  (parts
  of  the  terrain  above  500 metres appear in black).  The third image shows the
  whole of the terrain in the DTI file, and uses a  height  step  interval  of  50
  metres,  and  a height range of 0 to 850 metres.  Not all steps are shown in the
  displayed legend.  Vector data consisting of woods, contours, roads  and  rivers


  [1mTVES[0m [1mAcceptance[0m [1mtests[0m                                                     Page 3


  will  be  overlaid  in registration on to this image.  The colour of the overlay
  features is derived in this example from the FRT.

  Deselection  and  selection  of  the  raster  and  vector   pictures   will   be
  demonstrated.   The vector overlay will be cleared and selection of overlay will
  be shown by drawing just the rivers and  roads.   Control  over  the  colour  of
  overlay will be shown by drawing the contours in white on to this image.

  The quartered screen option is demonstrated next.  The image in quadrant 1  (top
  left)  is  generated  with  a  height  step interval of 50 metres.  The image in
  quadrant 2 (top right) uses a height step interval of 200  metres.   Quadrant  3
  (bottom right) will be used to show the same terrain image with contour overlay.
  Selection and clearing of a quadrant will be shown by clearing quadrant  2  -  a
  new image that has been rotated by 180 degrees will be drawn into this quadrant.
  The final image in quadrant 4 (bottom left) will use the option to  disable  the
  legend and border annotation.

                                                                 [1mPass [ ]/Fail [ ][0m

  The module SLOPES will be invoked to demonstrate how new  information  on  slope
  and aspect may be derived from the DTM.

  Four slope maps will be generated from the elevation data.  The first  map  will
  utilise  the default slope class interval and gradient range values.  The second
  map will demonstrate user control over the slope interval values.  The third map
  will  demonstrate user control over the gradient and height range:  slopes above
  30 degrees will be shown in black, while areas of terrain above 500 metres  will
  be  shown  in white.  All these maps were generated using slope algorithm 1; the
  fourth slope map will  use  slope  algorithm  2  (average  of  2  surface  facet
  normals).

                                                                 [1mPass [ ]/Fail [ ][0m

  Three aspect maps will be generated from the elevation data.  The first map will
  utilise  the  default  aspect  parameter  settings (ie an angular interval of 30
  degrees).  The second map will use an angular interval of 45 degrees.

                                                                 [1mPass [ ]/Fail [ ][0m

  Three shaded overlays will be generated from the elevation data.  The first will
  be generated using the default settings for the light source.  This uses a light
  source in the North West, and with an angular  elevation  of  45  degrees.   The
  second  image  will show the result of changing the position of the light source
  to the North East.  The third image will be generated with a light source at  an
  angular elevation of 30 degrees.

  Output of a shaded overlay to a grid file as well as to the graphics screen will
  be demonstrated.

  To confirm the correct output of the shaded overlay,  ROVER  is  again  invoked.
  The  ability  to  overlay vector information on the shaded image, and to display
  the shaded image alongside the original elevation data will be shown.

                                                                 [1mPass [ ]/Fail [ ][0m


  [1mTVES[0m [1mAcceptance[0m [1mtests[0m                                                     Page 4


  Acceptance of the  module  PROFILE  is  performed  next.   PROFILE  is  used  to
  construct  a series of path profiles lines through a DTM.  Typically, the origin
  of the profiles will be a base station, and the profile data will  be  used  for
  radio  frequency propagation analysis.  Profiles are constructed either radially
  around the base station, or between each DTM node and the base station.  Options
  are provided to restrict profile generation to a rectangular area of interest or
  to a sector of interest, and to define a fixed  sample  interval,  or  a  sample
  interval that is dependent on the distance of the sample point from the origin.

  Each profile is written to an IFF file as a separate feature.  The  bearing  and
  length  of  the  profile  is  stored  in  the IFF file, along with the x y and z
  coordinates of the profile sample points.

  The acceptance procedure will first demonstrate  the  construction  of  profiles
  between the profile origin and every DTM node in a rectangular area.  A constant
  sample interval will be used.  Secondly, the construction of  profiles  radially
  around  the base station at a fixed angular interval of 5 degrees will be shown.
  A 360 degrees area of interest will be defined, along with three band  distances
  - the rate of sampling will be different in each band.

  The paths of the profiles will be shown using ROVER by overlaying the  generated
  IFF  data  on  to  a  plan view of the acceptance DTM.  The first plot shows the
  profiles that were generated between the profile origin and all DTM nodes in the
  rectangular  area  of  interest.   The  second plot shows the profiles that were
  generated radially around the base station at an angular interval of 5  degrees.
  Note  that  the  profiles are clipped to a rectangular area of interest and to a
  circular area of interest.  A variable sample interval was used when  generating
  these  profiles,  with the sample rate being higher towards the edge of the area
  of interest.  This is shown by redrawing the profile lines as symbol strings.

                                                                 [1mPass [ ]/Fail [ ][0m

  The acceptance test proceeds to demonstrate the  use  of  the  module  COVER  to
  derive  visibility information from the DTM.  A visibility map will be generated
  and displayed following the positioning of an observer, and  definition  of  the
  viewing parameters associated with the observer.

  A prepared visibility map generated using a number of observers will be utilised
  to demonstrate the form of the display when dealing with multiple observers, and
  to show how the user may  select  the  visibility  masks  associated  with  each
  observer.

                                                                 [1mPass [ ]/Fail [ ][0m

  The visibility map generated for a single observer will be used  as  input  into
  the  module VECTORISE to demonstrate raster to vector conversion.  The resulting
  link-node structured IFF file will be displayed in ROVER,  superimposed  on  the
  cover, as an accuracy test.

                                                                 [1mPass [ ]/Fail [ ][0m

  Vector to raster conversion is performed by the module I2GRID.   For  acceptance
  an  IFF  file  containing area woodland features, and vector line data on rivers
  and roads will be selected for  conversion.   The  options  in  the  program  to
  determine  the  coding of features in the IFF file, and control of the selection
  of features to be scan converted will be demonstrated.


  [1mTVES[0m [1mAcceptance[0m [1mtests[0m                                                     Page 5


                                                                 [1mPass [ ]/Fail [ ][0m

  The use of the DTM  contouring  utility  DTICONTOUR  will  be  shown  on  a  DTM
  generated  by  package  DTMCREATE.  DTICONTOUR will first be used to contour the
  DTM.  Intermediary and index contours will be generated.  The option to annotate
  the index contours with their height will be selected.  Output will be to an IFF
  file which will be inspected relative to the DTM using ROVER.  You will be asked
  if you want to display the contour map in ROVER.

                                                                 [1mPass [ ]/Fail [ ][0m

  The use of the DTM checking utility DTICHECK will be shown.   DTICHECK  will  be
  used  to  check  the  DTM  for  adjacent  nodes  that  exceed a threshold height
  difference of 50 metres.  Depending on the nature of the terrain surface, such a
  height  difference  may  indicate  errors  in the DTM.  The option to generate a
  ROVER command file should be selected.  You will be asked if you want to display
  the suspect points in ROVER, to which you should answer yes.

  ROVER will be used to view the suspect  points  and  utilise  the  command  file
  produced  by  DTICHECK.   The  command  file  will automatically move the screen
  cursor to the suspect points.  Once the matrix has been drawn on the screen  and
  the prompt [1mEdit>[0m is displayed, type

   [1m@TVES_ACCEPT_DTICHECK[0m 

  The cursor will move to the first suspect point.  It is now possible to  examine
  the  surrounding points to verify that DTICHECK has correctly identified a point
  that exceeds the height difference threshold.  Use the commands [1mUP,[0m  [1mDOWN,[0m  [1mLEFT[0m
  and  [1mRIGHT[0m  to move the cursor by one pixel in the specified direction.  To move
  to the next suspect point type [1mCONTINUE[0m.  This sequence  of  operations  may  be
  repeated until the end of the command file is encountered and to exit from ROVER
  type [1mEXIT[0m.  The command file can be abandoned before completion by  typing  [1mEXIT[0m
  which also exits from ROVER.

                                                                 [1mPass [ ]/Fail [ ][0m

  The facilities available in the  matrix  3-D  viewing  module  DTIVIEW  for  the
  overlay  of  vector map data on a terrain view are accessed via the TVES package
  module DTIVIEWEXTRA.  Acceptance of these facilities will involve generating  an
  isometric  view  (note the option to draw the land surface in just one colour is
  selected), and overlaying the woodland, roads and rivers vector data on to  this
  terrain base.  The facility to deselect and reselect the overlay picture will be
  shown.

                                                                 [1mPass [ ]/Fail [ ][0m

  The ability to interactively edit the DTM will be demonstrated using ROVER.

  As ROVER alters the input DTI file in situ, a copy of the acceptance DTM will be
  used.   Interaction with the grid data via movement of the screen cursor and the
  various modes of editing (ie.  single point, line,  area  and  smooth)  will  be
  shown.   A  number  of edits will be performed on the file.  The screen flooding
  facility will be demonstrated as a  powerful,  user  controlled  DTM  validation
  tool.  The use of the zoom command will be shown.


  [1mTVES[0m [1mAcceptance[0m [1mtests[0m                                                     Page 6


  The commands required for  acceptance  should  be  typed  interactively  at  the
  terminal  following  the display of the matrix as a colour image, and the output
  of the prompt [1mEdit>[0m.

  To interact with the matrix, move the workstation mouse.  As the mouse is moved,
  a  small  black cursor will appear and move across the screen.  The position and
  the height of the point at the current cursor position is shown on the bottom of
  the screen.

                                                                 [1mPass [ ]/Fail [ ][0m

  To edit a single data value, first position the cursor  over  the  point  to  be
  edited; press the lefthand button on the mouse, and then the centre button.  You
  will be prompted for a new data value on the terminal.  Enter  a  value  at  the
  DECterm  window  such  as  100 (any height within the range 0 - 850 is valid) in
  response to the prompt [1mDTI[0m [1mvalue>[0m.  If you now move the cursor you will see  the
  pixel  has  changed  colour,  and  if you revisit the pixel it will now have the
  height you entered.

                                                                 [1mPass [ ]/Fail [ ][0m

  To edit a line of data values, position the cursor over the start of  the  line,
  and  press the lefthand button on the mouse.  To define subsequent points on the
  line, move the cursor over each point in turn, and press  the  lefthand  button.
  Note that a line connecting the points is drawn on the screen.  Press the centre
  button on the mouse to end the line, and in response to the prompt [1mDTI[0m [1mvalue>[0m on
  the terminal, enter the new height value.  All the data points along the defined
  line will be changed to this value.

                                                                 [1mPass [ ]/Fail [ ][0m

  To edit an area of data values, first type [1mAREA[0m in response to the prompt [1mEdit>[0m.
  Define the boundary points of the area to be edited using the lefthand button of
  the mouse (as for the line edit).  To end, press the centre button on the  puck.
  Note  that  it is not necessary for the last point of the area to be the same as
  the first point, the area will be automatically closed by ROVER.  In response to
  the  prompt  [1mDTI[0m  [1mvalue>[0m  on  the terminal, enter the new height value.  All the
  boundary and interior data points of the area will be changed to this value.

                                                                 [1mPass [ ]/Fail [ ][0m

  A smooth edit involves defining two lines  (with  two  different  heights),  and
  calculating  the  heights of intervening data points using linear interpolation.
  Type [1mSMOOTH[0m in response to the prompt [1mEdit>[0m, and using the  lefthand  button  on
  the mouse define the points of the first line.  Use the centre button to end the
  line, and in response to the prompt [1mDTI[0m [1mvalue>[0m on  the  terminal,  enter  a  new
  height  value.   Repeat  this  operation  for the second line, ensuring that the
  points of the second line are defined in the same direction as the points of the
  first  line.   Following  the entry of a height value for the second line, ROVER
  will interpolate the heights of the intervening points.

                                                                 [1mPass [ ]/Fail [ ][0m

  To demonstrate the interactive flooding of the screen image, type  [1mENABLE[0m  [1mFLOOD[0m
  in response to the prompt [1mEdit>[0m.  Make sure that the graphics window is in focus
  by pressing the menu banner entitled "Graphics Window".  If the screen cursor is
  now  moved  up  the  screen,  the area of blue will increase as the land area is


  [1mTVES[0m [1mAcceptance[0m [1mtests[0m                                                     Page 7


  progressively flooded.  When the cursor is at the top of the  screen,  the  land
  area  is  flooded  to  the maximum height.  The height value is displayed at the
  bottom of the screen.  When the cursor is at the bottom of the screen, only  the
  sea  area is shown in blue.  Note that no overlay is unaffected by the flooding,
  and that moving the cursor horizontally across the screen has no effect  on  the
  flooding  level.   Go  back  to  the  DECterm  (find it by pressing Alt+F3 or by
  clicking on the small bar  in  the  top  left-hand  corner  of  the  window  and
  selecting option "Lower").  Type [1mDISABLE[0m [1mFLOOD[0m to return to the edit prompt, and
  redisplay the matrix without any flooding by typing [1mPLANES[0m [1m5[0m.

                                                                 [1mPass [ ]/Fail [ ][0m

  It is possible to zoom the image around the current cursor position.   Move  the
  cursor  to  the  point around which you wish to zoom, and type the command [1mZOOM[0m.
  The matrix will be redisplayed at twice the magnification.  If this  command  is
  now  repeated,  a  further  magnification  factor  is applied.  To return to the
  previous magnification level type the command [1mZOOM[0m [1m0.5[0m

  To exit from ROVER type [1mEXIT[0m.

                                                                 [1mPass [ ]/Fail [ ][0m


  [1mTVES[0m [1mAcceptance[0m [1mtests[0m                                                     Page 8


  [1mOverall[0m [1mPass [ ]/Fail [ ][0m

  [1mComments:[0m





  [1mCustomer[0m [1mRepresentative:[0m                                [1mDate:[0m

  [1mLaser-Scan[0m [1mRepresentative:[0m                              [1mDate:[0m
