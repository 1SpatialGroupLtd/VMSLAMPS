	SUBROUTINE PROMPT
C
***	MODULE	PROMPT
***	IDENT	17MR91
C
C Copyright Laser Scan Laboratories Ltd., Cambridge, England.
C
C To prompt on the terminal
C
	IMPLICIT NONE
C
***	PARAMETER/CMN:STAPAR/
C
***	COMMON/CMN:MODIFY/
***	COMMON/CMN:PROMPT/
***	COMMON/CMN:STATE/
***	COMMON/CMN:WORKS/
C
C This routine is called from the various device dependent INTERACT
C routines to generate the prompt.
C
C Explanation:
C PROING is true if prompting turned on by PROMPT command.
C TTODON is true if terminal output has been performed since last
C	 prompt. It is set in VIO$PUT_OUTPUT (i.e. SRC:TWOPUT.SRC)
C TTIDON is true if terminal input has been received since last
C	 prompt. It is set in INTERACT.
C TTPROM is true if a new prompt is required for other reasons.
C PROINQ is true if an INQUIRE command prompt (PINSTR) is required.
C TTOPRO sets carriage controls in VIO$PUT_OUTPUT (TWOPUT)
C PROSTA controls whether PROMPT STATE (STASTR), or PROMPT TEXT (PROSTR)
C
	IF ((PROINQ.OR.PROING).AND.(TTODON.OR.TTIDON.OR.TTPROM)) THEN
	   TTOPRO = .TRUE.		! set prompt ccs
	   IF (PROINQ) THEN		! it's INQUIRE
	      CALL TTWSTR(PINSTR(1:PRILEN))
	   ELSE
	      IF (PROSTA) THEN
C
C differentiate between MODIFY state, and Compnent Text State
	         IF (SINDEX.EQ.STATE_MODIFY.AND.SUBTXT) THEN
	            CALL TTWSTR(STASTR(1:STALEN)//' (part)>')
	         ELSE
	            CALL TTWSTR(STASTR(1:STALEN)//'>')
	         ENDIF
	      ELSE
	         CALL TTWSTR(PROSTR(1:PROLEN))
	      ENDIF
	   ENDIF
	   TTPROM = .FALSE.		! prompt not wanted now
	ENDIF
C
	RETURN
	END
