!! command file to set operations up for OSTF+ demo on 17-Dec-1987!! initialise%DECLARE INTEGER __SUBSOPT%DECLARE INTEGER __DIGCAPT%DECLARE CHARACTER __SDATE!%TEST $OPTSUBS%THEN %LET __SUBSOPT = -1%ELSE %LET __SUBSOPT = 0%ENABLE SUBSTITUTION!! declare a macro to get survey date%MACRO __GET_SDATE%MESSAGE%PING%INQUIRE __SDATE "Enter survey date of data to be digitised this session: "%ENABLE CONTINUE%OPERATION ADD_FEATURE SURVEY_DATE '__SDATE%TEST $MOANED%JTRUE __GET_SDATE%DISABLE CONTINUE%ENDMACRO!! get digitising code (depends on map scale)%LET __DIGCAPT = 48%TEST $MDSCALE.EQ.1250%THEN LET __DIGCAPT = 56%TEST $MDSCALE.EQ.2500%THEN LET __DIGCAPT = 57%TEST $MDSCALE.EQ.10000%THEN LET __DIGCAPT = 58!! per feature attributes to be added whenever a feature is created!! ask for survey date__GET_SDATE%OPERATION ADD_FEATURE CHANGE_DATE '__SDATE%OPERATION ADD_FEATURE CHANGE_TYPE 50!! per feature attributes to be updated whenever a feature is! geometrically altered%OPERATION GEO_CH_FEATURE CHANGE_TYPE 51%OPERATION GEO_CH_FEATURE CHANGE_DATE --!! per feature attributes to be updated whenever a feature's! code is altered%OPERATION CODE_CH_FEATURE CHANGE_TYPE 53%OPERATION CODE_CH_FEATURE CHANGE_DATE --!! per point attributes to be set by various operations! ! CAPTURE_XY is set by various operations!! digitised code depends on scale of map%OPERATION DIGITISE_POINT CAPTURE_XY '__DIGCAPT!! generated curves%OPERATION CURVE_POINT CAPTURE_XY 62!! offset lines%OPERATION OFFSET_POINT CAPTURE_XY 63!! squared features%OPERATION SQUARE_POINT CAPTURE_XY 64!! part squared features%OPERATION PARTSQ_POINT CAPTURE_XY 65!! generated circle%OPERATION CIRCLE_POINT CAPTURE_XY 66!! points that are moved, remove any Z attribute, and set CAPTURE_XY%OPERATION MOVE_POINT CAPTURE_XY '__DIGCAPT%OPERATION MOVE_POINT Z%OPERATION MOVE CAPTURE_Z!! points inserted at splits, bridges, clipped points%OPERATION BREAK_POINT CAPTURE_XY '__DIGCAPT!! points generated by join%OPERATION BREAK_POINT CAPTURE_XY '__DIGCAPT!! and the fail safe%OPERATION OTHER_POINT CAPTURE_XY 48!! tidy up%TEST __SUBSOPT%ELSE DISABLE SUBSTITUTION!%CANCEL VARIABLE __SUBSOPT%CANCEL VARIABLE __DIGCAPT%CANCEL VARIABLE __SDATE%CANCEL MACRO __GET_SDATE