*************** Another release of version 4.0 of 9-Apr-1992! ****************

 8-May-1992	DOSHOW.SRC		- Clarke Brunt
		SHOW SORT - don't forget the 'sorted by priority' message

 8-May-1992	S_DRAFTR.SRC		- Clarke Brunt
		Pass pack containing actual feature code to STDRAW (not the
		prioritised code, or the text component code), mainly so that
		the feature can be selected for the correct overlay.
		Only other use of the feature code in STDRAW is for the special
		symbol/text drawing routine. This will no longer receive the
		TCC in FC as before, but it will be in FS(1) if required.
		The routines are never passed the prioritised code, but it
		seems unlikely that texts and symbols will ever be multiply
		prioritised. NB prioritised codes do not work for composite
		text, the feature will just be drawn multiply using the TCCs.

22-Apr-1992	Edgematching		- Clarke Brunt
		EDGEXT.SRC Forbid read only features in EDGE EXTEND (previously
		caused IFF 'WRIT' errors).
		EDGMAT,JOITIE,FIND,NDTIE.SRC Forbid attempt to EDGE JOIN
		read only features (previously caused errors).
		EDGEMATCH TIE now allows one feature of the pair to be
		read only.

*************** Another release of version 4.0 of 6-Apr-1992! ****************

 8-Apr-1992	MOTIF version	- Clarke Brunt
		GKSMOTIFLIB LSG_FILL_RECTANGLE amended - had got y
		upside down so that OVERLAY ERASE didn't work

*************** Release of version 4.0 of 6-Apr-1992 ****************

30-Mar-1992	GETVERSION.SRC	- Clarke Brunt
		V4.0 with two spaces after it (in case we need to patch
		in -1 etc.)

30-Mar-1991	DISTANCE		- Clarke Brunt
		New command DISTANCE [ABSOLUTE/RELATIVE] d, EXAMINE
		DISTANCE, and system variable $DISTANCE. Distance along
		line for linear and arc features.

24-Mar-1992	SHMENU,PRMACR.SRC etc.	- Clarke Brunt
		SHOW MENU was difficult to abort with CTRL/C because
		it tended to only abort the printing of an individual
		macro, and then went on to the next one anyway.
		Arrange that it gives up properly.

24-Mar-1992	New abort facility	- Clarke Brunt
		Digit at start of string sent to abort mailbox means...
		0 - as for ordinary CTRL/C
		1 - only abort commands such as DRAW, not command reading
		2 - abort e.g. DRAW and then command reading as well
		No digit is equivalent to 0.

20-Mar-1992	SHOW PLOT command	- Clarke Brunt
		New command SHOW PLOT.

20-Mar-1992	PLOT command	- Clarke Brunt
		New command PLOT SEPARATOR ESCAPE n, sets a PLOT ESCAPE to
		do between priority layers when plotting. It is set to its
		default value of 1 by PLOT LOAD. The idea is to cause plotter
		to begin a new opaque layer, or whatever. The default (1)
		will do for the plotters which support this - if it causes
		an error with any plotter GKS, the use PLOT ESCAPE 0 to
		switch off.

20-Mar-1992	EXPVAR.SRC	- Clarke Brunt
		Change the space in a positive E exponent to a '+', so that
		the value does not appear as two variables when used as
		a macro parameter.

17-Mar-1992	all INTERACTs	- Clarke Brunt
		Trigger on CTRL/C (or something in ABORT mailbox). Previously
		the CTRL/C would just be stored up until a command was
		given, which would then be ignored.

17-Mar-1992	INIT, INIT_TABLE, HADCTRLC, DOWAIT - Clarke Brunt
		Clear the CTRL/C event flag (CLCFLG) so that it
		can sensibly be waited for in INTERACT. Also cancel
		timer in DOWAIT - a side effect of this is that a
		WAIT timer terminated prematurely by CTRL/C does not
		terminate a later wait when it finally goes off.

16-Mar-1992	DOCREA,ABORTAST.SRC, SECOND.MAR	- Clarke Brunt
		New command CREATE ABORT_MAILBOX [name], creates a mailbox
		called 'name' or LSL$LITES2ABORT if absent. When anything
		is written to the mailbox, LITES2 treats it as though CTRL/C
		has been pressed, and outputs whatever was sent after the
		'Operation aborted' message.

 2-Mar-1992	SECOND.MAR	- Ron Russell
		New command SHOW FC_PRIORITIES - shows the drawing
		priorities set up in the FRT. If argument is present
		gives data for the way that that fc will be drawn

27-Feb-1992	OVERLAY_PLANE_SELECT.SRC,DISP_RAS.SRC	- Ron Russell
		Stop SUBRNGs when using debug versions of these routines
		whilst testing WKAC(3 - WKID) - WKID may not be < 2 !

27-Feb-1992	FLVIEW,DOSORT,DRAWSAV,DRAFTR,BLKDAT.SRC etc	- Ron Russell
		Allow use of drawing priorities out of the FRT

21-Feb-1992	DOINQU.SRC	- Clarke Brunt
		Correct code which attempts to allow a blank string to
		be input for a character INQUIRE. It worked if the default
		prompt was used, but with a user supplied prompt, it thought
		that the variable type was that of the last INQUIRE with
		a default prompt.

21-Feb-1992	DOSPAW.SRC (and MOTIF:DOSPAW.SRC)	- Clarke Brunt
		Cancel terminal read in 'wait' variety of SPAWN so that the
		spawned command can read the terminal without requiring a line
		to be typed first.

14-Feb-1992	INIT.SRC	- Ron Russell
		Use logical name to get lengths of drawing buffers.

14-Feb-1992	STDRAW.SRC	- Ron Russell
		These routines affected by changes to CMN:STDBFC.CMN,
		making arrays virtual memory arrays, got at initialistaion

13-Feb-1992	DOWIND.SRC,DRAWFL.SRC,VIEW_PALETTE.SRC,
		VIEW_RENDER_DO.SRC	- Ron Russell
		These routines affected by changes to CMN:STDBFC.CMN,
		making arrays virtual memory arrays, got at initialistaion

11-Feb-1992	NDJOIN,NDTIE,NDMEND,ABAMND.SRC	- Clarke Brunt
		Maintain visibility of end segments, which were sometimes
		made visible, depending on the direction of the various
		features. Affects JOIN, TIE, MEND, EDGEMATCH.

10-Feb-1992	SECOND.MAR,ASKSTRING.SRC	- Ron Russell
		New command ASK STRING ISDATETIME which returns a -1
		in $ASK_INT 1 if string represents a valid date time 
		string, and 0 otherwise.

10-Feb-1992	MACMEN.PAR,INIT.SRC,and lots more	- Ron Russell
		Make number of macros and menu squares depend on logical names
		LSL$LITES2_MACROMAX and LSL$LITES2_MENUSQUAREMAX
******		NOTE: defaults have reduced from 1200 to 600, and
******                                      from 1000 to 500 respectively.
******		 NON-COMPATABLE change

 6-Feb-1992	GETVERSION.SRC	- Ron Russell
		On to development version (X4.0)

 4-Feb-1992	SECOND.MAR, DOASK.SRC	- Ron Russell
		New secondary command ASK LEGEND_SIZE to get legend if
		it is drawn now.

 3-Feb-1992	SECOND.MAR,DOANNO.SRC,SETANNO	- Ron Russell
		New command ANNOTATION WIDTH to set the thickness of annotation
		(in screen mm)

30-Jan-1992	GENAUX.SRC,OFFTXT.SRC,DOPARA,STDRAW	- Ron Russell
		Allow bit 14 in flags word of FRT to make features non-
		zooming (like annotation). They are drawn at the mm size
		in the FRT on the screen, and do not zoom. (Text sizes stored
		in IFF file similarly are converted to screen mm).
		(Works for line thickness and area fill line spaceing as well).
		Offsetting and Paragraphing texts (and symbols) ignores
		this bit, so that same IFF position is written to file
		no matter how much zoomed in we are.

29-Jan-1992	TSTCPU.SRC	- Ron Russell
		Check SID correctly for CPU type - look at top 8 bits
		rather than top 4. This meant that license for 750 woould
		work on a Vaxstation 4000 model 60

28-Jan-1992	INIT.SRC	- Ron Russell
		Make number of variables depend on a logical name
		LSL$LITES2_VARIABLEMAX 
******		NOTE: default has reduced to 200 from 1000. NON-COMPATABLE
******		      change

28-Jan-1992	REGPAR.PAR	- Ron Russell
		Increase number of regions from 10 -> 32

28-Jan-1992	IMAGE.CMN	- Ron Russell
		Increase number of image bands from 10 -> 32

28-Jan-1992	SYSVAR.MAR, VALVAR.SRC	- Ron Russell
		New System variables 
		$IMAGE_RANGE_ZMIN n
		$IMAGE_RANGE_ZMAX n
		$FILESELECTED

27-Jan-1992	PARAJUST.SRC, PARAFILL.SRC	- Ron Russell
		Deal with text components that are single spaces (SPR 1362)

24-Jan-1992	TRIMSTR.SRC	- Ron Russell
		Do not produce zero length strings (SPR 1362)

24-Jan-1992	IFFBDY.SRC	- Ron Russell
		Replace empty strings in composite texts by spaces (SPR 1362)   

24-Jan-1992	GETVERSION.SRC	- Ron Russell
		Back to development version (X3.6)
		
*************** Another release of version 3.5 of 25-Sep-1991! ****************

21-Nov-1991	QIOUP,INIT.SRC		- Clarke Brunt
		Do not use the IO$M_ESCAPE QIO modifier for aux channels,
		or for SYS$INPUT if it is a mailbox. Escape sequences were
		not used on aux channels anyway, and the modifier becomes
		illegal for mailboxes as of VMS 5.5

22-Oct-1991	LITES2_GEOG_ROUTINES.EXE		- Ron Russell
		Relinked with new GCTPLIB, to correct problems with
		Transverse Mercator on a sphere, and Van der Grinten
		projection (SPR 1355) - see LSLMAINT release notes

22-Oct-1991	GEOG_TRANS.SRC	- Ron Russell
		Pass the first correct version of the map descriptor that
		we got, rather than the last one that we read

1-Oct-1991	GETVERSION.SRC	- Clarke Brunt
		Back to development version (X3.6)

*************** Release of version 3.5 of 25-Sep-1991 *************************

25-Sep-1991	DOCREA.SRC		- Clarke Brunt
		New command CREATE LOGICAL (name).

25-Sep-1991	EXCEPTION.SRC		- Clarke Brunt
		Cause any ROPRAND which is not floating point to signal
		once, then debug (e.g. from INSV) rather than just
		exit immediately.

24-Sep-1991	DOCHAN.SRC		- Clarke Brunt
		New FSN required if CHANGE MAP applied to symbol/text.

19-Sep-1991	LSR stuff		- Clarke Brunt
		Use new routine to get enumerated values for parameters

19-Sep-1991	GKSMOTIFLIB		- Clarke Brunt
		Cope with bit images pixel replicated by more than x32 -
		previously produced a ROPRAND (which our exception handler
		does not handle - believing it to be a floating point ROPRAND).

 9-Sep-1991	DOMACR,INIMEN.SRC	- Clarke Brunt
		Allow a macro or menu name which is ambiguous between two
		existing ones to be added. This is no different to allowing
		a new macro which is an abbreviation of an existing one,
		which has always been allowed.

 1-Aug-1991	STREND.SRC		- Clarke Brunt
		Add support for maintaining pattern phase through
		invisible segments to rendering.

 1-Aug-1991	STDRAW,STREND.SRC	- Clarke Brunt
		Correct curve drawing when there are invisible segments
		(SPR 1261), particularly consecutive invisibles (in general
		if some segments were closed loops and others were not, then
		INTERP was called incorrectly, causing chaos). Save previous
		LOOP setting in STDRAW and STREND.

 9-Jul-1991	GEN_REG_CRNR.SRC	- Ron Russell
		Correct bug that error in generating buffer zone, in
		some circumstances

10-Jun-1991	SETANNO.SRC		- Clarke Brunt
		Treat WINDOW in the same way as in DODRAW and FLVIEW with
		IMAGE SETUP so that annotations plot in the same place as 
		the data.

 9-Jun-1991	FLVIEW.SRC,SETANNO.SRC	- Clarke Brunt
		Avoid possibility of plot area not being set correctly,
		most likely if autoscaling.

 9-Jun-1991	PLOT_DO.SRC	- Clarke Brunt
		Allow plotting with no other displays (MOTIF version) but
		you have to have DECW$DISPLAY assigned (as anything) if
		overlays are to be created.
		PLOT OPEN is now invalid in INTIIAL state (it always was
		nonsense do do it in INITIAL state).

30-May-1991	DISP_RAS.SRC	- Clarke Brunt
		If plotting, then may fail to compute position of image
		correctly (especially if more than one image, or plotted
		picture has not just been 'drawn', and for certain image
		'corners'. This was patched into V3.4

28-May-1991	Ref. man. - Clarke Brunt
		Change format of TOL CIRGEN to give parameters as 'a b c'
		rather than just 'real'.

22-May-1991	MOTIF	- Clarke Brunt
		Change in GKSMOTIFLIB - allow to continue with no PIXMAP
		if cannot be created by X-Server. Expose events will not
		re-draw though unless done locally.

22-May-1991	VIEW_GENERATE_PARAMETERS.SRC	- Ron Russell
		Add IMAGE_CORNER and IMAGE_DIRECTION to argument
		list of VISA_SETUP_DTI_VALUES.

		NOTE: NEED TO SUPPLY NEW VIEWSHR with new versions of LITES2
		============================================================

21-May-1991	MOTIF	- Clarke Brunt
		Change in GKSMOTIFLIB - avoid potential access violation
		if a screen menu box is probed before it is fully
		initialised.

21-May-1991	FILTF.SRC	- Clarke Brunt
		Initialise HADFST and GOT_FILT_FST to .FALSE.
		Bug was that after first feature, features were not
		recognised as closed and hence tended to be opened
		by filtering. SPR 1203

21-May-1991	DOIMAG.SRC	- Clarke Brunt
		For DTI files, in the absence of a projection record,
		take origin and sample interval from header. SPR1199

20-May-1991	Motif		- Clarke Brunt
		Avoid "colormap" errors on mono display. New logical
		LSL$DECW_INVERT - use colours in reverse order. Also
		changes to GKSMOTIFLIB (8 plane) for ROVER.

15-May-1991	IFFHDR.SRC	- Ron Russell
		Use first map with a good map descriptor as the descriptor
		of the LITES2 space for projection purposes. Any maps with
		unset descriptors use this space. Any maps with descriptors
		different to this give a warning, but do not prohibit the
		use of GEOGRAPHICAL commands.

15-May-1991	SECOND.MAR, FIDLAY.SRC	- Ron Russell
		FIDUCIAL LAYER command now takes optional string argument
		(previously compulsary). If argument is absent - all
		currently set registration layers are cleared.
		NOTE that this gives the user the possibility of cancelling
		layer 0 (the default) as a registration layer.

30-Apr-1991	STDRAW.SRC			- Clarke Brunt
		If BOXOPT, then draw box even if there is a user text
		drawing routine. If BLAOPT, then blank area as well as
		calling the routine.
		These are incompatible, but obviously users need not
		enable the options.

26-Apr-1991	SIG6000:FLOAD.SRC		- Clarke Brunt
		Correct problem since new FRTLIB of -32768 in TRITAB for
		invisible vectors. Caused fonts not to download to Sigmex
		correctly (ENABLE HWTEXT). Also longstanding problem that
		caused each character to be downloaded once for each
		component in it - should speed it up! Patched in V3.4.

18-Apr-1991	ACEDT.SRC			- Clarke Brunt
		Call MODCHK to perform a GENAUX on texts and symbols.
		Previously editing ACs of a text or symbol could result
		in it being sectored and drawn with the size and rotation
		of the last symbol/text processed, though the data in the
		IFF file was OK.

 9-Apr-1991	SECOND.MAR, ASK_STRING.SRC	- Ron Russell
		New command ASK STRING TEXT_SIZE - This is SPR from Hydro
						 - I can't find the number yet

 9-Apr-1991	GETVERSION.SRC	- Ron Russell
		Back to development version (X3.5)

*************** Release of version 3.4 of 26-Mar-1991 *************************

Don't forget:
MOTIF solid filled area hatch spacing

16-Mar-1991	various INTERACTs, DOINQU.SRC	- Clarke Brunt
		Allow blank line in INTERACT if prompting for INQUIRE
		(or interactive HELP perhaps?). DOINQU however will
		re-prompt after a blank line, except for character
		variables. Add proper prompt for Double variables -
		previously INQUIREing for a double caused disaster.

15-Mar-1991	INPUT.SRC	- Clarke Brunt
		Execute the AFTER INPUT command if ENABLE CONTINUE, even
		if there was an error during input

12-Mar-1991	MOTIF:		- Clarke Brunt
		LSCR.SRC - compute extra refresh colours for secondary
		as well as primary (both for LSCR - WORK COL, and LSCRS -
		overlay update)

 7-Mar-1991	VIEWFTR.SRC	- Ron Russell
		Use new optional argument to FRTFND to suppress messages
		and so get rid of FRIGG_FRTFND

 1-Mar-1991	DODRAW.SRC,DRALAB.SRC etc	- Ron Russell
		New command DRAW NUMBERS - like draw mark, but draws
		point numbers - SPR 493

27-Feb-1991	SECOND.MAR, OS_MH_UPDATE.SRC etc	- Ron Russell
		New commands OPERATION OS_MH_TEXTCAT and CANCEL OS_MH_TEXTCAT

26-Feb-1991					- Clarke Brunt
		New commands PLOT ANNOTATION PLOT/SCREEN - annotation
		on plots is scaled as mm on plot (default), or in the
		same proportion as it was on the screen.

26-Feb-1991	SETANNO.SRC			- Clarke Brunt
		Avoid inability to set correct overlays planes and offset
		in hardcopy plot (patched in PUBLIC LITES2 some time ago)

15-Feb-1991	STDRAW,STDBFF.SRC			- Clarke Brunt
		Maintain pattern phase through invisible segments if
		FRT flag bit 10 (FRTCLP) is set.

14-Feb-1991	INISCL,FLVIEW,DRWIFF,SETANNO.SRC	- Clarke Brunt
		Call SRIUNI with new argument. Should allow hatch
		thickness and spacing in symbols and texts to be
		set correctly.

14-Feb-1991	ASKSTRING.SRC	- Ron Russell
		New command ASK STRING ANNOTATION SIZE

14-Feb-1991	DOANNO.SRC, SHANNO.SRC	- Ron Russell
		New commands ANNOTATION ANGLE and ANNOTATION LOCATION
		to set up text for drawing commands through DRWCURSPOS

		NOTE: In process of this: INCOMPATABLE CHANGE to DRAW
		TEXT, DRAW POSITION, DRAW GEOG etc.. Locating point of
		text is only offset from bounding box of symbol if
		there is an ANNOTATION OFFSET. Offset is from approriate
		side of bounding box - if negative x from LHS, negative y
		from bottom, positive x from RHS , positive y from top. 

		NOTE THAT ZERO OFFSETS ARE NOT OFFSET FROM CURSOR POSITION
		(used to be offset to top right of bounding box)

14-Feb-1991	VALVAR.SRC, SYSVAR.MAR	- Ron Russell
		New system variable $GEOG_STRING, which returns the
		geographical position (latitude and logitude) of the cursor
		as a string.

13-Feb-1991	D14SBX.SRC	- Ron Russell
		When removing redundant points at start and end of features
		allow 1 redundant point to be removed at start.


 9-Feb-1991			- Clarke Brunt
		Change as required to suit new FRTLIB which only has
		pointers to various things in the common blocks, rather
		than the things themselves. Everything in FRTLIB can
		now be increased by setting LSl$FRT_xyzMAX logical names.

 9-Feb-1991			- Clarke Brunt
		Increase max number of menu squares to 1000 (from 900),
		and max number of pucks from 5 to 7. To allow for...
		New puck on device 0 - keyboard function buttons.

 6-Feb-1991	DOBASE.SRC	- Ron Russell
		Sort longstanding bug - when squaring to base(s) the
		direction of the base was sometimes significant.
		If features were squared to a base - if the base was
		reversed the features were not squared (and vice versa)

28-Jan-1991	SETANNO.SRC	- Clarke Brunt
		Fix problem with annotation on plots. If drawn before
		draw screen, then scaling was often wrong.

24-Jan-1991	DOOVER.SRC	- Clarke Brunt
		Allow OVER BACKDROP and OVER COLOUR to accept HLS and
		HSV in addition to RGB.

23-Jan-1991	SHLIC.SRC	- Ron Russell
		Increase the types of CPU that LITES2 knows about.
		Unfortunately, I can think of no automatic way of doing
		this; if some system service comes out that goes from
		a SID to a string, please let me know!

23-Jan-1991	INIT.SRC			- Ron Russell
		Use system services routine to get name of computer

22-Jan-1991	DOWORK.SRC			- Clarke Brunt
		On creation of first overlay (WORK OVER), then reduce
		number of planes on the display if a DISPLAY COLOURS
		command has been used. (As is done by DISPLAY CREATE
		for displays 3 and 4). This will for instance allow
		SAVE LUT to save a colour table with the limited number
		of colours specified.

18-Jan-1991	DRWIFF,FLVIEW,SETANNO.SRC	- Clarke Brunt
		When hardcopy plotting, set SCLDIS and NOMLW to values
		appropriate for the plot, and reset afterwards. This is
		to get line thickness correct on plots.

18-Jan-1991	DODRAW.SRC		- Clarke Brunt
		Preserve setting of WINDOW when doing DRAW SCREEN with hardcopy
		plotting on. Otherwise with IMAGE SETUP in force, WINDOW became
		altered to the image window (i.e. it altered).

17-Jan-1991	KRISS.SRC		- Clarke Brunt
		Add the AST argument to DSR_START to get ENABLE KRISS
		REGISTRATION working. This has been wrong for all LITES2
		since V3.0. Mention in 3.4 notes, despite the fact that it
		was slipped into 3.3 release somewhat late.

11-Jan-1991	MOTIF version		- Clarke Brunt
		The V3.3 beta version of LITES2MOTIF was patched to fix
		the problem below with ANNOTATION OVERLAY.

 4-Jan-1991	CHPART.SRC		- Clarke Brunt
		SPR from OS is on its way.
		Correct 3D MOVE of linear features when the initial cursor
		position has a Z, but the final position doesn't. The
		intention was to leave the Zs unchanged, but it actually
		added the initial Z to all coordinates. Workrounds include
		ensuring initial and final Zs the same, or undefining initial
		Z before MOVE.

 4-Jan-1991	SETANNO.SRC		- Clarke Brunt
		Get non-zero ANNOTATION OVERLAY to work properly when
		hard copy plotting.

 4-Jan-1991	STDRAW.SRC, STREND.SRC	- Clarke Brunt
		SPR 1036, treat FRT offset line as sheet mm, not IFF units.

20-Dec-1990	DSR/KRISS images	- Clarke Brunt
		These were published today, having been forgotten for ages.
		The new versions were required to work with any LITES2 after
		V3.0. Mention in 3.4 notes, despite the fact that they
		were slipped into 3.3 release somewhat late.

20-Dec-1990	various.SRC		- Clarke Brunt
		Distinguish point and area type pixels in images.
		Previously, for LSI and area type LSR, LITES2 added half
		a pixel size to the origin so that it could then treat
		them as point type. The half pixel is now added internally,
		so that the origin displayed by SHOW IMAGE, or set by
		IMAGE ORIGIN is not amended. This change is incompatible
		with the old behaviour only if the IMAGE ORIGIN command
		is given for LSI files.
		SHOW IMAGE now displays the pixel type.

17-Dec-1990	STRECT.SRC	- Ron Russell
		Only output ST entries (not ZS) when generating a rectangle
		without ENABLE Z. (cf POLYGON command) - SPR 1032

30-Nov-1990	PICT_DO.SRC	- Clarke Brunt
		PICTURE ROTATE 0 now cancels the transformation completely
		(as does IMAGE SETUP # ABANDON), rather than setting a
		transformation of 0 degrees (which is less efficient).

29-Nov-1990	MOTIF version	- Clarke Brunt
		Fix bug in GKSMOTIFLIB which caused occasional slow
		drawing of bit image files.

28-Nov-1990	LSR files	- Clarke Brunt
		New command IMAGE LSR opens an LSR type image file. The
		LSR shareable image is first mapped on logical name
		LSL$LSRSHR. The LSR filename is parsed against LSL$LSR:.
		No file extension should be given - the image comprises
		several files with different extensions.
		DOIMAG,DISP_RAS,ADJUST,SHIMAG,IMAGEPIXEL amended to
		deal with the new image type.
		Also DRAW LSR.
		DRWDTI and DRWLSI combined into DRWIMG (including
		new LSR stuff).
		Up to 8 LSR files should be able to be accessed at once
		(provided no DTIs or LSIs in use).

13-Nov-1990	UIS version	- Clarke Brunt
		New logical names LSL$UIS_HW_FILL and LSL$UIS_RESOLUTION
		control GKSUISLIB. See LSLMAINT or PLOTTING release notes.
		New VAXstation User Guide includes these (already issued
		to Customer Services).
		
13-Nov-1990	GETVERSION.SRC	- Clarke Brunt
		Back to development - X3.4
		
*************** Release of version 3.3 29-Oct-1990 ***************************

23-Oct-1990	VALVAR.SRC,SYSVAR.MAR	- Clarke Brunt
		Add $ABSX and $ABSY, double absolute cursor position.

22-Oct-1990	various.SRC	- Clarke Brunt
		Added labels (.label: at start of command, JUMP .label).
		New command ABORT ALWAYS (default secondary), as for
		ABORT TRUE and FALSE.

22-Oct-1990	PINREG.SRC	- Ron Russell
		Correct bug, where vertices with y value equal to y
		value of point were ignored, causing region checking
		to fail ( SPR 956). Bug introduced in version 3.1

17-Oct-1990	mail message from Tim Adams
		
		Due to SPR no 875 i've had to modify the lites2
		acceptance test - it has now been raised to issue 2.6 of
		17-oct-1990.  The change was necessary because section
		2.4 suggested that "DI G" was unambiguous for  "DISABLE
		GRAPHICS".  I've changed the entry to read "DISA G".

		Please put an entry into the v3.3 Release Notes so that
		users are advised why it is necessary to have a modified
		ATP schedule.

16-Oct-1990	INIT.SRC, IFFHDR.SRC, OS_MH_SET_FLAGS.SRC	- Ron Russell
		DOOPER.SRC
		Allow setting of flags in new type OS map headers.
		Note that the flags in the new headers must be the same
		as for MH type 2 - ie 8 characters - no matter what the
		lookup table says.

15-Oct-1990	SYSVAR.MAR, VALVAR.SRC	- Ron Russell
		New system variable $OPTPSIZE

11-Oct-1990	ABANDN.SRC			- Clarke Brunt
		SETING = .FALSE. when returning to READY state. Problem
		was that after PICTURE SETUP#ABANDON, then END or ABANDON
		from a WINDOW command would return to SETUP state rather
		than READY - as a work round, a ZOOM command would stop
		this behaviour.

11-Oct-1990	(UIS & MOTIF) STDINI.SRC	- Clarke Brunt
		Perform DISMOD(0) if WKAC(2) as well as WKAC(1). Problem
		was that redrawing with ENABLE SECONDARY and SUPPRESS
		PRIMARY did nothing.

11-Oct-1990	DRWIFF.SRC	- Ron Russell
		Don't set variable CUST; this should just be set in IFFHDR
		(and then is only really useful if only one map is read in:
		 as it is used by the MARGIN command - but nobody has
		 complained yet!!!)

10-Oct-1990	STDRAW.SRC		- Clarke Brunt
		Do not reset the plane selections if called from
		DRWFEAT - bug was that DRAW FEATURE on features with
		than 200 points did not draw into the ANNOTATION OVERLAY,
		but just used the ANNOTATION COLOUR, potentially writing
		into one or more other overlays.

10-Oct-1990	USER.CMN,USER.SRC etc	- Ron Russell
		New user routine USRGMH to retrieve (and optionally
		write back) a map header and map descriptor. This is
		called after USRINI, if USRINI returns a code > 100
		(the difference between 100 and the return code indicates
		the map number). It returns the same return codes as
		USRINI. There are arguments to say if the map header
		and map descriptor are to be written back. Only the
		same number of bytes may be written back.

 9-Oct-1990	VIEW_RENDER_DO	- Jon Barber
		Passes parameters for all selected DTI images to VISALIB
		before rendering
		Checks if image outside view window before rendering

 3-Oct-1990	SECOND.MAR	- Ron Russell
		New command ASK STRING FILE_FIND - that returns a completed
		file name (using LIB$FIND_FILE). Context searches are
		done if the file specification contains a wildcard (ie
		"*" or "%")

 3-Oct-1990	DOIMAG.SRC	- Clarke Brunt
		Forbid IMAGE STEP 0.0, which would cause division by zero
		when drawing the image.

20-Sep-1990	TRNTIP.SRC	- Ron Russell
		Correct bug (introduced in version 3.2) that caused
		positioning with table cursor after a OS Setup, to 
		divide by 0, and always position to 0,0
		(Patched in some of V3.2 images)

17-Sep-1990	SETCOL.SRC	- Ron Russell
		Always draw in line style 1, no matter what line
		style has been set up by FRTFND

11-Sep-1990	SYSVAR.MAR,VALVAR.SRC,OVERLAY_PLANE_SELECT	- Ron Russell
		GET_OVERLAY_PLANE
		New system variable $OVERLAY - returns overlay that
		current feature will be drawn in (0 if feature is not
		OVERLAY SELECTED)

10-Sep-1990	ILITES2.COM	- Ron Russell
		Include definition of "MAKE"; GOTHIC uses a different
		MAKE

10-Sep-1990	MACMEN.PAR	- Ron Russell
		Increase number of user defined macros available from
		500 to 1200

10-Sep-1990	MAPS.CMN, OPENIF.SRC, CLOSIF.SRC	- Ron Russell
		Save status of LPOSF when closing files, so that it can
		be reset when files are reopened. Not doing this caused
		a IFF NF errors (and subsequent problems) when files were
		closed midway through a construction.

29-Aug-1990	DOCHAN,CHPART,CHANGE,NDSTCN.SRC	- Clarke Brunt
		CHANGE FSN and CHANGE MAP on linear type feature now updates
		the maximum FSN for the map, ditto CHANGE FSN for symbol/text.
		It is now possible to CHANGE FSN to the same FSN as a feature
		has already, provided that a CHANGE MAP (whilst in a COPY
		or MODIFY sequence) has been done already.

24-Aug-1990	VARIABLE.CMN		- Clarke Brunt
		Increase number of user variables from 500 to 1000

22-Aug-1990	SYSVAR.MAR, VALVAR.SRC	- Ron Russell
		New system variable $GT_FC

13-Aug-1990	GETVERSION.SRC	- Ron Russell
		Now LITES2 v3.2 published, back to development version (X3.3)

10-Aug-1990	MOTIF:GKSMOTIFLIB	- Clarke Brunt
		Avoid integer overflow in LSG_FILL_RECTANGLE called from
		OVERLAY CLEAR in LITES2 when zoomed in quite a lot.

18-Jul-1990	EVAL.SRC,FUNC.MAR	- Ron Russell
		Add functions LN (LOG e) and LOG (LOG 10).

18-Jul-1990	CLASSIFY.SRC	- Clarke Brunt
		Correct bug introduced on 16-Feb-90 whereby byte pixel
		values outside IMAGE RANGE were displayed in their
		original pixel value rather than 0.

18-Jul-1990	DOINQU.SRC,UIS:INTERACT,MOTIF:INTERACT	- Clarke Brunt
		Use a 3D position when tracking the cursor during an
		INQUIRE if appropriate (only with DSR). Also ensure that
		the latest position is used if the response to the INQUIRE
		is pressing a button which tracks.

17-Jul-1990	IMAGEPIXEL.SRC	- Clarke Brunt
		Pixel value from LSI file was wrong pixel (one off
		in the y direction). This affected $IMAGEVALUE,
		$IMAGEASPECT, and $IMAGEGRADIENT.

 9-Jul-1990	DOSUPP.SRC	- Ron Russell
		New command SUPPRESS CLEAR (for non-segmented displays)

 6-Jul-1990	SYSVAR.MAR etc	- Ron Russell
		new system variables
		$P,		FI	; macro argument
		$PLINE			; all macro arguments
		$PCOUNT			; number of macro argument
		$IMAGE_RANGE_XMIN, FI	; min x of specified image
		$IMAGE_RANGE_XMAX, FI	; max x of specified image
		$IMAGE_RANGE_YMIN, FI	; min y of specified image
		$IMAGE_RANGE_YMAX, FI	; max y of specified image
		

 6-Jul-1990	SECOND.MAR etc	- Ron Russell
		New commands OVERLAY ERASE
		             AFTER ABORT

 5-Jul-1990	GETVERSION.SRC	- Ron Russell
		Back to VERSION X3.2 !!!!!!!!!!!!!!!!!!!!!!!!!!!!

 5-Jul-1990	PRIME.MAR,SECOND.MAR,DOABOR.SRC etc	- Ron Russell
		New commands ABORT INPUT - return to interactive input
		             ABORT TRUE  - jump to end of macro/line if TRUE
		             ABORT FALSE - jump to end of macro/line if FALSE
		             ABORT FILE  - jump to end of file
		             ABORT RESPOND - synonym for CANCEL RESPOND

 3-Jul-1990	CHKCHS.SRC,DOPRIO.SRC,OS_MH_SET_FLAGS.SRC	- Ron Russell
		Allow 8 bit ASCII characters - equivalence an integer
		onto a byte and assign ICHAR() to this integer

27-Jun-1990	GETVERSION.SRC	- Ron Russell
		Get ready for release of version V3.2 !!!

27-Jun-1990	DOCREA.SRC	- Clarke Brunt
		New command CREATE MEMORY n, reserves n pages of memory in
		the LIB$GET_VM_PAGE pool. The idea is to preallocate all that
		LITES2 will need for its dynamic purposes, so that mapped files
		can be mapped and unmapped willy-nilly at the top of the
		address space without leaving holes.

26-Jun-1990	USER.CMN	- Ron Russell
		New entry point in user routines - USRDEF - which is called
		after USRRET and allows a value of a variable to be set.
		After it has been called, USRRET is called again.

22-Jun-1990	DIG2PT.SRC	- Ron Russell
		Correct long standing bug (of at least 4 years) that meant
		that SETUP TWO did not work with more than 1 maps.

21-Jun-1990	various.SRC	- Clarke Brunt
		DTI files are now subsampled if necessary (up to a
		maximum of taking every 1024th pixel) in order to attempt
		to fit the required area onto the screen. In the case of
		DRAW DTI (which previously drew 1 pixel per screen pixel),
		either subsampling or zooming is used to draw the image
		as large as possible into the display.
		In the case of LSI files, subsampled views continue to be
		used only if they are present in the file.
		If an image is drawn with ENABLE DIAGNOSTICS on, then a line
		of information including a view number (1 for all pixels, 2
		for every 2nd pixel etc.) and a zoom factor (how many screen
		pixels per image pixel) is printed. The zoom factor in brackets
		is the desired factor before adjusting to an integer.

21-Jun-1990	SECOND.MAR	- Ron Russell
		New commands SETUP CANCEL and SETUP MAP to cancel all maps
		to be setup, and to add a map to the list to be setup
		SETUP INITIAL returns to default mode after a SETUP CANCEL

20-Jun-1990	VALVAR.SRC	- Ron Russell
		New system variable $IMAGENAME n

19-Jun-1990	SYSVAR.MAR, VALVAR.SRC	- Ron Russell
		New system variables $ASK_CHAR n
		                     $ASK_INT  n
		                     $ASK_REAL n
		These are filled in by the ASK command.
		NOTE: $TABLEXY is now a synonym for $ASK_REAL
		      $MAP_NUMBER is now a synonym for $ASK_INT 1

		Also new commands ASK RGB
		                  ASK CHARACTER
		                  ASK IDENTIFIER
                                  ASK STATUS MACRO
                                  ASK STATUS VARIABLE
                                  ASK STRING ASCII
                                  ASK STRING COLLAPSE
                                  ASK STRING COMPRESS
                                  ASK STRING DCLSYMBOL
                                  ASK STRING ELEMENT
                                  ASK STRING EXTRACT
                                  ASK STRING INDEX
                                  ASK STRING ISALPHA
                                  ASK STRING ISDIGIT
                                  ASK STRING ISINTEGER
                                  ASK STRING ISREAL
                                  ASK STRING LEFT
                                  ASK STRING LENGTH
                                  ASK STRING LOWERCASE
                                  ASK STRING NO_DOLLAR
                                  ASK STRING PAD
                                  ASK STRING PARSE
                                  ASK STRING RIGHT
                                  ASK STRING TRIM
                                  ASK STRING TRNALL
                                  ASK STRING TRNLNM
                                  ASK STRING UPCASE
		

14-Jun-1990	SYSVAR.MAR, VALVAR.SRC	- Ron Russell
		New system variable $MAPSTATUS

12-Jun-1990	SYSVAR.MAR	- Ron Russell
		New system variables -$MODTEXT, $MODTEXTLEN, $FILEOPEN
		and $CONSTRUCTION_GT

 8-Jun-1990	SHOPTI.SRC	- Ron Russell
		This has been scrambled a bit - 2 IFFMAPs and no PSIZE!!!

 5-Jun-1990	FINREC.SRC, VLDSEC.SRC	- Ron Russell
		Only scan sectors not implicated by a CUT REGION when
		doing straight FIND. Previously features that cut regions
		could not be found far from the region

 5-Jun-1990	SCNSEC.SRC	- Ron Russell
		Only optimise region scanning when SELECT window is on

 4-Jun-1990	FLVIEW.SRC,LABVIEW,VIEWVIEW	- Ron Russell
		Check CTRL/C every sector while SAVEDPing, so that
		Ac selections etc can be stopped

31-May-1990	SYSVAR.MAR	- Ron Russell
		New system variables $RANGE_XMIN, $RANGE_XMAX,
		$RANGE_YMIN and $RANGE_YMAX, give input range
		of maps (not current range!) in LITES2 coordinates

29-May-1990	PRTSEC.SRC	- Ron Russell
		LSLLIBise - code from FLWOPN not checked properly

29-May-1990	OPEN_FFILE.SRC	- Ron Russell
		Pass file opening routines correct number of arguments -
		this caused system error messages not to be output
		correctly

25-May-1990	AREA.SRC,SECREG.SRC	- Ron Russell
		Increase precision of arithmetic by using a local origin
		for calculation of area

23-May-1990	IFFHDR.SRC	- Ron Russell
		Don't set MD_OK until the end of the routine, so that
		map with wrong MD will not affect use of GEOG commands
		if the map is not accepted for some other reason

23-May-1990	DOREMO.SRC	- Ron Russell
		Output a LITES2 message when trying to edit a read only
		map rather than IFFLIB error messages! (check for map
		being read only)

22-May-1990	TRANSFORM.CMN, IFFHDR.SRC,GEOG_TRANS.SRC	- Ron Russell
		Make sure projection parameters are reinitialised on
		return to INITIAL state, so that when maps on a different
		projection are read in, SHOW GEOG and GEOGRAPHICAL commands
		will work on new maps.

21-May-1990	DOSEAR.SRC,FIND.SRC	- Ron Russell
		Ensure that we have an end pack, if doing a SEARCH LAST
		with linear features. NOTE: ENABLE ENDS HAS NO EFFECT
		ON CIRCLE ARCS - SHOULD IT HAVE?

14-May-1990	SYSVAR.MAR, VALVAR.SRC and others	- Ron Russell
		New system variables $EXIT_RANGE - the (range of the
		last map output)

 9-May-1990	NDBEND.SRC	- Ron Russell
		Stop sign extension of unsigned byte when assigning to
		an integer. (SPR 764) This meant that bending texts with
		characters > ascii 127 did not work, as indexing width
		arrays went wrong.

 4-May-1990	NDSTAR.SRC, DOEND.SRC, USER.SRC	- Ron Russell
		Allow User routines to end a feature with an invisible
		move. Normally we can't end a feature with an invisible
		move because we don't have a command, but there is now
		no philisophical problem about such features (since
		EDIT VISIBILITY)

 2-May-1990	SYSVAR.MAR,VALVAR.SRC	- Ron Russell
		New system variables $PID and $UIC

29-Apr-1990	SECOND.MAR,DOOPER.SRC etc- Ron Russell
		New command OPERATION OS_MH_HEAD

26-Apr-1990	DVAR.CMN,DTYPED.CMN	- Ron Russell
		Increase stack limit to 20 and number of typed lines
		held to 12

25-Apr-1990	ABANDN.SRC	- Ron Russell
		Allow ABANDON to be valid in INITIAL state

25-Apr-1990	DOREMO.SRC	- Ron Russell
		Set EDITED flag when FLAGS enabled.

19-Apr-1990	OPTION.CMN,TOGGLE.SRC,SHOPTI.SRC,READ_MAP,VALVAR.SRC,
		BLKDAT.SRC,IFFHDR.SRC,MAPS.CMN etc	- Ron Russell
		New command ENABLE SAME_REVISION
		New system variable $IFF_REVISION n for revision level of
		input file (work instruction w90/19)

10-Apr-1990	SETANNO.SRC	- Ron Russell
		Call LUWK to flush out buffers for annotation display
		(particularly for additional displays in MOTIF)

10-Apr-1990	FLVIEW.SRC	- Ron Russell
		Change call to LUWK to update KRISS menu, to a WKID
		of MAXDISP + 1 (was WSMAX + 1). Alter LUWK for UIS and
		MOTIF to correspond

 4-Apr-1990	UIS:LITSRI.SRC	- Ron Russell
		MOTIF:LITSRI.SRC
		Draw on KRISS before transforming coordinates for any
		SETUP that is required		

1-Apr-1990	DRWLSI.SRC	- Clarke Brunt
		Open LSI files readonly and not global using
		AREA$USER_OPEN_GENERAL. This matches the change in
		DOIMAG done some time ago.

30-Mar-1990	DODRAW.SRC	- Ron Russell
		New command DRAW FEATURE

29-Mar-1990	STSYTX.SRC	- Ron Russell
		Always clear list of packs of features that are to be
		deleted when an editing operation (on texts) has been
		completed.
		Before, this list was not cleared for symbols, so that
		when the symbol edit was completed, disaster (of one 
		form or another) struck. This could take the form of
		texts being deleted, or a more disatrously, access
		violations or internal checking errors.

24-Mar-1990	DOSAVE.SRC etc.	- Clarke Brunt
		INCOMPATIABLE CHANGE - SAVE LUT now saves the hexadecimal
		type of LUT (default filespec LSL$LITES2CMD:---.COL), while
		SAVE COLOURS saves the LCM type (as SAVE LUT used to do).
		SAVE COLOURS, LUT, and DISPLAY now produce an informative
		message saying what file is being written.

23-Mar-1990	LITES2.HLP	- Clarke Brunt
		$MHARR was in the help as REAL rather than INTEGER.

23-Mar-1990	DOCREA.SRC	- Clarke Brunt
		CREATE MAILBOX now takes either an integer (create and read
		from LSL$LITES2AUX[_n]) or a string (just create mailbox
		named 'string'). The latter is intended e.g. to be used
		via LITES2's FILE commands.
		Attempts to CREATE MAILBOX n where the mailbox is already
		in use now give up, rather than continuing, after writing
		the error message.

23-Mar-1990	FIND.SRC	- Clarke Brunt
		FIND on the line segment joining two STs, but within the
		find tolerance of the second point, would set the ST pointer
		incorrectly, so that HAULIN would generate a vertex number
		corresponding to the first point of the previous ST, so
		ON, NEXT, PREVIOUS etc. would then behave strangely.

20-Mar-1990	DOREGI.SRC	- Ron Russell
		New command REGION n ZONE r - to generate buffer zones
		Also REGION n BOX   - to generate a box from the bounding
		box of a feature

 6-Mar-1990	NDSTCN.SRC, 	- Ron Russell
		When outputting a text, check for the case of single
		text component code being different from
		the FC. Alter the FC to the text component codes.

		DOCHAN.SRC, DELCTX.SRC	- Ron Russell
		Remove the above action from these routines. Note that
		this is a slightly incompatable change in that the message
		comes out at a different time. Also CHANGE TCC on composite
		texts in MODIFY state, does not alter FC.

28-Feb-1990	TEK4100:T4100LIB.OLB
		Correct WSCR routine (pen definitions) for Westward.
		Caused highlighted features is disappear (thick line
		was not being used).

27-Feb-1990	FLUSH.SRC	- Ron Russell
		Check that points are in valid sector. This was a bug
		introduced in version 3.1. It manifest itself when
		features were transformed outside the limits of the
		LITES2 area - causing an access violation.

16-Feb-1990	DOIMAG.SRC			- Clarke Brunt
		Open LSI files readonly and not global. This will allow
		the same LSI file to be accessed by more than one user,
		and will protect the LSI file against accidental
		modification by LITES2.

16-Feb-1990	CLASSIFY,IMAGEPIXEL.SRC		- Clarke Brunt
		Treat byte DTI as unsigned (0 to 255 rather than -128 to 127).
		Affects classification (IMAGE STEP, BAND etc.) and system
		variables $IMAGEVALUE, $IMAGEGRADIENT, $IMAGEASPECT.

16-Feb-1990	USER.SRC	- Ron Russell
		Avoid INTEGER overflow, when constructing features
		had FC(n) set to a number larger than 32767

15-Feb-1990	NDWIND.SRC	- Clarke Brunt
		WINDOW now draws correct area even when using IMAGE SETUP.
		There has been a problem for some time with this.
		NB Rubber box may not be satisfactory if IMAGE SETUP
		is used to rotate the vector data by large amounts.

 6-Feb-1990	SETANNO.SRC	- Ron Russell
		Set SETUP (for image setup) FALSE, if drawing into
		subsidiary window. Otherwise the drawing (particularly
		in display limits coordinate space) goes to pot

 2-Feb-1990	mar:OVERLAY_DUMMY.MAR, [-.tek_args]TEK_ARGS_DUMMY.MAR
		[-.sig6000]SIG600_OVERLAY_DUMMY.MAR	- Ron Russell
		Include dummy entry points for LSG_SET_PATTERN and
		GGDP that are called from FRTLIB for hardware that
		can do patterened lines.

 2-Feb-1990	CUTREG.SRC			- Ron Russell
		Include line thickness when doing "box tests" for
		intersections of lines. This caused a problem when
		regions were rectangular and features had points lying
		on the region. SPR 660

26-Jan-1990	SAVSEL.SRC etc.			- Clarke Brunt
		New command SAVE SELECTIONS macroname [option...]
		Save selections (MAPS, LAYERS, FCS, FSNS) in a macro.
		Default option is ALL, otherwise a list of the above.

26-Jan-1990	IMAGENUMBER.SRC			- Clarke Brunt
		Transform cursor position if IMAGE SETUP has been used,
		so that $IMAGEVALUE (and GRADIENT,ASPECT,NUMBER) work
		properly.

17-Jan-1990	COUNT_CHAR.SRC, NDBEND.SRC	- Ron Russell
		Access TRIWID with correct second index. This is TRIFNT(font),
		not just font. Caused error if fonts were not numbered
		1,2,3,4 etc.

12-Jan-1990	LEGEND_BLOCK.SRC	- Ron Russell
		Use TXTBUF to write out strings, rather than EXPDSC, as
		when a FRTLIB error occurred EXPDSC is corrupted writing
		out the error message.
		Don't stop writing values because of a FRTLIB error
		SPR 653

10-Jan-1990	NEW_MAP.SRC	- Ron Russell
		Position cursor correctly in centre of area just read in
		when LL corner of range is not 0,0

10-Jan-1990	uis:INTERACT.SRC	- Ron Russell
		allow Tracking areas to work on BITPAD - stopped working
		with PRIORITY POSITION command

 9-Jan-1990	GETVERSION.SRC	- Ron Russell
		Back to development - X3.2
		
*************** Release of version 3.1  8-Jan-1990 ***************************

Updates to 8-Jan-1990 renamed as UPDATES.015
