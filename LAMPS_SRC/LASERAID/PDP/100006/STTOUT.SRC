	SUBROUTINE STTOUT
C
C Copyright Laser-Scan Laboratories Ltd,Cambridge,England
C
C Author M.C.Fulford
C
C	Created 11/June/80
C
C	Output timing statistics, via message system, to another
C task for processing.
C
***	COMMON/PARAMS/
C
	PARAMETER SNDGO  = 1
	PARAMETER SNDTIM = 2
	PARAMETER SNDEND = 3
C
***	COMMON/TIMING/
C
C
	INTEGER SNDBUF(13)	! message buffer
	INTEGER INTGER(2)	! for conversion
	REAL REAL
	INTEGER DSTTSK(2)	! destination task name
C
	EQUIVALENCE (INTGER(1),REAL)
	DATA DSTTSK/3RLTT,3R.../
C
C start our task
	CALL REQUES(DSTTSK,,IDS)
	IF (IDS .LT. 0) GOTO 40
C send a filename
	SNDBUF(1) = SNDGO
	CALL EXPAND('%WELA.LOG',SNDBUF(2))
	CALL SEND(DSTTSK,SNDBUF(1),,IDS)
	IF (IDS .LT. 0) GOTO 20
C send timing info
	DO 10 I = 1,MAXTIM
	  SNDBUF(1) = SNDTIM
	  SNDBUF(2) = I
	  REAL = TIMING(I)
	  SNDBUF(3) = INTGER(1)
	  SNDBUF(4) = INTGER(2)
	  CALL SEND(DSTTSK,SNDBUF(1),,IDS)
	  IF (IDS .LT. 0) GOTO 20
10	  CONTINUE
C
	GOTO 30
C error
20	CALL WRITEF('SEND failed - error code %N.',IDS)
C finish
30	SNDBUF(1) = SNDEND
	CALL SEND(DSTTSK,SNDBUF,,IDS)
	RETURN		! ignore errors here
C
40	CALL WRITEF('Can''t REQUEST %5%5, error code %N.',
     *                DSTTSK(1),DSTTSK(2),IDS)
	RETURN
	END
