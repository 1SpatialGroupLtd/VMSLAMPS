	INTEGER*4 FUNCTION NXTCOM
C
***	MODULE	NXTCOM
***	IDENT	20FE86
C
C Copyright Laser-Scan Laboratories Limited, Cambridge, England.
C
CMOD	Converged				 DM	20-Feb-1986
CMOD	T E X T C changed			AJW	01-Jul-1981
CMOD	NLNKC changed to LNKCNT as in LNKCOM	AJW	21-May-1981
CMOD	Tidied, and description added		AJW	11-May-1981
C	Created 				MCF	17-May-1977
C
C Gets the next command from keyboard, function buttons or macro.
C
**	IF VAX
	IMPLICIT NONE
**	ENDC
C
C parameters:
***	PARAMETER/PARAMS/
C
C common blocks:
***	COMMON/LNKC/
***	COMMON/MASTER/
***	COMMON/SCOTS/
***	COMMON/TXTC/
C
C function:
	INTEGER RDCOMM
C
C ......................................................................
C
	IF (CODPOS.GT.0) GO TO 10
C
C ... textual or FB command.
	NXTCOM=RDCOMM(LNKCM(1),.FALSE.)
	GO TO 40
C
C ... stored command.
10	NXTCOM=MCCODE(CODPOS).AND.'77777'O
	IF (NXTCOM.EQ.0) GO TO 30
	NUMINT=0
	INTARG=0
C
	IF ((MCCODE(CODPOS).AND.TOPBIT).EQ.0) GO TO 20
	NUMINT=1			! integer argument
	INTARG=MCNUMB(CODPOS)
C
20	CODPOS=CODPOS + 1
	GO TO 40
C
C ... end of table - back to terminal.
30	DCPTR=-1
	TXTPTR=-2
	CODPOS=0
40	RETURN
	END
