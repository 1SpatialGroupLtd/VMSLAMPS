	SUBROUTINE PTRECN(LREC)
C
***	MODULE	PTRECN
***	IDENT	07DE87
C
C Copyright Laser-Scan Laboratories Limited, Cambridge, England.
C
CMOD	Converted for TRIEDIT			TJH	07-Dec-1987
CMOD	Message standardised			 DM	23-Jul-1984
C	Standardised				TJH	25-May-1984
C
C Return a record to the free chain. IPSTCK is presently set to
C the number of next available record, so reduce by one, and
C check for jumping off the top of the stack. LREC is the released
C record number.
C
C Parameters:
	INCLUDE 'LSL$CMNTRIEDIT:TRIEDITMSG.PAR'
C
C Common:
	INCLUDE 'LSL$CMNTRIEDIT:DATQ.CMN'
	INCLUDE 'LSL$DTMCREATESYS:MESSAGE.CMN'
C
C ......................................................................
C
C Reduce the number of the stack pointer
	IPSTCK=IPSTCK-1
C
C Check for an error condition (IPSTCK must not be 1 or less as
C the first record is reserved)
	IF (IPSTCK.LE.1) THEN
	   CALL LSL_GETMSG(TRIEDIT__STACKRET,MESSAGE,MESLEN)
	   CALL ALARMS(1,0,MESSAGE(1:MESLEN)//' - PTRECN')
	ELSE
C
C Return the record
	   ISTACK(IPSTCK)=LREC
	ENDIF
	RETURN
	END
