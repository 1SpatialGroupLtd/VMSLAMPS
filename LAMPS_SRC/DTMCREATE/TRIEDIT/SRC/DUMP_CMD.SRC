	SUBROUTINE DUMP_CMD(IZOOM)
C
***	MODULE	DUMP_CMD
***	IDENT	03FE89
C
C Copyright Laser-Scan Laboratories Limited, Cambridge, England.
C
C 	Created						TJH 22-Dec-1987
C
C Routine to create DUMP files. TXTBUF is scanned for a user specified
C file-spec to use. If absent, then the input file-spec is used instead.
C
	IMPLICIT NONE
C
C Arguments:
	INTEGER		IZOOM	! zoom flag
C
C Parameters:
	INCLUDE 	'LSL$DTMCREATESYS:MESPAR.PAR'
C
C Common:
	INCLUDE 	'LSL$CMNTRIEDIT:FILNMS.CMN'
	INCLUDE 	'LSL$DTMCREATESYS:MESSAGE.CMN'
	INCLUDE 	'LSL$CMNLSL:TXTC.CMN'
C
C W/s
	INTEGER		I	! temp var
	LOGICAL		OK	! function return
	BYTE		CH	! a character
	CHARACTER*100	DEFNAM	! default device/directory for filename
C
C Functions:
	INTEGER		GETFILNAM ! reads file-spec
	LOGICAL		TRNALL	! translate logical name
	LOGICAL		RDCHS	! read character from line
	LOGICAL		SIGCHS
C
C ......................................................................
C
	IF (RDCHS(CH)) THEN      ! was a filename supplied as an arg.
	   NEWSAV=.FALSE.	 ! (reset only if good name supplied)
	ELSE 			 ! filename supplied, don't use default
	   CALL BSCH
	   IF (.NOT.TRNALL('LSL$DTMCREATE_WORK',DEFNAM)) THEN
	      DEFNAM='SYS$DISK:[]'
	   ENDIF
	   OK=GETFILNAM(SAVTIT,
     &			SAVLEN,
     &			DEFNAM(1:SIGCHS(DEFNAM))//'.DTA',
     &			.TRUE.,
     &			' ')
	   IF (OK) THEN
	      CALL STR$UPCASE(SAVTIT,SAVTIT)
	   ELSE
	      CALL OUTOPT('%S reading DUMP file-spec',ERROR)
	      CALL LSL_GETMSG(OK,MESSAGE,I)
	      CALL OUTOPT(MESSAGE(:I))
	      GOTO 10
	   ENDIF
C
C Tell WINDUP to use supplied name
	   NEWSAV=.TRUE.
	ENDIF
	CALL WINDUP(.FALSE.)
C
C Get the screen back
	CALL UPDATE(2,IZOOM)
10	RETURN
	END
