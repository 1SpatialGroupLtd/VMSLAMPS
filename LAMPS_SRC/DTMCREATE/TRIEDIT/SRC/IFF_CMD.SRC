	SUBROUTINE IFF_CMD(IZOOM)
C
***	MODULE	IFF_CMD
***	IDENT	29FE88
C
C Copyright Laser-Scan Laboratories Limited, Cambridge, England.
C
C 	Created						TJH 22-Dec-1987
C
C Routine write data structure back to IFF format.
C
	IMPLICIT NONE
C
C Arguments:
	INTEGER		IZOOM	! zoom flag
C
C Parameters:
	INCLUDE 	'LSL$DTMCREATESYS:MESPAR.PAR'
C
C Common:
	INCLUDE 	'LSL$CMNTRIEDIT:FILNMS.CMN'
	INCLUDE 	'LSL$DTMCREATESYS:MESSAGE.CMN'
	INCLUDE 	'LSL$CMNLSL:TXTC.CMN'
C
C W/s
	INTEGER		I	! temp var
	LOGICAL		OK	! function return
	BYTE		CH	! a character
C
C Functions:
	LOGICAL	RDCHS		! read character from line
	INTEGER	GETFILNAM	! reads file-spec
C
C ......................................................................
C
	IF (RDCHS(CH)) THEN     ! was a filename supplied as an arg.?
	   NEWIFF=.FALSE.       ! (reset only if good filename supplied)
	ELSE			! filename supplied, don't use default
	   CALL BSCH
	   OK=GETFILNAM(IFITLE,IFTLEN,'LSL$IF:IFF.IFF',.TRUE.,' ')
	   IF (.NOT.OK.OR.ITLEN.LT.0) THEN
	      CALL OUTOPT('%S reading IFF file-spec',ERROR)
	      CALL LSL_GETMSG(OK,MESSAGE,I)
	      CALL OUTOPT(MESSAGE(:I))
	      GOTO 10
	   ENDIF
	   CALL STR$UPCASE(IFITLE,IFITLE)
	   NEWIFF=.TRUE.	  ! tells WINDUP to use supplied name
	ENDIF
C
	CALL WINDUP(.TRUE.)
C
C Get the screen back
	CALL UPDATE(2,IZOOM)
C
C Set interactive storage still full
10	RETURN
	END
