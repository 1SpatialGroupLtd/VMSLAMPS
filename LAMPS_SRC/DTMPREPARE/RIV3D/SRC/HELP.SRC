	SUBROUTINE HELP(CMD)
C
***	MODULE HELP
**	IDENT 16AP86
C
C	Copyright Laser-Scan Laboratories Ltd., Cambridge, England
C
C	Created					TJH 	16-Apr-1986
C
C Routine to give help with RIV3D commands.
C
	IMPLICIT NONE
C
C integers:
	INTEGER*4       CMD     ! decoded command number
	INTEGER*4       TEXLEN	! length of user requested string
C
	BYTE		CH	! for decoding user requesrted string
C
	LOGICAL		EOLN	!  "	"	"	"	"
C
	CHARACTER*80	LINE	! the users requested string
C
C functions
	INTEGER		LIB$PUT_OUTPUT
	EXTERNAL	LIB$PUT_OUTPUT
	LOGICAL		RDCH
C
C ......................................................................
C
C Check that the user has not asked for help on PANACEA or RIV3D as
C these will have to be treated separately.
C
	TEXLEN=0
	GOTO (10, 10, 20, 10), CMD+1
C
C As the subject of interest to the user is not PANACEA or RIV3D 
C add these keywords to the start of the string to be searched for in
C the help library LSL$LIBRARY:PANACEA.HLB
10	LINE='PANACEA RIV3D'
	TEXLEN=13
	GOTO 30
C
C The user is interested in PANACEA
20	LINE='PANACEA'
	TEXLEN=7
C
C Decode TXTBUF 
30	EOLN = RDCH(CH)
	IF (.NOT.EOLN) THEN
40	  TEXLEN=TEXLEN+1
	  LINE(TEXLEN:TEXLEN) = CHAR(CH)
	  EOLN = RDCH(CH)
	  IF(.NOT.EOLN.AND.CH.NE.13)GOTO 40  ! use everything up to <CR>
	ENDIF
C
C Check that no arguments were supplied at all. If so, give some
C general help on RIV3D
	IF (TEXLEN.EQ.0) THEN
	   LINE='PANACEA RIV3D'
	   TEXLEN=13
	ENDIF
C
	CALL LBR$OUTPUT_HELP(LIB$PUT_OUTPUT,	! output_routine
     &                       ,			! output_width
     &                       LINE(1:TEXLEN),		! line_descr
     &                       'LSL$HELP:PANACEA',! library_name
     &                       0,			! flags
     &                       )			! input_routine
C
C	Output a blank line to separate prompt from help text.
	CALL WRITEF(' ')
	RETURN
	END
