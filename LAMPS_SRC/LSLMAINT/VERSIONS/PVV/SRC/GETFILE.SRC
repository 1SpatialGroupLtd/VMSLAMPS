	SUBROUTINE GET_FILE(TITLE, PROMPT)
C
***	MODULE GET_FILE
***	IDENT 10JL81
C
	IMPLICIT CHARACTER*1 (A-Z)
C
C Copyright Laser Scan Laboratories Ltd., Cambridge, England
C Author R. Fairbairns
C
C Coded July 1981
C
C To read a file title from the CIL
C
	CHARACTER*(*) TITLE, PROMPT
C
C TITLE is to hold the title on exit
C PROMPT is for the call to TXTCML
C
C private TXTC
***	COMMON/TXTC/
C
C w/s
	INTEGER*2 IERR
C
C function called
	INTEGER*2 TXTCML
C
C get command input
10	TXTPTR = TXTCML(PROMPT)
	IF (TXTPTR .GT. 0) GOTO 20
	IF (TXTPTR .EQ. 0) GOTO 10
C
C error: diagnose unless EOF
	IF (TXTPTR .NE. -10) CALL WRITEF
     &     ('Command line error %N', TXTPTR)
	CALL EXIT
C
C got input - set up and read title
20	CALL BSLN
	CALL RDFILT(TITLE, LEN(TITLE), 'TEST',
     &              .FALSE., .FALSE., .FALSE., IERR)
	IF (IERR .LT. 0) GOTO 30
C
C success - patch title length
	CALL CHSTR_LEN(TITLE, IERR)
	RETURN
C
C failure in title read - diagnose
30	CALL WRITEF('Bad file title - error %N', IERR)
	CALL EXIT
C
	END
