	LOGICAL FUNCTION CLOSE_IFF_FILE( RA_POSN, NO_POSN, CP_POSN )
C
***     MODULE CLOSE_IFF_FILE
***     IDENT  26SP91
C
C Copyright Laser-Scan Laboratories Ltd, Cambridge, England
C
C Author	TJ Ibbs, 6 October 1987
C
C CLoses the IFF file, updating the RAnge and NO
C
CMOD	also updates the CP entries			SG	25-SEP-1991
CMOD	moved code to update RANGE and CP entries to UPDATE_IFF_FILE
C							SG	26-sep-1991
C
	IMPLICIT NONE
C
C Arguments
C
	INTEGER		RA_POSN		! the position of the RA entry
	INTEGER		NO_POSN		! and the NO entry
	INTEGER		CP_POSN		! and the CP entry
C
C Message definitions
C
	INCLUDE 'HERE:NTF2IMSG.PAR'
C
C Common files
C
	INCLUDE	'LSL$CMNIFF:IFFHAN.CMN'
C
	INCLUDE	'LSL$CMNLSL:FILENAME.CMN'
	INCLUDE	'HERE:FILENAME.CMN'
C
	INCLUDE	'HERE:COMMANDS.CMN'
	INCLUDE	'HERE:NTFDATA.CMN'
	INCLUDE	'HERE:LUNS.PAR'
C
C functions
	LOGICAL		UPDATE_IFF_FILE
C
C Workspace
	LOGICAL		OK
C
C##############################################################################
C
	CALL IFFUNO(NO_POSN)			!update the NO entry
	CALL IFFEO				!close the layer
	CALL IFFEM				!finish the map
	CALL IFFEJ				!last entry in IFF file
	OK = UPDATE_IFF_FILE(RA_POSN, CP_POSN)	!update RA,CP
	CALL IFFCLO(IFFLUN)			!always close the file
C
C###############################################################################
C finished
C
	CLOSE_IFF_FILE=OK
	RETURN
	END
