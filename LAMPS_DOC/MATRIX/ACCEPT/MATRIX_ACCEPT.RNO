.!** Qume page format
.LEFT MARGIN  0
.RIGHT MARGIN 80
.PAGE SIZE    60,80
.FLAGS BOLD
.ENABLE BOLD
.KEEP

.!** title page
.FIGURE 14
.CENTRE ;^*Laser-Scan Ltd.\* 
.FIGURE 2
.CENTRE ;^*MATRIX - Acceptance Tests\*
.FIGURE 2
.CENTRE ;^*Issue 2.3 (mod)  01-October-1992\*

.FOOT
.NOFILL
Copyright (c) Laser-Scan Ltd 1988
"MATRIX Acceptance"				Category: Acceptance Tests

Issue 1.0	D R Catlow 			23-July-1987
Issue 2.0       D R Catlow                      14-March-1988
Issue 2.1       T J Hartnall,D R Catlow         26-May-1988
Issue 2.2       D R Catlow                      11-June-1988
Issue 2.3       D R Catlow                      03-October-1988
Issue 2.3 (mod) K M Sutherland			01-October-1992
.FILL
.END FOOT
.TITLE ^*MATRIX Acceptance tests\*
.PAGE
.PAGE
.HL 1 ^*Introduction\*

.P 0;This document describes the acceptance test procedure for the Laser-Scan
Package MATRIX.

.P 0; MATRIX is a package of utilities that operate on data held in a
Laser-Scan DTI (Digital Terrain Image) format.  The utilities allow the
manipulation (eg. rotation ), and viewing of grid data.  The package includes
a 3-D viewing module DTIVIEW, and the modules DTI2TEXT, DTICOMBINE, DTIEDIT,
DTIROTATE, DTIBLEND, DTITILE, DTICONVERT and DTIPATCH. All modules will be
demonstrated as part of acceptance.

.HL 1 ^*Overview\*

.P 0;For the purpose of acceptance, 2 geographically adjoining DTMs will be
used.  These will be combined into a single DTM during acceptance.  In
addition, 2 matrices with edge discontinuities are provided for the 
acceptance of the module DTIBLEND.

.P 0;Acceptance will be performed using a supplied DCL command procedure to
invoke the modules of the package.  The command procedure is invoked by
typing ^*_@LSL$COM:MATRIX__ACCEPT\*

.P 0;A Laser-Scan supported colour display and a hardcopy line printer are
required for the full testing of the MATRIX package. You will be asked to 
confirm that graphical output is to a VAX workstation, and if you are using a 
4 plane graphics screen. You should answer no to this question if you are on 
a normal 8 plane graphics screen.  

.HL 1 ^*Description_ of_ Acceptance_ Procedure\*

.P 0;Acceptance for DTITILE is carried out first.
 
.P 0;Acceptance of DTITILE begins by viewing the 2 input DTI files on the
graphics device using DTIVIEW. The quarter screen and isometric 3-D viewing
options will be used for this purpose.  It should be noted that the files
adjoin geographically. 

.P 0;DTITILE will be used to produce a single DTI file from the 2 input files.
The output file will be  viewed in DTIVIEW using a full screen and the
isometric view operation to confirm the successful merging, and correct
geographical position of the data. 

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;The use of the editor DTIEDIT will be demonstrated on the merged DTI file.
A copy of the file will be taken before calling DTIEDIT since any edits are
performed 'in situ'. 

.P 0;Interaction with the displayed grid data via the keypad keys ie. movement
of the screen cursor around the display and the various modes of editing
(ie.single point, line and area) will be shown.  A number of edits involving
changes to the data values, will be performed on the file. Output of a small
part of the matrix in a classified form to a line printer (if available) will
be demonstrated. 

.P 0;For acceptance of DTIEDIT, commands must be entered interactively at the
terminal.  In response to the prompt ^*DTIEDIT>\* first type ^*FILEIN
MATRIX__ACCEPT__COPY<CR>\* to select the input DTI file.  Type ^*SHOW FILE<CR>\*
to print details derived from the header of the DTI file. Type ^*ENABLE
EDIT<CR>\* so that the matrix values can be subsequently edited. Type
^*CHANGE<CR>\* to display the data in a classified form (as a series of
characters) on the screen. A different character is used for each separate
value step. Character ^*A\* is used to represent a value at the bottom of the
range; character ^*Z\* to represent a value at the top of the range. 

.P 0;Following the display of the matrix on the screen, the keypad keys (on
the right of the keyboard), may be used to move the screen cursor around the
display, and to edit the matrix data.

.P 0;Repeatedly pressing the keypad key ^*6\* will move the cursor to the
right; pressing the keypad key ^*8\* will move the cursor up; pressing
the keypad key ^*2\* will move the cursor down, while pressing the keypad
key ^*4\* will move the cursor to the left. The z value at the cursor
position is displayed on the bottom of the screen, and will change as the
cursor is moved.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;To edit a single matrix point to a new value, press the keypad key ^*-\*.
You will be prompted for a z value.  Enter a new value using the numeric
keyboard keys. For example type ^*700<CR>\*. Move the cursor away and back 
again, to check this value.  

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;To edit a line of values, press the keypad key ^*.\* and then use the 
keypad key ^*8\* several times to pull out a line in reverse video.  Press the keypad
key ^*-\*, and enter a new value in response to the prompt on the terminal. 
Press ^*<CR>\*. Note that all matrix points along the line are changed to this value.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;To edit an area of values, press the keypad key ^*.\* and then use the
keypad keys ^*8\* and ^*6\* to pull out an area in reverse video.  Press the
keypad key ^*-\*, and enter a new value in response to the prompt on the
terminal. Press ^*<CR>\*. Note that all matrix points in the selected rectangle are changed to
this value. 

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;To exit from screen mode, and return to the ^*DTIEDIT\* prompt, 
type ^*Ctrl/Z\* (hold down the Ctrl key and type Z).  

.P 0;If a line printer is available, then acceptance proceeds by outputting a
classified listing of the matrix to the lineprinter.  Type ^*PRINT 100
100<CR>\* to output 100 columns and 100 rows of the matrix to the printer. 

.P 0;Type ^*EXIT<CR>\* to exit from DTIEDIT.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;Acceptance of the module DTIBLEND is carried out next. DTIBLEND will be
used to edge match 2 input DTI files to avoid value discontinuities at the
matrix adjoining edge. Both the input DTI files are smoothed in-situ to a
common mean along the adjoining edge. 

.P 0;The module DTIEDIT will be used to examine each of the input files in
turn.  To examine the first input file, type the following commands in
response to the prompt ^*DTIEDIT>* 
.NOFILL
.BL
^*FILEIN MATRIX__ACCEPTL<CR>\*
^*ORIGIN 80 1<CR>\*
^*CHANGE<CR>\*
.BL
.FILL

.P 0;The matrix will now be displayed on the screen as a series of characters.
The edge which is to be blended is on the right of the screen.  Move the
cursor to the righthand column by repeatedly pressing the keypad key ^*6\*.
Move the cursor vertically up this column by repeatedly pressing the keypad
key ^*8\*, or vertically down the first column by repeatedly pressing the
keypad key ^*2\*. The height of the matrix node at the current cursor position
will be shown on the bottom of the screen.  Note a few x,y,z values along the
edge so that they can be compared with the file resulting from the blend
process. 

.P 0;To exit from DTIEDIT type ^*Ctrl/Z\* (hold down the Ctrl key and type Z),
and then in response to the ^*DTIEDIT>\* prompt type ^*EXIT<CR>\*. 

.P 0;The second input file should be similarly examined using DTIEDIT.
Type the following commands in response to the prompt ^*DTIEDIT>* 
.NOFILL
.BL
^*FILEIN MATRIX__ACCEPTR<CR>\*
^*ORIGIN 1 1<CR>\*
^*CHANGE<CR>\*
.BL
.FILL

.P 0;The edge which is to be blended is on the left of the screen.  Examine
and record a number of x,y,z values along this edge using the keypad keys
^*8\* and ^*2\*. This allows comparison with the file resulting from the
blend process.

.P 0;To exit from DTIEDIT type ^*Ctrl/Z\* (hold down the Ctrl key and type Z),
and then in response to the ^*DTIEDIT>\* prompt type ^*EXIT<CR>\*. 

.P 0;After examining the pre-blended files, DTIBLEND will now be used to
blend the DTI files to the mean Z values along the common edge.

.P 0;DTIEDIT should again be used to examine each blended file in turn, in
order to confirm the success of the blend operation. To examine the left side
of the join, type the following sequence of commands in response to the prompt
^*DTIEDIT>\*. 
.NOFILL
.BL
^*FILEIN MATRIX__ACCEPTL__BLENDED<CR>\*
^*ORIGIN 80 1<CR>\*
^*CHANGE<CR>\*
.BL
.FILL

.P 0;The edge that has been blended is on the right of the screen.  Examine and
record the x,y,z values along this edge using the keypad keys ^*8\* and ^*2\*
that correspond to the ones previously recorded for the unblended lefthand
edge. Compare the two sets of z values.

.P 0;To exit from DTIEDIT type ^*Ctrl/Z\* (hold down the Ctrl key and type Z),
and then in response to the ^*DTIEDIT>\* prompt type ^*EXIT<CR>\*. 

.P 0;To examine the right side of the join, type the following sequence of
commands in response to the prompt ^*DTIEDIT>\*. 
.NOFILL
.BL
^*FILEIN MATRIX__ACCEPTR__BLENDED<CR>\*
^*ORIGIN 1 1<CR>\*
^*CHANGE<CR>\*
.BL
.FILL

.P 0;The edge that has been blended is on the left of the screen.  Examine and
record the x,y,z values along this edge using the keypad keys ^*8\* and ^*2\*
that correspond to the ones previously recorded for the unblended righthand
edge. Compare the two sets of z values.

.P 0;To exit from DTIEDIT type ^*Ctrl/Z\* (hold down the Ctrl key and type Z),
and then in response to the ^*DTIEDIT>\* prompt type ^*EXIT<CR>\*. 

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;The module DTICOMBINE will be used to compare the edited DTI file with
the original. Differences between the values in the 2 files, will be output to
a 'differences' DTI file.  This file will be converted to a text format and
printed on the screen using DTI2TEXT in the next stage of acceptance. 

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;DTI2TEXT will be used to convert the DTI binary data in the 'differences'
file to an ASCII representation.  The window option in the program will be used
to restrict this operation to a small part of the DTI file.  The text file
will be listed on the terminal screen.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;The edited DTI file will be used as input to DTIROTATE. DTIROTATE will
be used to modify the header to indicate to subsequent programs that the data 
should be interpreted as rotated by 90 degrees so that the columns and rows
are transposed.  DTIEDIT will be used to confirm the successful rotation of
the matrix.  The print option will be used to allow comparison with the
unrotated DTI file. 

.P 0;To examine the rotated matrix in DTIEDIT, type the following commands in
response to the prompt ^*DTIEDIT>\* ^*FILEIN MATRIX__ACCEPT__ROT<CR>\* will
select the rotated DTI file. You will see a message about non-standard data 
origin or direction values, telling you that unexpected results are very 
likely and may occur. As this is an intentionally rotated file this can be 
ignored. ^*CHANGE<CR>\* will display the matrix as a series of characters 
on the screen.  The values may now be examined using the keypad keys as described above. If possible compare the values with the
hardcopy listing of the matrix before rotation, and the note that the
columns and rows are transposed.

.P 0;To exit from screen mode, and return to the ^*DTIEDIT\* prompt, 
type ^*Ctrl/Z\* (hold down the Ctrl key and type Z).  

.P 0;If a line printer is available, then acceptance proceeds by outputting a
classified listing of the matrix to the lineprinter.  Type ^*PRINT 100
100<CR>\* to output 100 columns and 100 rows of the matrix to the printer. 

.P 0;Type ^*EXIT\* to exit from DTIEDIT.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;The module DTIPATCH will be used to examine and edit the metre grid
interval values in the DTI header. The commands to DTIPATCH must be entered
interactively at the terminal in response to a series of prompts. For
acceptance the following sequence of commands should be entered:
.NOFILL
.BL
^*MATRIX__ACCEPT__ROT<CR>\*
^*<CR>\*
^*<CR>\*
^*<CR>\*
^*<CR>\*
^*5<CR>\*
^*5<CR>\*
^*<CR>\*
^*<CR>\*
.BL
.FILL
.P 0;Observe the list of old and new changes.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;The module DTICONVERT is used to convert between different DTI file
formats.  The conversion of the elevation data in the DTI file from
integer word values to real (floating point) values will be demonstrated.
The following commands should be entered interactively at the terminal
in response to a series of explanatory prompts.
.NOFILL
.BL
^*MATRIX__ACCEPT__ROT<CR>\*
^*MATRIX__ACCEPT__REAL<CR>\*
^*LSLA<CR>\*
^*32<CR>\*
^*REAL<CR>\*
.BL
.FILL

.P 0;Observe the list showing suitable characteristics eg. Header:LSLA Data:REAL.
.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;Successful update of the grid interval values and the conversion of the
data values may be demonstrated using the module DTIEDIT. 

.P 0;When the ^*DTIEDIT>\* prompt is displayed on the terminal, select the
converted and patched DTI file by typing ^*FILEIN MATRIX__ACCEPT__REAL<CR>\*.
Select metre units of measurement by typing ^*UNITS METRES<CR>\* and then
examine the header of the DTI file by typing ^*SHOW FILEIN<CR>\*.  Note
that DTIPATCH has successfully edited the east and north grid interval
values to 5 metres.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;Successful conversion of the data values from word to real format, is
shown by examining the matrix values using the keypad keys.  To display the
matrix on the screen type ^*CHANGE\*.  If you now use the keypad keys ^*1
2 3 4 6 7 8 9\* to move the cursor around the matrix, you will see that
the matrix points are held as floating point values.

.P 0;To exit from DTIEDIT type ^*Ctrl/Z\* (hold down the Ctrl key and type Z),
and then in response to the ^*DTIEDIT>\* prompt type ^*EXIT<CR>\*. 

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;Acceptance of the module DTIVIEW is performed next.
Firstly, the acceptance
DTM will be viewed as an isometric model using the default viewing
parameters. Subsequently, quarter screen mode will be used in order to generate
4 isometric views using different viewing parameters: quadrant 1 will show a
view generated using the defaults; quadrant 2 with a x rotation of value of 0;
quadrant 3 with a y rotation value of -50.0 and a x rotation of 45.0, and
quadrant 4 with a direction of view from the north. 

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;In addition to changing the viewing parameters, the acceptance procedure
will also demonstrate how the colour representation of the views may be
varied. A isometric view using a ZSTEP interval of 200 metres will be
generated, and then a view with a ZLIMITS value of 0 to 500. In this view,
terrain above 500 metres will be shown in white. 

.P 0; The annotation of the display with a height/colour legend, and with
user text will be shown.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;The DTM will be viewed as a perspective image using the default viewing
parameters.  The ENABLE FISHNET command will be given so that a fishnet
representation is produced. 

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.P 0;The acceptance procedure will finally demonstrate the generation of
profile cross-sections.  A series of profiles defined by straight lines
through the grid will be generated.

.BLANK;.RIGHT;^*Pass#[#]/Fail#[#]\*

.BL 3

^*Overall Pass#[#]/Fail#[#]\*

.P 0
^*Comments:\*
.FIG 4
.P 0
^*Customer Representative:				Date:\*
.P 0
^*Laser-Scan Representative:				Date:\*
